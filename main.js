(()=>{var u,d,c,p,f,h,t,i={8870:(t,e,i)=>{"use strict";i(5640)},4497:(t,e,_t)=>{"use strict";_t.a(t,async(e,F)=>{try{_t(2287);var g=_t(5640),W=_t(4493),m=_t(59),z=_t(40);_t(8870);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(){T=function(){return a};var h,a={},t=Object.prototype,l=t.hasOwnProperty,u=Object.defineProperty||function(t,e,i){t[e]=i.value},e="function"==typeof Symbol?Symbol:{},s=e.iterator||"@@iterator",i=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag";function n(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{n({},"")}catch(h){n=function(t,e,i){return t[e]=i}}function o(t,e,i,s){var r,n,a,o,e=e&&e.prototype instanceof y?e:y,e=Object.create(e.prototype),s=new M(s||[]);return u(e,"_invoke",{value:(r=t,n=i,a=s,o=c,function(t,e){if(o===f)throw Error("Generator is already running");if(o===g){if("throw"===t)throw e;return{value:h,done:!0}}for(a.method=t,a.arg=e;;){var i=a.delegate;if(i){i=function t(e,i){var s=i.method,r=e.iterator[s];if(r===h)return i.delegate=null,"throw"===s&&e.iterator.return&&(i.method="return",i.arg=h,t(e,i),"throw"===i.method)||"return"!==s&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+s+"' method")),m;s=d(r,e.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,m;r=s.arg;return r?r.done?(i[e.resultName]=r.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=h),i.delegate=null,m):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}(i,a);if(i){if(i===m)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(o===c)throw o=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o=f;i=d(r,n,a);if("normal"===i.type){if(o=a.done?g:p,i.arg===m)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(o=g,a.method="throw",a.arg=i.arg)}})}),e}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}a.wrap=o;var c="suspendedStart",p="suspendedYield",f="executing",g="completed",m={};function y(){}function _(){}function v(){}var e={},x=(n(e,s,function(){return this}),Object.getPrototypeOf),x=x&&x(x(C([]))),w=(x&&x!==t&&l.call(x,s)&&(e=x),v.prototype=y.prototype=Object.create(e));function b(t){["next","throw","return"].forEach(function(e){n(t,e,function(t){return this._invoke(e,t)})})}function A(a,o){var e;u(this,"_invoke",{value:function(i,s){function t(){return new o(function(t,e){!function e(t,i,s,r){var n,t=d(a[t],a,i);if("throw"!==t.type)return(i=(n=t.arg).value)&&"object"==k(i)&&l.call(i,"__await")?o.resolve(i.__await).then(function(t){e("next",t,s,r)},function(t){e("throw",t,s,r)}):o.resolve(i).then(function(t){n.value=t,s(n)},function(t){return e("throw",t,s,r)});r(t.arg)}(i,s,t,e)})}return e=e?e.then(t,t):t()}})}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function C(e){if(e||""===e){var i,t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return i=-1,(t=function t(){for(;++i<e.length;)if(l.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=h,t.done=!0,t}).next=t}throw new TypeError(k(e)+" is not iterable")}return u(w,"constructor",{value:_.prototype=v,configurable:!0}),u(v,"constructor",{value:_,configurable:!0}),_.displayName=n(v,r,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,n(t,r,"GeneratorFunction")),t.prototype=Object.create(w),t},a.awrap=function(t){return{__await:t}},b(A.prototype),n(A.prototype,i,function(){return this}),a.AsyncIterator=A,a.async=function(t,e,i,s,r){void 0===r&&(r=Promise);var n=new A(o(t,e,i,s),r);return a.isGeneratorFunction(e)?n:n.next().then(function(t){return t.done?t.value:n.next()})},b(w),n(w,r,"Generator"),n(w,s,function(){return this}),n(w,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,i=Object(t),s=[];for(e in i)s.push(e);return s.reverse(),function t(){for(;s.length;){var e=s.pop();if(e in i)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=C,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=h)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var s=this;function t(t,e){return n.type="throw",n.arg=i,s.next=t,e&&(s.method="next",s.arg=h),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e],n=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var a=l.call(r,"catchLoc"),o=l.call(r,"finallyLoc");if(a&&o){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!o)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;0<=i;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&l.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var r=s;break}}var n=(r=r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc?null:r)?r.completion:{};return n.type=t,n.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),P(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var i,s,r=this.tryEntries[e];if(r.tryLoc===t)return"throw"===(i=r.completion).type&&(s=i.arg,P(r)),s}throw Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:C(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=h),m}},a}function D(t,e,i,s,r,n,a){try{var o=t[n](a),h=o.value}catch(t){return void i(t)}o.done?e(h):Promise.resolve(h).then(s,r)}function t(o){return function(){var t=this,a=arguments;return new Promise(function(e,i){var s=o.apply(t,a);function r(t){D(s,e,i,r,n,"next",t)}function n(t){D(s,e,i,r,n,"throw",t)}r(void 0)})}}var l=window.innerWidth,u=window.innerHeight,y=function(){var t=!1,e=navigator.userAgent||navigator.vendor||window.opera;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0);return t}()||void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile");console.log(y);var d,s,r,i,c,p,n,h,f,U,G,X,_,v,Y,a,x,V,o,w,b,A,N=document.getElementById("screen-size"),S=new g.lgM,j=(await S.init({background:"#AA9458",width:l,height:u,resizeTo:N,resolution:window.devicePixelRatio||1}),document.body.appendChild(S.canvas),console.log(document.parentElement),25),q=1,$=1,P=16,M=360,C=360,Z=18,E=[],I=[],B=[],K=[],R=null,Q=!0,J=!1,L=!1,tt={x:0,y:0},O=[{index:1,text:"",audio:"",hasText:!1,hasAudio:!1,hasHover:!0},{index:2,text:"",audio:"",hasText:!1,hasAudio:!1,hasHover:!1},{index:3,text:"",audio:"",hasText:!0,hasAudio:!0,hasHover:!0},{index:4,text:"",audio:"",hasText:!0,hasAudio:!0,hasHover:!0},{index:5,text:"",audio:"",hasText:!0,hasAudio:!1,hasHover:!0},{index:6,text:"",audio:"",hasText:!0,hasAudio:!0,hasHover:!0},{index:7,text:"",audio:"",hasText:!1,hasAudio:!0,hasHover:!0},{index:8,text:"",audio:"",hasText:!0,hasAudio:!0,hasHover:!0},{index:9,text:"",audio:"",hasText:!0,hasAudio:!0,hasHover:!0},{index:10,text:"",audio:"",hasText:!1,hasAudio:!1,hasHover:!1},{index:11,text:"",audio:"",hasText:!1,hasAudio:!1,hasHover:!1},{index:12,text:"",audio:"",hasText:!1,hasAudio:!0,hasHover:!0},{index:13,text:"",audio:"",hasText:!0,hasAudio:!1,hasHover:!0},{index:14,text:"",audio:"",hasText:!0,hasAudio:!0,hasHover:!0},{index:15,text:"",audio:"",hasText:!0,hasAudio:!1,hasHover:!0},{index:16,text:"",audio:"",hasText:!1,hasAudio:!0,hasHover:!0},{index:17,text:"",audio:"",hasText:!1,hasAudio:!1,hasHover:!0},{index:18,text:"",audio:"",hasText:!0,hasAudio:!1,hasHover:!0},{index:19,text:"",audio:"",hasText:!0,hasAudio:!1,hasHover:!0},{index:20,text:"",audio:"",hasText:!1,hasAudio:!1,hasHover:!1},{index:21,text:"",audio:"",hasText:!0,hasAudio:!1,hasHover:!0},{index:22,text:"",audio:"",hasText:!1,hasAudio:!1,hasHover:!1},{index:23,text:"",audio:"",hasText:!1,hasAudio:!1,hasHover:!1},{index:24,text:"",audio:"",hasText:!0,hasAudio:!1,hasHover:!0},{index:25,text:"",audio:"",hasText:!1,hasAudio:!1,hasHover:!1},{index:26,text:"",audio:"",hasText:!0,hasAudio:!1,hasHover:!0},{index:27,text:"",audio:"",hasText:!0,hasAudio:!0,hasHover:!1}],et={index:-1,text:"",audio:"",hasText:!0,hasAudio:!1},it=!1;function st(){return(st=t(T().mark(function t(){return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.sP.load("./assets/fonts/LibreFranklin-Regular.ttf");case 2:A=t.sent,console.log("Font loaded");case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function rt(){return(rt=t(T().mark(function t(){var e,i;return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=T().mark(function t(e){return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!0===O[e].hasText)return t.prev=1,t.next=4,fetch("./assets/texts/".concat(e+1,".txt")).then(function(t){return t.text()}).then(function(t){void 0!==t&&t.startsWith("<!DOCTYPE html>")?O[e].text="":O[e].text=t});t.next=9;break;case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),O[e].text="";case 9:if(O[e].hasAudio)if(""!==O[e].audio)ut(O[e].audio,container);else try{fetch("./assets/audio/".concat(O[e].index,".mp3")).then(function(t){return t.blob()}).then(function(t){t=URL.createObjectURL(t);O[e].audio=t})}catch(t){O[e].audio=""}case 10:case"end":return t.stop()}},t,null,[[1,6]])}),i=0;case 2:if(i<=j)return t.delegateYield(e(i),"t0",4);t.next=7;break;case 4:i++,t.next=2;break;case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function nt(){return(nt=t(T().mark(function t(){return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("./assets/shapes/map_shape.json").then(function(t){return t.json()}).then(function(t){f=t.shapes[0]});case 2:return t.next=4,fetch("./assets/texts/description.txt").then(function(t){return t.text()}).then(function(t){void 0!==t&&t.startsWith("<!DOCTYPE html>")?et.text="":et.text=t});case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function at(){return(at=t(T().mark(function t(){return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("./assets/shapes/shapes.json").then(function(t){return t.json()}).then(function(t){t.shapes.forEach(function(t){K.push(t)})});case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function ot(){return(ot=t(T().mark(function t(){return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.sP.load("./assets/textures/map/map.png");case 2:return x=t.sent,t.next=5,g.sP.load("./assets/textures/map/map-hover.png");case 5:return V=t.sent,t.next=8,g.sP.load("./assets/textures/background.png");case 8:return s=t.sent,t.next=11,g.sP.load("./assets/UI/Box1.png");case 11:return U=t.sent,t.next=14,g.sP.load("./assets/UI/ScrollBar.png");case 14:return G=t.sent,t.next=17,g.sP.load("./assets/UI/ScrollBarButton.png");case 17:return X=t.sent,t.next=20,g.sP.load("./assets/UI/CloseButton.png");case 20:_=t.sent;case 21:case"end":return t.stop()}},t)}))).apply(this,arguments)}function ht(){return(ht=t(T().mark(function t(){var e,i;return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=2;case 1:if(e<=27)return t.next=4,g.sP.load("./assets/textures/frames/".concat(e,".png"));t.next=18;break;case 4:if(i=t.sent,E.push(i),!0===yt(e).hasHover)return t.t0=I,t.next=10,g.sP.load("./assets/textures/frames/".concat(e,"-Hover.png"));t.next=14;break;case 10:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),t.next=15;break;case 14:I.push(i);case 15:e++,t.next=1;break;case 18:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){return st.apply(this,arguments)}().then(function(){!function(){return ot.apply(this,arguments)}().then(function(){!function(){return nt.apply(this,arguments)}().then(function(){n=s.width,h=s.height,e=n*q,t=h*$,(d=new W.LM({screenWidth:l,screenHeight:u,worldWidth:e,worldHeight:t,events:S.renderer.events})).drag({direction:"x",factor:.3,lineHeight:20}).decelerate({friction:.95}).wheel({percent:.1}),d.clampZoom({minScale:1,maxScale:1}),e=function(){var t=s.width/s.height,e=window.innerWidth;return window.innerHeight*t/e-1}(),d.clamp({left:-l/2*e,right:l/2*e+l/2*2,underflow:"none"}),tt={x:d.center.x,y:d.center.y},S.stage.addChild(d),n=c=l,h=p=u,d.plugins.pause("drag");var t=l,a=(y&&(t=x.width,x.height),(i=(new g.A1g).texture(x,16777215,0,0,t,u)).zIndex=900,i.x=d.center.x-(y?l:l/2),i.y=d.center.y-u/2,d.addChild(i),[]),e=(void 0!==f&&f.points.forEach(function(t){for(var e=0;e<t.length;e+=2)a.push(t[e]),a.push(t[e+1])}),(new g.TgI).poly(a).fill("red")),o=new g.A1g(e);o.alpha=0,o.zIndex=901,o.interactive=!0,o.cursor="pointer",o.hitArea=new g.tS(a),o.on("pointerover",function(){var t=l;y&&(t=x.width,x.height),i.clear(),t=(new g.TgI).texture(V,16777215,0,0,t,u),(i=new g.A1g(t)).zIndex=900,i.x=d.center.x-(y?l:l/2),i.y=d.center.y-u/2,d.addChild(i)}),o.on("pointerout",function(){var t=l;y&&(t=x.width,x.height),i.clear(),t=(new g.TgI).texture(x,16777215,0,0,t,u),(i=new g.A1g(t)).zIndex=900,i.x=d.center.x-(y?l:l/2),i.y=d.center.y-u/2,d.addChild(i)}),o.on("pointerdown",function(t){y&&(C=.8*window.innerWidth,M=.6*window.innerHeight,P=32);var e,i=C,s=M,r=0,n=0;n=y?(r=l/2-i/2,u/2-s/2):(e=mt(a),r=o.toGlobal(e).x-1.5*i,o.toGlobal(e).y-s/2),lt(S.stage,S.canvas,et,r,n,!0,1)}),i.addChild(o)}).then(function(){!function(){return rt.apply(this,arguments)}().then(function(){!function(){return at.apply(this,arguments)}().then(function(){!function(){return ht.apply(this,arguments)}().then(function(){var t=(new g.TgI).rect(-s.width/2,0,s.width,s.height).texture(s,16777215,-s.width/2,-s.height/2);(r=new g.A1g(t)).scale.set(q,$),r.x=d.center.x,r.y=d.center.y,r.zIndex=950,r.interactive=!0,r.buttonMode=!0,r.eventMode="static",r.hitArea=new g.M_G(-s.width/2,-s.height/2,s.width,s.height),d.addChild(r);for(var e=0;e<j;e++){var i=(new g.TgI).texture(E[e],16777215,-E[e].width/2,-E[e].height/2),i=new g.A1g(i);i.zIndex=e,B.push(i),r.addChild(i),!function(a){var o=[];void 0!==K[a]&&K[a].points.forEach(function(t){for(var e=0;e<t.length;e+=2)o.push(t[e]-s.width/2),o.push(t[e+1]-s.height/2)});var t=(new g.TgI).poly(o).fill("red"),h=new g.A1g(t),t=(h.alpha=0,h.zIndex=a*j,!1);I[a].label.includes("Hover")&&(t=!0,h.alpha=0);h.interactive=t,h.cursor="pointer",h.hitArea=new g.tS(o),h.on("pointerover",function(){var t,e;J=!0,B[t=a].clear(),e=(new g.TgI).texture(I[t],16777215,-E[t].width/2,-E[t].height/2),B[t]=new g.A1g(e),B[t].zIndex=t,r.addChild(B[t])}),h.on("pointerout",function(){var t,e;J=!1,B[t=a].clear(),e=(new g.TgI).texture(E[t],16777215,-E[t].width/2,-E[t].height/2),B[t]=new g.A1g(e),B[t].zIndex=t,r.addChild(B[t])}),h.on("pointerdown",function(t){R=new g.bRX(t.global.x,t.global.y)}),h.on("pointerup",function(t){var e,i,s,r,n;!1!==J&&(!R||R.x===t.global.x&&R.y===t.global.y)&&(t=a+2,H(),y&&(C=.8*window.innerWidth,M=.6*window.innerHeight,P=32),e=C,i=M,r=s=0,y?(s=l/2-e/2,r=u/2-i/2):(n=mt(o),s=h.toGlobal(n).x,r=h.toGlobal(n).y+64,c<s+e&&(s=c-1.2*e),p<r+i&&(r=p-1.2*i)),(n=yt(t)).hasText||n.hasAudio)&&(lt(S.stage,S.canvas,n,s,r,!1,4),d.pause=!0)}),r.addChild(h)}(e)}(o=(new g.A1g).texture(_,16777215,0,0,32,32)).zIndex=99999999,o.x=.95*window.innerWidth,o.y=.98*-window.innerHeight,o.interactive=!0,o.buttonMode=!0,o.cursor="pointer",o.hitArea=new g.M_G(0,0,32,32),o.on("pointerdown",function(){gt()}),y?o.scale.set(5):o.scale.set(3),d.addChild(o),gt();t=s.width/s.height;c/p<t?n=p*t:h=c/t,r&&(r.width=n,r.height=h),it=!0})})})})})});var lt=function(t,e,i){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:32,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:150,n=5<arguments.length&&void 0!==arguments[5]&&arguments[5],a=6<arguments.length?arguments[6]:void 0,o=new g.mcf,s=((Y=o).x=s,o.y=r,.3),h=.05*-C,l=-M*(s=y?.15:s),u=C+.11*C,d=M+.4*M,c=-M*s*.93,p=1==i.hasAudio&&0==i.hasText,f=0==i.hasAudio&&1==i.hasText,f=(0==n&&(p?(h=.05*-C,u=C+.11*C,d=.3*M,c=(l=-M*s)*.92):f&&(h=.05*-C,l=-M*s*.8,u=C+.11*C,d=M+.3*M,c=-M*s*.85)),(new g.A1g).texture(U,16777215,h,l,u,d)),s=(f.zIndex=0,f.x=0,f.y=0,t.addChild(o),(new g.A1g).texture(_,16777215,0,0,32,32));s.zIndex=1e3,s.x=C*(y?.88:.8),s.y=c,s.interactive=!0,s.buttonMode=!0,s.cursor="pointer",s.hitArea=new g.M_G(0,0,32,32),s.on("pointerdown",function(){H()}),y?s.scale.set(5):s.scale.set(3),o.addChild(s),!0===n&&((w=(new g.A1g).rect(0,0,128,32).fill(8617306)).zIndex=1100,w.x=C/2*(y?.3:.5),w.y=-M*(y?.1:.2),w.interactive=!0,w.buttonMode=!0,w.cursor="pointer",w.hitArea=new g.M_G(0,0,128,32),w.on("pointerdown",function(){!1!==it&&(H(),gt())}),o.addChild(w),(b=new g.EYj("View Mural",new g.xJt({fontFamily:A.family,fontSize:Z,fontWeight:"bold",fill:0,align:"center",padding:10}))).roundPixels=!0,b.zIndex=1101,b.x=64-b.width/2,b.y=16-b.height/2,y?w.scale.set(2):w.scale.set(1),w.addChild(b)),o.addChild(f),p&&(o.y=r+.5*M),i.hasText&&(h=ft(C,M,o,i,a),l=new m.Si({base:dt(P,M,255),button:ct(P,16776960),minPosition:0,maxPosition:M,rate:0,isHorizontal:!1,canvas:e},h),v=l,t.addChild(l),l.x=o.x+C,l.y=r,l.sliderEventEmitter.on("slider_change",function(t){})),i.hasAudio&&""!==i.audio&&ut(i.audio,o)};function ut(t,e){var i=y?.05:.2;(a=document.querySelector("audio")).style.position="absolute",a.style.top=e.y-M*i+"px",a.style.left=e.x+.05*C+"px",a.style.zIndex="1000",a.src=t,a.style.display="block",a.style.width=.8*C+"px",a.style.opacity=.7,a.controls=!0}var dt=function(t,e,i){var s=new g.A1g;return s.rect(0,0,t,e).fill(i).texture(G,16777215,0,0,t,e),s.hitArea=new g.M_G(0,0,t,e),s.zIndex=999,s},ct=function(t,e){var i=new g.A1g;return i.rect(-t/2,.5*-t,t,t).texture(X,16777215,-t/2,.5*-t,t,t),i.hitArea=new g.M_G(-t/2,.5*-t,t,t),i.x=t/2,i.zIndex=1e3,i},pt=function(t,e,i,s,r,n){var a=null,o=1,s=(r||((a=new g.xni({text:s.text,style:{fontFamily:A.family,textFontSize:18,wordWrap:!0,wordWrapWidth:t,align:"left",padding:20}})).x=0,a.y=0,a.zIndex=1e3,a.width=t,a.roundPixels=!0,r=a.height,o=Math.ceil(r/e)),e*=o,new g.A1g);s.rect(0,0,t,e).fill(n),s.boundsArea=new g.M_G(0,0,t,e),null!=a&&s.addChild(a),s.interactive=!0;return s.on("wheel",function(t){var e,i,s,t=0<t.deltaY?-16:16;t=t,e=v.contents.target,i=v.contents.mask,s=v.isHorizontal,t=m.$P.getPosition(e,s)+t,m.wl.clampTargetPosition(e,i,t,s),v.wheelManager.emit("update_target_position"),v.scrollBarEventEmitter.emit("stop_inertial_tween")}),s.on("pointerdown",function(t){L=!0,v.inertialManager.onMouseDown(t)}),s.on("pointermove",function(t){L&&v.inertialManager.onMouseMove(t)}),s.on("pointerup",function(t){L=!1,v.inertialManager.onMouseUp(t)}),s.on("pointerupoutside",function(t){L=!1,v.inertialManager.onMouseUp(t)}),i.addChild(s),s};var ft=function(t,e,i,s){s=pt(t,e,i,s,!1,{color:13552302}),t=pt(t,e,i,null,!0,{color:255,alpha:.3});return new m.X_(s,t,i)};function gt(){H(),Q?(r.visible=!1,Q=!1,i.visible=!0,d.plugins.pause("drag"),o.visible=!1,d.moveCenter(tt.x,tt.y)):(r.visible=!0,Q=!0,i.visible=!1,o.visible=!0,d.plugins.resume("drag"))}function mt(t){for(var e=0,i=0,s=0;s<t.length;s+=2)e+=t[s],i+=t[s+1];return e/=t.length/2,i/=t.length/2,new g.bRX(e,i)}function H(){d.pause=!1,S.stage.removeChild(Y),a&&(a.style.display="none",a.pause()),v&&(S.stage.removeChild(v),v.destroy())}function yt(e){return O.find(function(t){return t.index===e})}S.stage.eventMode="static",S.stage.hitArea=S.screen,S.ticker.add(function(t){o&&(o.x=y?d.center.x+.3*window.innerWidth:d.center.x+.45*window.innerWidth,o.y=d.center.y-.48*window.innerHeight)}),g.RvI.shared.add(function(t){z.Ay.update(performance.now())}),F()}catch(t){F(t)}},1)},6570:t=>{"use strict";function e(t,e,i){i=i||2;var s,r,n,a,o,h=e&&e.length,l=h?e[0]*i:t.length,u=g(t,0,l,i,!0),d=[];if(u&&u.next!==u.prev){if(h&&(u=function(t,e,i,s){var r,n,a,o,h=[];for(r=0,n=e.length;r<n;r++)o=e[r]*s,a=r<n-1?e[r+1]*s:t.length,(o=g(t,o,a,s,!1))===o.next&&(o.steiner=!0),h.push(function(t){var e=t,i=t;for(;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next,e!==t;);return i}(o));for(h.sort(m),r=0;r<h.length;r++)i=function(t,e){var i=function(t,e){var i,s=e,r=t.x,n=t.y,a=-1/0;do{if(n<=s.y&&n>=s.next.y&&s.next.y!==s.y){var o=s.x+(n-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(o<=r&&a<o&&(a=o,i=s.x<s.next.x?s:s.next,o===r))return i}}while(s=s.next,s!==e);if(!i)return null;var h,l=i,u=i.x,d=i.y,c=1/0;s=i;for(;r>=s.x&&s.x>=u&&r!==s.x&&k(n<d?r:a,n,u,d,n<d?a:r,n,s.x,s.y)&&(h=Math.abs(n-s.y)/(r-s.x),B(s,t))&&(h<c||h===c&&(s.x>i.x||s.x===i.x&&function(t,e){return T(t.prev,t,e.prev)<0&&T(e.next,t,t.next)<0}(i,s)))&&(i=s,c=h),s=s.next,s!==l;);return i}(t,e);return i?(P(t=R(i,t),t.next),P(i,i.next)):e}(h[r],i);return i}(t,e,u,i)),t.length>80*i){for(var c=s=t[0],p=r=t[1],f=i;f<l;f+=i)(n=t[f])<c&&(c=n),(a=t[f+1])<p&&(p=a),s<n&&(s=n),r<a&&(r=a);o=0!==(o=Math.max(s-c,r-p))?32767/o:0}M(u,d,i,c,p,o,0)}return d}function g(t,e,i,s,r){var n,a;if(r===0<y(t,e,i,s))for(n=e;n<i;n+=s)a=o(n,t[n],t[n+1],a);else for(n=i-s;e<=n;n-=s)a=o(n,t[n],t[n+1],a);return a&&E(a,a.next)&&(L(a),a=a.next),a}function P(t,e){if(!t)return t;e=e||t;var i,s=t;do{if(i=!1,s.steiner||!E(s,s.next)&&0!==T(s.prev,s,s.next))s=s.next;else{if(L(s),(s=e=s.prev)===s.next)break;i=!0}}while(i||s!==e);return e}function M(t,e,i,s,r,n,a){if(t){if(!a&&n){for(var o=t,h=s,l=r,u=n,d=o;0===d.z&&(d.z=C(d.x,d.y,h,l,u)),d.prevZ=d.prev,d.nextZ=d.next,(d=d.next)!==o;);d.prevZ.nextZ=null,d.prevZ=null;var c,p,f,g,m,y,_,v,x=d,w=1;do{for(p=x,m=x=null,y=0;p;){for(y++,f=p,c=_=0;c<w&&(_++,f=f.nextZ);c++);for(v=w;0<_||0<v&&f;)0!==_&&(0===v||!f||p.z<=f.z)?(p=(g=p).nextZ,_--):(f=(g=f).nextZ,v--),m?m.nextZ=g:x=g,g.prevZ=m,m=g;p=f}}while(m.nextZ=null,w*=2,1<y)}for(var b,A,S=t;t.prev!==t.next;)if(b=t.prev,A=t.next,n?function(t,e,i,s){var r=t.prev,n=t,a=t.next;if(0<=T(r,n,a))return;var o=r.x,h=n.x,l=a.x,u=r.y,d=n.y,c=a.y,p=o<h?o<l?o:l:h<l?h:l,f=u<d?u<c?u:c:d<c?d:c,g=h<o?l<o?o:l:l<h?h:l,m=d<u?c<u?u:c:c<d?d:c,y=C(p,f,e,i,s),_=C(g,m,e,i,s),v=t.prevZ,x=t.nextZ;for(;v&&v.z>=y&&x&&x.z<=_;){if(v.x>=p&&v.x<=g&&v.y>=f&&v.y<=m&&v!==r&&v!==a&&k(o,u,h,d,l,c,v.x,v.y)&&0<=T(v.prev,v,v.next))return;if(v=v.prevZ,x.x>=p&&x.x<=g&&x.y>=f&&x.y<=m&&x!==r&&x!==a&&k(o,u,h,d,l,c,x.x,x.y)&&0<=T(x.prev,x,x.next))return;x=x.nextZ}for(;v&&v.z>=y;){if(v.x>=p&&v.x<=g&&v.y>=f&&v.y<=m&&v!==r&&v!==a&&k(o,u,h,d,l,c,v.x,v.y)&&0<=T(v.prev,v,v.next))return;v=v.prevZ}for(;x&&x.z<=_;){if(x.x>=p&&x.x<=g&&x.y>=f&&x.y<=m&&x!==r&&x!==a&&k(o,u,h,d,l,c,x.x,x.y)&&0<=T(x.prev,x,x.next))return;x=x.nextZ}return 1}(t,s,r,n):function(t){var e=t.prev,i=t,t=t.next;if(0<=T(e,i,t))return;var s=e.x,r=i.x,n=t.x,a=e.y,o=i.y,h=t.y,l=s<r?s<n?s:n:r<n?r:n,u=a<o?a<h?a:h:o<h?o:h,d=r<s?n<s?s:n:n<r?r:n,c=o<a?h<a?a:h:h<o?o:h,p=t.next;for(;p!==e;){if(p.x>=l&&p.x<=d&&p.y>=u&&p.y<=c&&k(s,a,r,o,n,h,p.x,p.y)&&0<=T(p.prev,p,p.next))return;p=p.next}return 1}(t))e.push(b.i/i|0),e.push(t.i/i|0),e.push(A.i/i|0),L(t),t=A.next,S=A.next;else if((t=A)===S){a?1===a?M(t=function(t,e,i){var s=t;do{var r=s.prev,n=s.next.next}while(!E(r,n)&&I(r,s,s.next,n)&&B(r,n)&&B(n,r)&&(e.push(r.i/i|0),e.push(s.i/i|0),e.push(n.i/i|0),L(s),L(s.next),s=t=n),s=s.next,s!==t);return P(s)}(P(t),e,i),e,i,s,r,n,2):2===a&&function(t,e,i,s,r,n){var a=t;do{for(var o,h=a.next.next;h!==a.prev;){if(a.i!==h.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&I(i,i.next,t,e))return 1}while(i=i.next,i!==t);return}(t,e)&&(B(t,e)&&B(e,t)&&function(t,e){var i=t,s=!1,r=(t.x+e.x)/2,n=(t.y+e.y)/2;for(;i.y>n!=i.next.y>n&&i.next.y!==i.y&&r<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next,i!==t;);return s}(t,e)&&(T(t.prev,t,e.prev)||T(t,e.prev,e))||E(t,e)&&0<T(t.prev,t,t.next)&&0<T(e.prev,e,e.next))}(a,h))return o=R(a,h),a=P(a,a.next),o=P(o,o.next),M(a,e,i,s,r,n,0),M(o,e,i,s,r,n,0);h=h.next}}while(a=a.next,a!==t)}(t,e,i,s,r,n):M(P(t),e,i,s,r,n,1);break}}}function m(t,e){return t.x-e.x}function C(t,e,i,s,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-s)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function k(t,e,i,s,r,n,a,o){return(t-a)*(n-o)<=(r-a)*(e-o)&&(i-a)*(e-o)<=(t-a)*(s-o)&&(r-a)*(s-o)<=(i-a)*(n-o)}function T(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function E(t,e){return t.x===e.x&&t.y===e.y}function I(t,e,i,s){var r=l(T(t,e,i)),n=l(T(t,e,s)),a=l(T(i,s,t)),o=l(T(i,s,e));return r!==n&&a!==o||0===r&&h(t,i,e)||0===n&&h(t,s,e)||0===a&&h(i,t,s)||!(0!==o||!h(i,e,s))}function h(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function l(t){return 0<t?1:t<0?-1:0}function B(t,e){return T(t.prev,t,t.next)<0?0<=T(t,e,t.next)&&0<=T(t,t.prev,e):T(t,e,t.prev)<0||T(t,t.next,e)<0}function R(t,e){var i=new a(t.i,t.x,t.y),s=new a(e.i,e.x,e.y),r=t.next,n=e.prev;return(t.next=e).prev=t,(i.next=r).prev=i,(s.next=i).prev=s,(n.next=s).prev=n,s}function o(t,e,i,s){t=new a(t,e,i);return s?(t.next=s.next,(t.prev=s).next.prev=t,s.next=t):(t.prev=t).next=t,t}function L(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function a(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function y(t,e,i,s){for(var r=0,n=e,a=i-s;n<i;n+=s)r+=(t[a]-t[n])*(t[n+1]+t[a+1]),a=n;return r}t.exports=e,(t.exports.default=e).deviation=function(t,e,i,s){var r=e&&e.length,n=r?e[0]*i:t.length,a=Math.abs(y(t,0,n,i));if(r)for(var o=0,h=e.length;o<h;o++){var l=e[o]*i,u=o<h-1?e[o+1]*i:t.length;a-=Math.abs(y(t,l,u,i))}for(var d=0,o=0;o<s.length;o+=3){var c=s[o]*i,p=s[o+1]*i,f=s[o+2]*i;d+=Math.abs((t[c]-t[f])*(t[1+p]-t[1+c])-(t[c]-t[p])*(t[1+f]-t[1+c]))}return 0===a&&0===d?0:Math.abs((d-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,r=0;r<t.length;r++){for(var n=0;n<t[r].length;n++)for(var a=0;a<e;a++)i.vertices.push(t[r][n][a]);0<r&&(s+=t[r-1].length,i.holes.push(s))}return i}},228:t=>{"use strict";var s=Object.prototype.hasOwnProperty,p="~";function i(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(t,e,i,s,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");i=new n(i,s||t,r),s=p?p+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],i]:t._events[s].push(i):(t._events[s]=i,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function e(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(p=!1)),e.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)s.call(t,e)&&i.push(p?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},e.prototype.listeners=function(t){var t=p?p+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var i=0,s=e.length,r=new Array(s);i<s;i++)r[i]=e[i].fn;return r},e.prototype.listenerCount=function(t){t=p?p+t:t,t=this._events[t];return t?t.fn?1:t.length:0},e.prototype.emit=function(t,e,i,s,r,n){var a=p?p+t:t;if(!this._events[a])return!1;var o,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,s),!0;case 5:return h.fn.call(h.context,e,i,s,r),!0;case 6:return h.fn.call(h.context,e,i,s,r,n),!0}for(c=1,o=new Array(l-1);c<l;c++)o[c-1]=arguments[c];h.fn.apply(h.context,o)}else for(var u,d=h.length,c=0;c<d;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,i);break;case 4:h[c].fn.call(h[c].context,e,i,s);break;default:if(!o)for(u=1,o=new Array(l-1);u<l;u++)o[u-1]=arguments[u];h[c].fn.apply(h[c].context,o)}return!0},e.prototype.on=function(t,e,i){return r(this,t,e,i,!1)},e.prototype.once=function(t,e,i){return r(this,t,e,i,!0)},e.prototype.removeListener=function(t,e,i,s){t=p?p+t:t;if(this._events[t])if(e){var r=this._events[t];if(r.fn)r.fn!==e||s&&!r.once||i&&r.context!==i||h(this,t);else{for(var n=0,a=[],o=r.length;n<o;n++)(r[n].fn!==e||s&&!r[n].once||i&&r[n].context!==i)&&a.push(r[n]);a.length?this._events[t]=1===a.length?a[0]:a:h(this,t)}}else h(this,t);return this},e.prototype.removeAllListeners=function(t){return t?(t=p?p+t:t,this._events[t]&&h(this,t)):(this._events=new i,this._eventsCount=0),this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prefixed=p,t.exports=e.EventEmitter=e},8133:t=>{t.exports=function(t){var r=[];return t.replace(e,function(t,e,i){var s=e.toLowerCase();for(i=function(t){t=t.match(a);return t?t.map(Number):[]}(i),"m"==s&&2<i.length&&(r.push([e].concat(i.splice(0,2))),s="l",e="m"==e?"l":"L");;){if(i.length==n[s])return i.unshift(e),r.push(i);if(i.length<n[s])throw new Error("malformed path data");r.push([e].concat(i.splice(0,n[s])))}}),r};var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},59:(t,e,i)=>{"use strict";i.d(e,{X_:()=>u,Si:()=>d,wl:()=>c,HM:()=>s,l2:()=>n,OO:()=>a,$P:()=>p});class s{constructor(t){this.rate=t}}var r=i(5640);class n extends r.mcf{get rate(){return this._rate}constructor(t){super(),this.isHorizontal=!0,this.wheelSpeed=3e-4,this.dragStartPos=new r.bRX,this.isDragging=!1,this.sliderEventEmitter=new r.bkB,this.startMove=t=>{this.onPressedSliderButton(t)},this.moveSlider=t=>{this.onMoveSlider(t)},this.moveSliderFinish=()=>{this.isDragging=!1,p.removeEventListenerFromTarget(this.buttonRootContainer,"pointermove",this.moveSlider),this._slideButton.off("pointerup",this.moveSliderFinish),this._slideButton.off("pointerupoutside",this.moveSliderFinish),this.sliderEventEmitter.emit("slider_change_finished",new s(this.rate))},this.onWheel=t=>{t=p.clamp(this.rate+t.deltaY*this.wheelSpeed,n.MAX_RATE,0);this.changeRate(t)},this.dispose=t=>{this.onDisposeFunction(t)};t=a.init(t);this.canvas=t.canvas,this._base=this.initBase(t.base),this._bar=this.initBarAndMask(t?.bar),this._barMask=this.initBarAndMask(t?.mask),this._bar&&this._barMask&&(this._bar.mask=this._barMask),this._slideButton=this.initSliderButton(t.button),this.buttonRootContainer=p.getRootContainer(this.canvas,this._slideButton),this._minPosition=t.minPosition,this._maxPosition=t.maxPosition,this.isHorizontal=t.isHorizontal,this._rate=t.rate,this.changeRate(this._rate)}changeRate(t){this.isDragging||(this._rate=t,t=this.convertRateToPixel(this._rate),this.updateParts(t),this.sliderEventEmitter.emit("slider_change",new s(this.rate)))}onPressedSliderButton(t){this.isDragging=!0;var e=t.currentTarget,t=this.toLocal(t.global);this.dragStartPos.set(t.x-e.x,t.y-e.y),p.addEventListenerToTarget(this.buttonRootContainer,"pointermove",this.moveSlider),this._slideButton.on("pointerup",this.moveSliderFinish),this._slideButton.on("pointerupoutside",this.moveSliderFinish)}onMoveSlider(t){t=this.limitSliderButtonPosition(t);this.updateParts(t),this._rate=this.convertPixelToRate(t),this.sliderEventEmitter.emit("slider_change",new s(this.rate))}limitSliderButtonPosition(t){t=p.getPointerLocalPosition(this,this.isHorizontal,this.dragStartPos,t);return p.clamp(t,this._maxPosition,this._minPosition)}updateParts(e){var t=t=>{p.setSize(t,this.isHorizontal,e-p.getPosition(t,this.isHorizontal))};this._bar&&!this._barMask&&t(this._bar),this._barMask&&t(this._barMask),p.setPosition(this._slideButton,this.isHorizontal,e)}onPressBase(t){this.dragStartPos.set(0,0),this.moveSlider(t),this.sliderEventEmitter.emit("slider_change_finished",new s(this.rate))}convertRateToPixel(t){return p.convertRateToPixel(t,this._maxPosition,this._minPosition)}convertPixelToRate(t){return p.convertPixelToRate(t,this._maxPosition,this._minPosition)}initBase(t){return t.eventMode="static",t.on("pointertap",t=>{this.onPressBase(t)}),t.on("wheel",this.onWheel),p.addChildParts(this,t),t}initBarAndMask(t){if(null!=t)return t.eventMode="none",p.addChildParts(this,t),t}initSliderButton(t){return t.on("pointerdown",this.startMove),t.on("wheel",this.onWheel),t.eventMode="static",p.addChildParts(this,t),t}onDisposeFunction(t){this.removeAllListeners(),this._base.removeAllListeners(),this._slideButton.removeAllListeners(),this.removeChildren()}}n.MAX_RATE=1;class a{static init(t){return this.check(t),null!=t.rate&&(t.rate=Math.max(0,t.rate),t.rate=Math.min(n.MAX_RATE,t.rate)),t.rate??=0,t.minPosition??=0,t.isHorizontal??=!0,t}static check(t){this.checkParts(t.base,"base"),this.checkParts(t.button,"button"),this.checkParts(t.mask,"mask"),this.checkParts(t.bar,"bar")}static checkParts(t,e){if(null!=t){var i=p.getContentsBounds(t);if(0===i.width&&0===i.height)throw new Error(`SliderView : ${e} 初期化オプションで指定されたDisplayObjectにバウンディングボックスが存在しません。Containerを利用する場合はhitAreaを利用してバウンディングボックスを手動で設定してください。`);t.parent&&console.warn("初期化オプションで指定されたパーツがすでに別の親にaddChildされています。SliderViewおよびScrollBarViewの構成パーツは同一のコンテナにaddChildされることを前提としています。")}}}var o=i(40);class h extends r.bkB{get speed(){return this._speed}constructor(t){super(),this.decelerationRate=.975,this.overflowScrollRange=180,this._speed=0,this.isDragging=!1,this._isStart=!1,this.onMouseDown=t=>{this.updateDragPos(t),this.isDragging=!0,this._speed=0,this.tween&&this.disposeTween(),this.addDragListener()},this.onMouseMove=t=>{var e;null!=this.dragPos&&(e=this.getDragPos(t)-this.dragPos,this._speed=e,this.addTargetPosition(e*this.getOverflowDeceleration()),this.updateDragPos(t))},this.onMouseUp=()=>{this.removeDragListener(),this.isDragging=!1,this.onTick()},this.onTick=()=>{var t;this.isDragging||0===this._speed&&0===this.getLeaveRangeFromMask()||this.tween?.isPlaying()||(t=this.getOverflowDeceleration(),this._speed*=this.decelerationRate*t,this.addTargetPosition(this._speed),.1<Math.abs(this._speed))||(this._speed=0,t={[this.scrollBarView.isHorizontal?"x":"y"]:this.getClampedPos()},this.disposeTween(),this.tween=new o.K(this.scrollBarView.contents.target).to(t,666).onUpdate(()=>{this.emit("update_target_position")}).easing(o.GS.Cubic.Out).start())},this.stopInertial=()=>{this._speed=0,this.disposeTween()},this.disposeTween=()=>{this.tween&&(this.tween.stop(),this.tween=void 0)},(this.scrollBarView=t).scrollBarEventEmitter.on("stop_inertial_tween",this.stopInertial),this.scrollBarView.contents.target.eventMode="static",this.start()}start(){this._isStart||(this._isStart=!0,this.scrollBarView.contents.target.on("pointerdown",this.onMouseDown),r.RvI.shared.add(this.onTick))}stop(){this._isStart&&(this._isStart=!1,this.scrollBarView.contents.target.off("pointerdown",this.onMouseDown),this.removeDragListener(),this.stopInertial(),r.RvI.shared.remove(this.onTick))}addDragListener(){this.switchDragListener(!0)}removeDragListener(){this.switchDragListener(!1)}switchDragListener(t){var e=this.scrollBarView.contents.target,i=this.scrollBarView.canvas??e,s=p.toggleEventListener;s(t,i,"pointermove",this.onMouseMove),s(t,e,"pointerup",this.onMouseUp),s(t,e,"pointerupoutside",this.onMouseUp)}getDragPos(t){return p.getPointerEventPosition(t,this.scrollBarView.isHorizontal)}updateDragPos(t){this.dragPos=this.getDragPos(t)}addTargetPosition(t){var e=this.scrollBarView.contents.target,i=this.scrollBarView.isHorizontal,s=p.getPosition(e,i);p.setPosition(e,i,s+t),this.emit("update_target_position")}getOverflowDeceleration(){var t=this.getLeaveRangeFromMask();let e=(this.overflowScrollRange-t)/this.overflowScrollRange;return e=e<0?0:e}getLeaveRangeFromMask(){var t=this.scrollBarView.contents.target,e=this.scrollBarView.isHorizontal,t=p.getPosition(t,e),e=this.getClampedPos();return Math.abs(t-e)}getClampedPos(){var t=this.scrollBarView.contents.target,e=this.scrollBarView.isHorizontal;return c.getClampedTargetPosition(t,this.scrollBarView.contents.mask,e)}}class l extends r.bkB{constructor(t){super(),this.delta=16,this._isStart=!1,this.wheelHandler=t=>{console.log("Event: ",t);t=0<t.deltaY?-this.delta:this.delta;this.scroll(t)},this.scrollBarView=t,this.scrollBarView.contents.target.eventMode="static",this.start()}start(){var t;this._isStart||(t=this.scrollBarView.contents.target,console.log("Target: ",t),t.on("wheel",this.wheelHandler),this._isStart=!0)}stop(){this.scrollBarView.contents.target.off("wheel",this.wheelHandler),this._isStart=!1}scroll(t){var e=this.scrollBarView.contents.target,i=this.scrollBarView.contents.mask,s=this.scrollBarView.isHorizontal,t=p.getPosition(e,s)+t;c.clampTargetPosition(e,i,t,s),this.emit("update_target_position"),this.scrollBarView.scrollBarEventEmitter.emit("stop_inertial_tween")}}class u extends r.bkB{constructor(t,e,i){super(),this.container=i,this.target=t,this.mask=e,u.init(this)}static init(e){e.target.mask!==e.mask&&(e.target.mask=e.mask);var t=t=>{t.parent!==e.container&&(t.parent?.removeChild(t),e.container.addChild(t))};t(e.target),t(e.mask),e.target.hitArea&&console.warn("Setting a custom hit area on scrollbar contents can lead to a mismatch between the visual area and the interactive area, potentially causing unexpected pointer interactions. Therefore, it is recommended not to set a custom hit area on scrollbar contents. / カスタムヒットエリアがスクロールバーコンテンツに設定されていると、視覚的エリアと操作エリアが一致せず、予期しないポインター操作を引き起こす可能性があります。そのため、スクロールバーコンテンツにはカスタムヒットエリアを設定しないことを推奨します。")}getScrollPositionAsRate(t){var e=p.getPosition;return(e(this.mask,t)-e(this.target,t))/this.getMovableRange(t)*n.MAX_RATE}getMovableRange(t){var e=p.getSize,e=e(this.target,t)-e(this.mask,t);return e<=0?1e-128:e}scroll(t,e){t=(0,p.getPosition)(this.mask,e)-this.getMovableRange(e)*(t/n.MAX_RATE);p.setPosition(this.target,e,t)}getDisplayRate(t){var e=p.getSize,i=e(this.target,t),e=e(this.mask,t);return p.clamp(e/i,n.MAX_RATE,0)}dispose(){this.removeAllListeners()}}class d extends n{get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=t,this.updateSliderVisible()}constructor(t,e){super(t),this._autoHide=!1,this.scrollBarEventEmitter=new r.bkB,this.updateContentsPosition=t=>{this.updateContentsPositionWithRate(t.rate)},this.contents=e,this.contents.on("changed_contents_size",this.updateSlider),this.sliderEventEmitter.on("slider_change",this.updateContentsPosition),this.changeRate(this.rate),this.wheelManager=new l(this),this.wheelManager.on("update_target_position",()=>{this.updateSliderPosition()}),this.inertialManager=new h(this),this.inertialManager.on("update_target_position",()=>{this.updateSliderPosition()})}limitSliderButtonPosition(t){var t=p.getPointerLocalPosition(this,this.isHorizontal,this.dragStartPos,t),e=this.getRangeOfSliderButtonPosition();return p.clamp(t,e.max,e.min)}convertRateToPixel(t){var e=this.getRangeOfSliderButtonPosition();return p.convertRateToPixel(t,e.max,e.min)}convertPixelToRate(t){var e=this.getRangeOfSliderButtonPosition();return p.convertPixelToRate(t,e.max,e.min)}getRangeOfSliderButtonPosition(){var t=this.slideButtonSize,e=c.getRatioOfOrigin(this._slideButton,this.isHorizontal);return{max:this._maxPosition-(1+e)*t,min:this._minPosition-e*t}}get slideButtonSize(){return this.updateSliderSize(),p.getSize(this._slideButton,this.isHorizontal)}updateSlider(){this.isUpdatableSliderSize()&&(this.updateSliderSize(),this.updateSliderPosition())}updateSliderPosition(){var t=this.contents.getScrollPositionAsRate(this.isHorizontal);this.changeRate(t)}isUpdatableSliderSize(){return null!=this.contents?.target&&null!=this.contents?.mask&&null!=this._slideButton}updateSliderSize(){var t;this.isUpdatableSliderSize()&&(t=(this._maxPosition-this._minPosition)*this.contents.getDisplayRate(this.isHorizontal),p.setSize(this._slideButton,this.isHorizontal,t),this.updateSliderVisible())}updateSliderVisible(){this._slideButton.visible=!this.isHidden,this._slideButton.eventMode=this.isHidden?"none":"static"}get isHidden(){return!!this.autoHide&&1===this.contents.getDisplayRate(this.isHorizontal)}updateContentsPositionWithRate(t){this.contents.scroll(t,this.isHorizontal)}onPressedSliderButton(t){super.onPressedSliderButton(t),this.scrollBarEventEmitter.emit("stop_inertial_tween")}onMoveSlider(t){super.onMoveSlider(t),this.scrollBarEventEmitter.emit("stop_inertial_tween")}onPressBase(t){this.isHidden||(super.onPressBase(t),this.scrollBarEventEmitter.emit("stop_inertial_tween"))}onDisposeFunction(t){this.contents.dispose(),super.onDisposeFunction(t)}}class c{static getClampedTargetPosition(t,e,i){var s=p.getSize,r=s(t,i),s=s(e,i),e=Math.min(-r+s,0),r=p.getPosition(t,i);return p.clamp(r,0,e)}static clampTargetPosition(t,e,i,s){p.setPosition(t,s,i);i=this.getClampedTargetPosition(t,e,s);p.setPosition(t,s,i)}static getRatioOfOrigin(t,e){var i=p.getContentsBounds(t),s=e?i.width:i.height,e=(e?i.x:i.y)/s;return 0<e&&console.warn(t.label+" : ボタンサイズが不適切です。ボタンの矩形内に原点が収まっていません。スクロールバーボタンは原点を囲む矩形としてください。"),e}}class p{static convertPixelToRate(t,e,i){return e<=i?0:(t=(t-i)/(e-i)*n.MAX_RATE,p.clamp(t,n.MAX_RATE,0))}static convertRateToPixel(t,e,i){t=(e-i)*t/n.MAX_RATE+i;return p.clamp(t,e,i)}static getPosition(t,e){return e?t.x:t.y}static getPointerEventPosition(t,e){return t instanceof r.AjL?p.getPosition(t.global,e):p.getPosition(new r.bRX(t.offsetX,t.offsetY),e)}static setPosition(t,e,i){t&&(e?t.x=i:t.y=i)}static getSize(t,e){var i=p.getContentsBounds(t);return e?i.width*t.scale.x:i.height*t.scale.y}static setSize(t,e,i){var s=p.getContentsBounds(t);e?t.scale.x=i/s.width:t.scale.y=i/s.height}static clamp(t,e,i){return t=Math.max(t,i),t=Math.min(t,e)}static getContentsBounds(t){return t.boundsArea||t.hitArea||t.getLocalBounds()}static getRootContainer(t,e){if(t)return t;let i=e.parent;for(;i.parent;)i=i.parent;return i}static addChildParts(t,e){e&&(e.parent?.removeChild(e),t.addChild(e))}static getPointerLocalPosition(t,e,i,s){t=s instanceof r.AjL?t.toLocal(s.global):t.toLocal(new r.bRX(s.offsetX,s.offsetY));return e?t.x-i.x:t.y-i.y}static toggleEventListener(t,e,i,s){e instanceof HTMLCanvasElement?e[t?"addEventListener":"removeEventListener"](i,s):e[t?"on":"off"](i,s)}static addEventListenerToTarget(t,e,i){this.toggleEventListener(!0,t,e,i)}static removeEventListenerFromTarget(t,e,i){this.toggleEventListener(!1,t,e,i)}}},2287:(t,e,i)=>{"use strict";let c;class s{constructor(t,e){this.init(t,e)}init(t,e){this.destination=t,this.source=e||t}connect(t){this.source?.connect(t)}disconnect(){this.source?.disconnect()}destroy(){this.disconnect(),this.destination=null,this.source=null}}class p{static setParamValue(t,e){var i;return t.setValueAtTime?(i=c.context,t.setValueAtTime(e,i.audioContext.currentTime)):t.value=e,e}}const f=class extends s{constructor(t=0,e=0,i=0,s=0,r=0,n=0,a=0,o=0,h=0,l=0){let u=[];t=[{f:f.F32,type:"lowshelf",gain:t},{f:f.F64,type:"peaking",gain:e},{f:f.F125,type:"peaking",gain:i},{f:f.F250,type:"peaking",gain:s},{f:f.F500,type:"peaking",gain:r},{f:f.F1K,type:"peaking",gain:n},{f:f.F2K,type:"peaking",gain:a},{f:f.F4K,type:"peaking",gain:o},{f:f.F8K,type:"peaking",gain:h},{f:f.F16K,type:"highshelf",gain:l}];super((u=c.useLegacy?u:t.map(t=>{var e=c.context.audioContext.createBiquadFilter();return e.type=t.type,p.setParamValue(e.Q,1),e.frequency.value=t.f,p.setParamValue(e.gain,t.gain),e}))[0],u[u.length-1]),this.bands=u,this.bandsMap={};for(let t=0;t<this.bands.length;t++){var d=this.bands[t];0<t&&this.bands[t-1].connect(d),this.bandsMap[d.frequency.value]=d}}setGain(t,e=0){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);p.setParamValue(this.bandsMap[t].gain,e)}getGain(t){if(this.bandsMap[t])return this.bandsMap[t].gain.value;throw new Error("No band found for frequency "+t)}set f32(t){this.setGain(f.F32,t)}get f32(){return this.getGain(f.F32)}set f64(t){this.setGain(f.F64,t)}get f64(){return this.getGain(f.F64)}set f125(t){this.setGain(f.F125,t)}get f125(){return this.getGain(f.F125)}set f250(t){this.setGain(f.F250,t)}get f250(){return this.getGain(f.F250)}set f500(t){this.setGain(f.F500,t)}get f500(){return this.getGain(f.F500)}set f1k(t){this.setGain(f.F1K,t)}get f1k(){return this.getGain(f.F1K)}set f2k(t){this.setGain(f.F2K,t)}get f2k(){return this.getGain(f.F2K)}set f4k(t){this.setGain(f.F4K,t)}get f4k(){return this.getGain(f.F4K)}set f8k(t){this.setGain(f.F8K,t)}get f8k(){return this.getGain(f.F8K)}set f16k(t){this.setGain(f.F16K,t)}get f16k(){return this.getGain(f.F16K)}reset(){this.bands.forEach(t=>{p.setParamValue(t.gain,0)})}destroy(){this.bands.forEach(t=>{t.disconnect()}),this.bands=null,this.bandsMap=null}};var r=f;r.F32=32,r.F64=64,r.F125=125,r.F250=250,r.F500=500,r.F1K=1e3,r.F2K=2e3,r.F4K=4e3,r.F8K=8e3,r.F16K=16e3;var o=i(5640);class n extends o.bkB{constructor(){super(...arguments),this.speed=1,this.muted=!1,this.volume=1,this.paused=!1}refresh(){this.emit("refresh")}refreshPaused(){this.emit("refreshPaused")}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}get audioContext(){return console.warn("HTML Audio does not support audioContext"),null}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this.paused}destroy(){this.removeAllListeners()}}let a=0;const h=class extends o.bkB{constructor(t){super(),this.id=a++,this.init(t)}set(t,e){if(void 0===this[t])throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"paused":this.paused=e;break;case"loop":this.loop=e;break;case"muted":this.muted=e}return this}get progress(){var t=this._source["currentTime"];return t/this._duration}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}_onPlay(){this._playing=!0}_onPause(){this._playing=!1}init(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t}_internalStop(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())}stop(){this._internalStop(),this._source&&this.emit("stop")}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}refresh(){var t=this._media.context,e=this._media.parent,i=(this._source.loop=this._loop||e.loop,t.volume*(t.muted?0:1)),s=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);this._source.volume=r*i*s,this._source.playbackRate=this._speed*t.speed*e.speed}refreshPaused(){var t=this._media.context,e=this._media.parent,e=this._paused||e.paused||t.paused;e!==this._pausedReal&&((this._pausedReal=e)?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",e))}play(t){const{start:e,end:i,speed:s,loop:r,volume:n,muted:a}=t;i&&console.assert(i>e,"End time is before start time"),this._speed=s,this._volume=n,this._loop=!!r,this._muted=a,this.refresh(),this.loop&&null!==i&&(console.warn('Looping not support when specifying an "end" time'),this.loop=!1),this._start=e,this._end=i||this._duration,this._start=Math.max(0,this._start-h.PADDING),this._end=Math.min(this._end+h.PADDING,this._duration),this._source.onloadedmetadata=()=>{this._source&&(this._source.currentTime=e,this._source.onloadedmetadata=null,this.emit("progress",e,this._duration),o.RvI.shared.add(this._onUpdate,this))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")}_onUpdate(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()}_onComplete(){o.RvI.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)}destroy(){o.RvI.shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)}toString(){return`[HTMLAudioInstance id=${this.id}]`}};let l=h;l.PADDING=.1;class u extends o.bkB{init(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)}create(){return new l(this)}get isPlayable(){return!!this._source&&4===this._source.readyState}get duration(){return this._source.duration}get context(){return this.parent.context}get filters(){return null}set filters(t){console.warn("HTML Audio does not support filters")}destroy(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)}get source(){return this._source}load(e){const i=this._source,s=this.parent;if(4===i.readyState){s.isLoaded=!0;const o=s.autoPlayStart();return void(e&&setTimeout(()=>{e(null,s,o)},0))}if(!s.url)return void e(new Error("sound.url or sound.source must be set"));i.src=s.url;const t=()=>{a(),s.isLoaded=!0;var t=s.autoPlayStart();e&&e(null,s,t)},r=()=>{a(),e&&e(new Error("Sound loading has been aborted"))},n=()=>{a();var t=`Failed to load audio element (code: ${i.error.code})`;e?e(new Error(t)):console.error(t)},a=()=>{i.removeEventListener("canplaythrough",t),i.removeEventListener("load",t),i.removeEventListener("abort",r),i.removeEventListener("error",n)};i.addEventListener("canplaythrough",t,!1),i.addEventListener("load",t,!1),i.addEventListener("abort",r,!1),i.addEventListener("error",n,!1),i.load()}}class d{constructor(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start,console.assert(0<this.duration,"End time must be after start time")}play(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})}destroy(){this.parent=null}}const g=["ogg","oga","opus","m4a","mp3","mpeg","wav","aiff","wma","mid","caf"],m=["audio/mpeg","audio/ogg"],y={};{const k={m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"',...(r=void 0)||{}},T=document.createElement("audio"),E={},I=/^no$/;g.forEach(t=>{var e=T.canPlayType("audio/"+t).replace(I,""),i=k[t]?T.canPlayType(k[t]).replace(I,""):"";E[t]=!!e||!!i}),Object.assign(y,E)}let _=0;class v extends o.bkB{constructor(t){super(),this.id=_++,this._media=null,this._paused=!1,this._muted=!1,this._elapsed=0,this.init(t)}set(t,e){if(void 0===this[t])throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"muted":this.muted=e;break;case"loop":this.loop=e;break;case"paused":this.paused=e}return this}stop(){this._source&&(this._internalStop(),this.emit("stop"))}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh(),this._update(!0)}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get filters(){return this._filters}set filters(t){this._filters&&(this._filters?.filter(t=>t).forEach(t=>t.disconnect()),this._filters=null,this._source.connect(this._gain)),this._filters=t?.length?t.slice(0):null,this.refresh()}refresh(){var t,e,i,s,r;this._source&&(t=this._media.context,e=this._media.parent,this._source.loop=this._loop||e.loop,i=t.volume*(t.muted?0:1),s=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1),p.setParamValue(this._gain.gain,r*s*i),p.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed),this.applyFilters())}applyFilters(){if(this._filters?.length){this._source.disconnect();let e=this._source;this._filters.forEach(t=>{e.connect(t.destination),e=t}),e.connect(this._gain)}}refreshPaused(){var t=this._media.context,e=this._media.parent,e=this._paused||e.paused||t.paused;e!==this._pausedReal&&((this._pausedReal=e)?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",e))}play(t){var{start:t,end:e,speed:i,loop:s,volume:r,muted:n,filters:a}=t,{source:o,gain:h}=(e&&console.assert(t<e,"End time is before start time"),this._paused=!1,this._media.nodes.cloneBufferSource()),o=(this._source=o,this._gain=h,this._speed=i,this._volume=r,this._loop=!!s,this._muted=n,this._filters=a,this.refresh(),this._source.buffer.duration);this._duration=o,this._end=e,this._lastUpdate=this._now(),this._elapsed=t,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=e,this._source.loopStart=t,this._source.start(0,t)):e?this._source.start(0,t,e-t):this._source.start(0,t),this.emit("start"),this._update(!0),this.enableTicker(!0)}enableTicker(t){o.RvI.shared.remove(this._updateListener,this),t&&o.RvI.shared.add(this._updateListener,this)}get progress(){return this._progress}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}destroy(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._filters?.forEach(t=>t.disconnect()),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1}toString(){return`[WebAudioInstance id=${this.id}]`}_now(){return this._media.context.audioContext.currentTime}_updateListener(){this._update()}_update(e=!1){if(this._source){var i=this._now(),s=i-this._lastUpdate;if(0<s||e){var e=this._source.playbackRate.value,s=(this._elapsed+=s*e,this._lastUpdate=i,this._duration);let t;t=this._source.loopStart?(e=this._source.loopEnd-this._source.loopStart,(this._source.loopStart+this._elapsed%e)/s):this._elapsed%s/s,this._progress=t,this.emit("progress",this._progress,s)}}}init(t){(this._media=t).context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)}_internalStop(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null}}_onComplete(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)}}class x{constructor(t,e){this._output=e,this._input=t}get destination(){return this._input}get filters(){return this._filters}set filters(t){if(this._filters&&(this._filters.forEach(t=>{t&&t.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();let e=null;t.forEach(t=>{(null===e?this._input:e).connect(t.destination),e=t}),e.connect(this._output)}}destroy(){this.filters=null,this._input=null,this._output=null}}const w=class extends x{constructor(t){var e=t.audioContext,i=e.createBufferSource(),s=e.createGain(),e=e.createAnalyser();i.connect(e),e.connect(s),s.connect(t.destination),super(e,s),this.context=t,this.bufferSource=i,this.gain=s,this.analyser=e}get script(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(w.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script}destroy(){super.destroy(),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null}cloneBufferSource(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource(),t=(e.buffer=t.buffer,p.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop,this.context.audioContext.createGain());return e.connect(t),t.connect(this.destination),{source:e,gain:t}}get bufferSize(){return this.script.bufferSize}};let b=w;b.BUFFER_SIZE=0;class A{init(t){this.parent=t,this._nodes=new b(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source}destroy(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null,this.source=null}create(){return new v(this)}get context(){return this.parent.context}get isPlayable(){return!!this._source&&!!this._source.buffer}get filters(){return this._nodes.filters}set filters(t){this._nodes.filters=t}get duration(){return console.assert(this.isPlayable,"Sound not yet playable, no duration"),this._source.buffer.duration}get buffer(){return this._source.buffer}set buffer(t){this._source.buffer=t}get nodes(){return this._nodes}load(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t?t(new Error("sound.url or sound.source must be set")):console.error("sound.url or sound.source must be set")}async _loadUrl(t){var e=this.parent.url,e=await o.eBH.get().fetch(e);this._decode(await e.arrayBuffer(),t)}_decode(t,i){var e=(t,e)=>{t?i&&i(t):(this.parent.isLoaded=!0,this.buffer=e,t=this.parent.autoPlayStart(),i&&i(null,this.parent,t))};t instanceof AudioBuffer?e(null,t):this.parent.context.decode(t,e)}}const S=class{static from(t){let e={};"string"==typeof t?e.url=t:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?e.source=t:Array.isArray(t)?e.url=t:e=t,e={autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,...e},Object.freeze(e);t=new(c.useLegacy?u:A);return new S(t,e)}constructor(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);t=e.complete;this._autoPlayOptions=t?{complete:t}:null,this.isLoaded=!1,this._preloadQueue=null,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=Array.isArray(e.url)?this.preferUrl(e.url):e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}preferUrl(t){var[t]=t.map(t=>({url:t,ext:o.AeT.extname(t).slice(1)})).filter(({ext:t})=>y[t]).sort((t,e)=>g.indexOf(t.ext)-g.indexOf(e.ext));if(t)return t.url;throw new Error("No supported file type found")}get context(){return c.context}pause(){return this.isPlaying=!1,this.paused=!0,this}resume(){return this.isPlaying=0<this._instances.length,this.paused=!1,this}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get filters(){return this.media.filters}set filters(t){this.media.filters=t}addSprites(t,e){if("object"==typeof t){var i={};for(const s in t)i[s]=this.addSprites(s,t[s]);return i}console.assert(!this._sprites[t],`Alias ${t} is already taken`);e=new d(this,e);return this._sprites[t]=e}destroy(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null}removeSprites(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(const i in this._sprites)this.removeSprites(i);return this}get isPlayable(){return this.isLoaded&&this.media&&this.media.isPlayable}stop(){if(this.isPlayable){this.isPlaying=!1;for(let t=this._instances.length-1;0<=t;t--)this._instances[t].stop()}else this.autoPlay=!1,this._autoPlayOptions=null;return this}play(t,e){let n;if("string"==typeof t?n={sprite:t,loop:this.loop,complete:e}:"function"==typeof t?(n={}).complete=t:n=t,(n={complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1,...n||{}}).sprite&&(e=n.sprite,console.assert(!!this._sprites[e],`Alias ${e} is not available`),t=this._sprites[e],n.start=t.start+(n.start||0),n.end=t.end,n.speed=t.speed||1,n.loop=t.loop||n.loop,delete n.sprite),n.offset&&(n.start=n.offset),!this.isLoaded)return this._preloadQueue?new Promise(t=>{this._preloadQueue.push(()=>{t(this.play(n))})}):(this._preloadQueue=[],this.autoPlay=!0,this._autoPlayOptions=n,new Promise((s,r)=>{this._preload((t,e,i)=>{this._preloadQueue.forEach(t=>t()),this._preloadQueue=null,t?r(t):(n.loaded&&n.loaded(t,e,i),s(i))})}));(this.singleInstance||n.singleInstance)&&this._removeInstances();const i=this._createInstance();return this._instances.push(i),this.isPlaying=!0,i.once("end",()=>{n.complete&&n.complete(this),this._onComplete(i)}),i.once("stop",()=>{this._onComplete(i)}),i.play(n),i}refresh(){var e=this._instances.length;for(let t=0;t<e;t++)this._instances[t].refresh()}refreshPaused(){var e=this._instances.length;for(let t=0;t<e;t++)this._instances[t].refreshPaused()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}_preload(t){this.media.load(t)}get instances(){return this._instances}get sprites(){return this._sprites}get duration(){return this.media.duration}autoPlayStart(){let t;return t=this.autoPlay?this.play(this._autoPlayOptions):t}_removeInstances(){for(let t=this._instances.length-1;0<=t;t--)this._poolInstance(this._instances[t]);this._instances.length=0}_onComplete(t){var e;this._instances&&(-1<(e=this._instances.indexOf(t))&&this._instances.splice(e,1),this.isPlaying=0<this._instances.length),this._poolInstance(t)}_createInstance(){var t;return 0<S._pool.length?((t=S._pool.pop()).init(this.media),t):this.media.create()}_poolInstance(t){t.destroy(),S._pool.indexOf(t)<0&&S._pool.push(t)}};let P=S;P._pool=[];class M extends x{constructor(){var t=window,e=new M.AudioContext,i=e.createDynamicsCompressor(),s=e.createAnalyser();s.connect(i),i.connect(e.destination),super(s,i),this.autoPause=!0,this._ctx=e,this._offlineCtx=new M.OfflineAudioContext(1,2,t.OfflineAudioContext?Math.max(8e3,Math.min(96e3,e.sampleRate)):44100),this.compressor=i,this.analyser=s,this.events=new o.bkB,this.volume=1,this.speed=1,this.muted=!1,this.paused=!1,this._locked="suspended"===e.state&&("ontouchstart"in globalThis||"onclick"in globalThis),this._locked&&(this._unlock(),this._unlock=this._unlock.bind(this),document.addEventListener("mousedown",this._unlock,!0),document.addEventListener("touchstart",this._unlock,!0),document.addEventListener("touchend",this._unlock,!0)),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),globalThis.addEventListener("focus",this.onFocus),globalThis.addEventListener("blur",this.onBlur)}onFocus(){var t;!this.autoPause||"suspended"!==(t=this._ctx.state)&&"interrupted"!==t&&this._locked||(this.paused=this._pausedOnBlur,this.refreshPaused())}onBlur(){!this.autoPause||this._locked||(this._pausedOnBlur=this._paused,this.paused=!0,this.refreshPaused())}_unlock(){this._locked&&(this.playEmptySound(),"running"===this._ctx.state)&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._locked=!1)}playEmptySound(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()}static get AudioContext(){var t=window;return t.AudioContext||t.webkitAudioContext||null}static get OfflineAudioContext(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null}destroy(){super.destroy();var t=this._ctx;void 0!==t.close&&t.close(),globalThis.removeEventListener("focus",this.onFocus),globalThis.removeEventListener("blur",this.onBlur),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null}get audioContext(){return this._ctx}get offlineContext(){return this._offlineCtx}set paused(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t}get paused(){return this._paused}refresh(){this.events.emit("refresh")}refreshPaused(){this.events.emit("refreshPaused")}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this._paused}decode(t,e){var i=t=>{e(new Error(t?.message||"Unable to decode file"))},t=this._offlineCtx.decodeAudioData(t,t=>{e(null,t)},i);t&&t.catch(i)}}const C=t=>{var e=t.src;let i=t?.alias?.[0];return i=i&&t.src!==i?i:o.AeT.basename(e,o.AeT.extname(e))};i={extension:o.AgS.Asset,detection:{test:async()=>!0,add:async t=>[...t,...g.filter(t=>y[t])],remove:async e=>e.filter(t=>e.includes(t))},loader:{name:"sound",extension:{type:[o.AgS.LoadParser],priority:o.T9C.High},test(e){var t=o.AeT.extname(e).slice(1);return!!y[t]||m.some(t=>e.startsWith("data:"+t))},async load(t,r){var e=await new Promise((i,s)=>P.from({...r.data,url:t,preload:!0,loaded(t,e){t?s(t):i(e),r.data?.loaded?.(t,e)}}));return c.add(C(r),e),e},async unload(t,e){c.remove(C(e))}}};o.XOh.add(i),r=new class{constructor(){this.init()}init(){return this.supported&&(this._webAudioContext=new M),this._htmlAudioContext=new n,this._sounds={},this.useLegacy=!this.supported,this}get context(){return this._context}get filtersAll(){return this.useLegacy?[]:this._context.filters}set filtersAll(t){this.useLegacy||(this._context.filters=t)}get supported(){return null!==M.AudioContext}add(t,e){if("object"==typeof t){var i={};for(const n in t){var s=this._getOptions(t[n],e);i[n]=this.add(n,s)}return i}var r;return console.assert(!this._sounds[t],`Sound with alias ${t} already exists.`),e instanceof P?this._sounds[t]=e:(r=this._getOptions(e),r=P.from(r),this._sounds[t]=r)}_getOptions(t,e){let i;return i={...i="string"==typeof t||Array.isArray(t)?{url:t}:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?{source:t}:t,...e||{}}}get useLegacy(){return this._useLegacy}set useLegacy(t){this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext}get disableAutoPause(){return!this._webAudioContext.autoPause}set disableAutoPause(t){this._webAudioContext.autoPause=!t}remove(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this}get volumeAll(){return this._context.volume}set volumeAll(t){this._context.volume=t,this._context.refresh()}get speedAll(){return this._context.speed}set speedAll(t){this._context.speed=t,this._context.refresh()}togglePauseAll(){return this._context.togglePause()}pauseAll(){return this._context.paused=!0,this._context.refreshPaused(),this}resumeAll(){return this._context.paused=!1,this._context.refreshPaused(),this}toggleMuteAll(){return this._context.toggleMute()}muteAll(){return this._context.muted=!0,this._context.refresh(),this}unmuteAll(){return this._context.muted=!1,this._context.refresh(),this}removeAll(){for(const t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this}stopAll(){for(const t in this._sounds)this._sounds[t].stop();return this}exists(t,e=!1){var i=!!this._sounds[t];return e&&console.assert(i,`No sound matching alias '${t}'.`),i}isPlaying(){for(const t in this._sounds)if(this._sounds[t].isPlaying)return!0;return!1}find(t){return this.exists(t,!0),this._sounds[t]}play(t,e){return this.find(t).play(e)}stop(t){return this.find(t).stop()}pause(t){return this.find(t).pause()}resume(t){return this.find(t).resume()}volume(t,e){t=this.find(t);return void 0!==e&&(t.volume=e),t.volume}speed(t,e){t=this.find(t);return void 0!==e&&(t.speed=e),t.speed}duration(t){return this.find(t).duration}close(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this}},c=r},40:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>_,GS:()=>s,K:()=>d});function o(){return performance.now()}var s=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(t){return 1===t?1:t*t*(2.70158*t-1.70158)},Out:function(t){return 0===t?0:--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-s.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*s.Bounce.In(2*t):.5*s.Bounce.Out(2*t-1)+.5}}),generatePow:function(e){return e=1e4<(e=(e=void 0===e?4:e)<Number.EPSILON?Number.EPSILON:e)?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(2*t,e)/2:(1-Math.pow(2-2*t,e))/2+.5}}}}),i=(r.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},r.prototype.removeAll=function(){this._tweens={}},r.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},r.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},r.prototype.update=function(t,e){void 0===t&&(t=o()),void 0===e&&(e=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(;0<i.length;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var r=this._tweens[i[s]];r&&!1===r.update(t,!e)&&!e&&delete this._tweens[i[s]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},r);function r(){this._tweens={},this._tweensAddedDuringUpdate={}}var n,h={Linear:function(t,e){var i=t.length-1,s=i*e,r=Math.floor(s),n=h.Utils.Linear;return e<0?n(t[0],t[1],s):1<e?n(t[i],t[i-1],i-s):n(t[r],t[i<r+1?i:r+1],s-r)},Bezier:function(t,e){for(var i=0,s=t.length-1,r=Math.pow,n=h.Utils.Bernstein,a=0;a<=s;a++)i+=r(1-e,s-a)*r(e,a)*t[a]*n(s,a);return i},CatmullRom:function(t,e){var i=t.length-1,s=i*e,r=Math.floor(s),n=h.Utils.CatmullRom;return t[0]===t[i]?n(t[((r=e<0?Math.floor(s=i*(1+e)):r)-1+i)%i],t[r],t[(r+1)%i],t[(r+2)%i],s-r):e<0?t[0]-(n(t[0],t[0],t[1],t[1],-s)-t[0]):1<e?t[i]-(n(t[i],t[i],t[i-1],t[i-1],s-i)-t[i]):n(t[r?r-1:0],t[r],t[i<r+1?i:r+1],t[i<r+2?i:r+2],s-r)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=h.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(n=[1],function(t){var e=1;if(n[t])return n[t];for(var i=t;1<i;i--)e*=i;return n[t]=e}),CatmullRom:function(t,e,i,s,r){var t=.5*(i-t),s=.5*(s-e),n=r*r;return(2*e-2*i+t+s)*(r*n)+(-3*e+3*i-2*t-s)*n+t*r+e}}},a=(l.nextId=function(){return l._nextId++},l._nextId=0,l);function l(){}var u=new i,d=(c.prototype.getId=function(){return this._id},c.prototype.isPlaying=function(){return this._isPlaying},c.prototype.isPaused=function(){return this._isPaused},c.prototype.getDuration=function(){return this._duration},c.prototype.to=function(t,e){if(void 0===e&&(e=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=e<0?0:e,this},c.prototype.duration=function(t){return this._duration=(t=void 0===t?1e3:t)<0?0:t,this},c.prototype.dynamic=function(t){return this._isDynamic=t=void 0===t?!1:t,this},c.prototype.start=function(t,e){if(void 0===t&&(t=o()),void 0===e&&(e=!1),!this._isPlaying){if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var i in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||e){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s,r={};for(s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,e)}}return this},c.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},c.prototype._setupProperties=function(t,e,i,s,r){for(var n in i){var a=t[n],o=Array.isArray(a),h=o?"array":typeof a,l=!o&&Array.isArray(i[n]);if("undefined"!=h&&"function"!=h){if(l){if(0===(g=i[n]).length)continue;for(var u=[a],d=0,c=g.length;d<c;d+=1){var p=this._handleRelativeValue(a,g[d]);if(isNaN(p)){l=!1,console.warn("Found invalid interpolation list. Skipping.");break}u.push(p)}l&&(i[n]=u)}if("object"!=h&&!o||!a||l)void 0!==e[n]&&!r||(e[n]=a),o||(e[n]*=1),s[n]=l?i[n].slice().reverse():e[n]||0;else{e[n]=o?[]:{};var f=a;for(m in f)e[n][m]=f[m];s[n]=o?[]:{};var g=i[n];if(!this._isDynamic){var m,y={};for(m in g)y[m]=g[m];i[n]=g=y}this._setupProperties(f,e[n],g,s[n],r)}}}},c.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying&&(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback)&&this._onStopCallback(this._object),this},c.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},c.prototype.pause=function(t){return void 0===t&&(t=o()),!this._isPaused&&this._isPlaying&&(this._isPaused=!0,this._pauseStart=t,this._group)&&this._group.remove(this),this},c.prototype.resume=function(t){return void 0===t&&(t=o()),this._isPaused&&this._isPlaying&&(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group)&&this._group.add(this),this},c.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},c.prototype.group=function(t){return this._group=t=void 0===t?u:t,this},c.prototype.delay=function(t){return this._delayTime=t=void 0===t?0:t,this},c.prototype.repeat=function(t){return this._initialRepeat=t=void 0===t?0:t,this._repeat=t,this},c.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},c.prototype.yoyo=function(t){return this._yoyo=t=void 0===t?!1:t,this},c.prototype.easing=function(t){return void 0===t&&(t=s.Linear.None),this._easingFunction=t,this},c.prototype.interpolation=function(t){return void 0===t&&(t=h.Linear),this._interpolationFunction=t,this},c.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},c.prototype.onStart=function(t){return this._onStartCallback=t,this},c.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},c.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},c.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},c.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},c.prototype.onStop=function(t){return this._onStopCallback=t,this},c.prototype.update=function(t,e){if(void 0===t&&(t=o()),void 0===e&&(e=!0),this._isPaused)return!0;var i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(i<t)return!1;e&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var i=t-this._startTime,t=this._duration+(null!=(e=this._repeatDelayTime)?e:this._delayTime),e=this._duration+this._repeat*t,e=this._calculateElapsedPortion(i,t,e),s=this._easingFunction(e),r=this._calculateCompletionStatus(i,t);if("repeat"===r&&this._processRepetition(i,t),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,s),"about-to-repeat"===r&&this._processRepetition(i,t),this._onUpdateCallback&&this._onUpdateCallback(this._object,e),"repeat"===r||"about-to-repeat"===r)this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if("completed"===r){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var n=0,a=this._chainedTweens.length;n<a;n++)this._chainedTweens[n].start(this._startTime+this._duration,!1)}return"completed"!==r},c.prototype._calculateElapsedPortion=function(t,e,i){return 0===this._duration||i<t||0===(i=Math.min(t%e/this._duration,1))&&0!==t&&t%this._duration==0?1:i},c.prototype._calculateCompletionStatus=function(t,e){return 0!==this._duration&&t<this._duration?"playing":this._repeat<=0?"completed":t===this._duration?"about-to-repeat":"repeat"},c.prototype._processRepetition=function(t,e){var i,t=Math.min(Math.trunc((t-this._duration)/e)+1,this._repeat);for(i in isFinite(this._repeat)&&(this._repeat-=t),this._valuesStartRepeat){var s=this._valuesEnd[i];this._yoyo||"string"!=typeof s||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(s)),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=e*t},c.prototype._updateProperties=function(t,e,i,s){for(var r in i){var n,a,o,h;void 0!==e[r]&&(n=e[r]||0,a=i[r],o=Array.isArray(t[r]),h=Array.isArray(a),!o&&h?t[r]=this._interpolationFunction(a,s):"object"==typeof a&&a?this._updateProperties(t[r],n,a,s):"number"==typeof(a=this._handleRelativeValue(n,a))&&(t[r]=n+(a-n)*s))}},c.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},c.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],i=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof i?this._valuesStartRepeat[t]+parseFloat(i):this._valuesEnd[t],this._valuesEnd[t]=e},c);function c(t,e){void 0===e&&(e=u),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=s.Linear.None,this._interpolationFunction=h.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=a.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}var e=a.nextId,p=u,f=p.getAll.bind(p),g=p.removeAll.bind(p),m=p.add.bind(p),y=p.remove.bind(p),p=p.update.bind(p),_={Easing:s,Group:i,Interpolation:h,now:o,Sequence:a,nextId:e,Tween:d,VERSION:"23.1.2",getAll:f,removeAll:g,add:m,remove:y,update:p}},4486:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});const s=i(228)},4493:(H,t,e)=>{"use strict";e.d(t,{LM:()=>F});var h=e(5640);class i{constructor(t){this.parent=t,this.paused=!1}destroy(){}down(t){return!1}move(t){return!1}up(t){return!1}wheel(t){return!1}update(t){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n,e={exports:{}};n=e,function(){var r={linear:function(t,e,i,s){return i*t/s+e},easeInQuad:function(t,e,i,s){return i*(t/=s)*t+e},easeOutQuad:function(t,e,i,s){return-i*(t/=s)*(t-2)+e},easeInOutQuad:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,s){return i*(t/=s)*t*t+e},easeOutCubic:function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,s){return i*(t/=s)*t*t*t+e},easeOutQuart:function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,s){return i*(t/=s)*t*t*t*t+e},easeOutQuint:function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e},easeInOutSine:function(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e},easeInExpo:function(t,e,i,s){return 0===t?e:i*Math.pow(2,10*(t/s-1))+e},easeOutExpo:function(t,e,i,s){return t===s?e+i:i*(1-Math.pow(2,-10*t/s))+e},easeInOutExpo:function(t,e,i,s){return(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,s){return-i*(Math.sqrt(1-(t/=s)*t)-1)+e},easeOutCirc:function(t,e,i,s){return i*Math.sqrt(1-(t=t/s-1)*t)+e},easeInOutCirc:function(t,e,i,s){return(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,s){var r=1.70158,n=0,a=i;return 0!==t&&(t/=s),n=n||.3*s,r=a<Math.abs(i)?(a=i,n/4):n/(2*Math.PI)*Math.asin(i/a),-(a*Math.pow(2,10*--t)*Math.sin((t*s-r)*(2*Math.PI)/n))+e},easeOutElastic:function(t,e,i,s){var r=1.70158,n=0,a=i;return 0!==t&&(t/=s),n=n||.3*s,r=a<Math.abs(i)?(a=i,n/4):n/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*t)*Math.sin((t*s-r)*(2*Math.PI)/n)+i+e},easeInOutElastic:function(t,e,i,s){var r=1.70158,n=0,a=i;return 0!==t&&(t/=s/2),n=n||s*(.3*1.5),r=a<Math.abs(i)?(a=i,n/4):n/(2*Math.PI)*Math.asin(i/a),t<1?a*Math.pow(2,10*--t)*Math.sin((t*s-r)*(2*Math.PI)/n)*-.5+e:a*Math.pow(2,-10*--t)*Math.sin((t*s-r)*(2*Math.PI)/n)*.5+i+e},easeInBack:function(t,e,i,s,r){return i*(t/=s)*t*(((r=void 0===r?1.70158:r)+1)*t-r)+e},easeOutBack:function(t,e,i,s,r){return i*((t=t/s-1)*t*(((r=void 0===r?1.70158:r)+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,s,r){return void 0===r&&(r=1.70158),(t/=s/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:function(t,e,i,s){return i-r.easeOutBounce(s-t,0,i,s)+e},easeOutBounce:function(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,i,s){return t<s/2?.5*r.easeInBounce(2*t,0,i,s)+e:.5*r.easeOutBounce(2*t-s,0,i,s)+.5*i+e}},t=r;n.exports=t}.call(t);const r=s(e.exports);function a(t,e){return t?"function"==typeof t?t:"string"==typeof t?r[t]:void 0:r[e]}const o={removeOnInterrupt:!1,ease:"linear",time:1e3};class l extends i{constructor(t,e={}){super(t),this.startWidth=null,this.startHeight=null,this.deltaWidth=null,this.deltaHeight=null,this.width=null,this.height=null,this.time=0,this.options=Object.assign({},o,e),this.options.ease=a(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),null!==this.width&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),null!==this.height&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),null!==this.width&&this.parent.fitWidth(this.width,this.keepCenter,null===this.height),null!==this.height&&this.parent.fitHeight(this.height,this.keepCenter,null===this.width),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){var e,i,s,r,n,a;this.paused||(this.time+=t,t=new h.bRX(this.parent.scale.x,this.parent.scale.y),this.time>=this.options.time?(e=this.parent.width,i=this.parent.height,this.complete(),e===this.parent.width&&i===this.parent.height||this.parent.emit("zoomed",{viewport:this.parent,original:t,type:"animate"})):(e=this.options.ease(this.time,0,1,this.options.time),null!==this.width&&(i=this.startWidth,s=this.deltaWidth,this.parent.fitWidth(i+s*e,this.keepCenter,null===this.height)),null!==this.height&&(i=this.startHeight,s=this.deltaHeight,this.parent.fitHeight(i+s*e,this.keepCenter,null===this.width)),null===this.width?this.parent.scale.x=this.parent.scale.y:null===this.height&&(this.parent.scale.y=this.parent.scale.x),this.keepCenter||(i=this.startX,s=this.startY,r=this.deltaX,n=this.deltaY,a=new h.bRX(this.parent.x,this.parent.y),this.parent.moveCenter(i+r*e,s+n*e),this.parent.emit("moved",{viewport:this.parent,original:a,type:"animate"})),(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:t,type:"animate"})))}}const u={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class d extends i{constructor(t,e={}){super(t),this.options=Object.assign({},u,e),this.ease=a(this.options.ease,"easeInOutSine"),this.options.sides?"all"===this.options.sides?this.top=this.bottom=this.left=this.right=!0:"horizontal"===this.options.sides?(this.right=this.left=!0,this.top=this.bottom=!1):"vertical"===this.options.sides?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=-1!==this.options.sides.indexOf("top"),this.bottom=-1!==this.options.sides.indexOf("bottom"),this.left=-1!==this.options.sides.indexOf("left"),this.right=-1!==this.options.sides.indexOf("right")):this.left=this.top=this.right=this.bottom=!1;t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0),this.reset()}isActive(){return null!==this.toX||null!==this.toY}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(t){var e;this.paused||(this.bounce(),this.toX&&((e=this.toX).time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),e.time>=this.options.time?(this.parent.x=e.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(e.time,e.start,e.delta,this.options.time)),this.toY&&((e=this.toY).time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),e.time>=this.options.time?(this.parent.y=e.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(e.time,e.start,e.delta,this.options.time)))}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){var t,e,i,s=this.options.bounceBox;return s?(t="u"<typeof s.x?0:s.x,e="u"<typeof s.y?0:s.y,i="u"<typeof s.width?this.parent.worldWidth:s.width,s="u"<typeof s.height?this.parent.worldHeight:s.height,{left:this.parent.left<t,right:this.parent.right>i,top:this.parent.top<e,bottom:this.parent.bottom>s,topLeft:new h.bRX(t*this.parent.scale.x,e*this.parent.scale.y),bottomRight:new h.bRX(i*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}):{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new h.bRX(0,0),bottomRight:new h.bRX(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){if(!this.paused){let e,t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.x&&t.percentChangeX===(null==(i=t.options)?void 0:i.friction)||t.y&&t.percentChangeY===(null==(i=t.options)?void 0:i.friction))&&(((e=this.oob()).left&&this.left||e.right&&this.right)&&(t.percentChangeX=this.options.friction),e.top&&this.top||e.bottom&&this.bottom)&&(t.percentChangeY=this.options.friction);var i=this.parent.plugins.get("drag",!0)||{},s=this.parent.plugins.get("pinch",!0)||{};if(t=t||{},!(null!=i&&i.active||null!=s&&s.active||this.toX&&this.toY||t.x&&t.y)){i=(e=e||this.oob()).topLeft,s=e.bottomRight;if(!this.toX&&!t.x){let t=null;e.left&&this.left?t=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-i.x:e.right&&this.right&&(t=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-s.x),null!==t&&this.parent.x!==t&&(this.toX={time:0,start:this.parent.x,delta:t-this.parent.x,end:t},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!t.y){let t=null;e.top&&this.top?t=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-i.y:e.bottom&&this.bottom&&(t=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-s.y),null!==t&&this.parent.y!==t&&(this.toY={time:0,start:this.parent.y,delta:t-this.parent.y,end:t},this.parent.emit("bounce-y-start",this.parent))}}}}reset(){this.toX=this.toY=null,this.bounce()}}const c={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class p extends i{constructor(t,e={}){super(t),this.options=Object.assign({},c,e),this.options.direction&&(this.options.left="x"===this.options.direction||"all"===this.options.direction||null,this.options.right="x"===this.options.direction||"all"===this.options.direction||null,this.options.top="y"===this.options.direction||"all"===this.options.direction||null,this.options.bottom="y"===this.options.direction||"all"===this.options.direction||null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){var t=this.options.underflow.toLowerCase();"none"===t?this.noUnderflow=!0:("center"===t?this.underflowX=this.underflowY=0:(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0),this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(!(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)){var e=new h.bRX(this.parent.x,this.parent.y),i=this.parent.plugins.decelerate||{};if(null!==this.options.left||null!==this.options.right){let t=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:0!==this.parent.x&&(this.parent.x=0,t=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,t=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,t=!0)}else null!==this.options.left&&this.parent.left<(!0===this.options.left?0:this.options.left)&&(this.parent.x=-(!0===this.options.left?0:this.options.left)*this.parent.scale.x,i.x=0,t=!0),null!==this.options.right&&this.parent.right>(!0===this.options.right?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(!0===this.options.right?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,i.x=0,t=!0);t&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(null!==this.options.top||null!==this.options.bottom){let t=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:0!==this.parent.y&&(this.parent.y=0,t=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,t=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,t=!0)}else null!==this.options.top&&this.parent.top<(!0===this.options.top?0:this.options.top)&&(this.parent.y=-(!0===this.options.top?0:this.options.top)*this.parent.scale.y,i.y=0,t=!0),null!==this.options.bottom&&this.parent.bottom>(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,i.y=0,t=!0);t&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}}reset(){this.update()}}const f={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class g extends i{constructor(t,e={}){super(t),this.options=Object.assign({},f,e),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused)if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight;null!==this.options.minWidth&&t<this.options.minWidth&&(s=this.parent.scale.x,this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/s,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})),null!==this.options.maxWidth&&t>this.options.maxWidth&&(s=this.parent.scale.x,this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/s,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})),null!==this.options.minHeight&&e<this.options.minHeight&&(s=this.parent.scale.y,this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/s,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})),null!==this.options.maxHeight&&e>this.options.maxHeight&&(s=this.parent.scale.y,this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/s,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}else if(this.options.minScale||this.options.maxScale){var i,s={x:null,y:null},r={x:null,y:null};"number"==typeof this.options.minScale?(s.x=this.options.minScale,s.y=this.options.minScale):null!==this.options.minScale&&(i=this.options.minScale,s.x="u"<typeof i.x?null:i.x,s.y="u"<typeof i.y?null:i.y),"number"==typeof this.options.maxScale?(r.x=this.options.maxScale,r.y=this.options.maxScale):null!==this.options.maxScale&&(i=this.options.maxScale,r.x="u"<typeof i.x?null:i.x,r.y="u"<typeof i.y?null:i.y);let t=this.parent.scale.x,e=this.parent.scale.y;null!==s.x&&t<s.x&&(t=s.x),null!==r.x&&t>r.x&&(t=r.x),null!==s.y&&e<s.y&&(e=s.y),null!==r.y&&e>r.y&&(e=r.y),t===this.parent.scale.x&&e===this.parent.scale.y||(this.parent.scale.set(t,e),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}reset(){this.clamp()}}const m={friction:.98,bounce:.8,minSpeed:.01};class y extends i{constructor(t,e={}){super(t),this.options=Object.assign({},m,e),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",t=>this.handleMoved(t))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!(!this.x&&!this.y)}move(){var t;return this.paused||(1===(t=this.parent.input.count())||1<t&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),60<this.saved.length)&&this.saved.splice(0,30),!1}handleMoved(t){var e;this.saved.length&&(e=this.saved[this.saved.length-1],"clamp-x"===t.type&&t.original?e.x===t.original.x&&(e.x=this.parent.x):"clamp-y"===t.type&&t.original&&e.y===t.original.y&&(e.y=this.parent.y))}up(){if(0===this.parent.input.count()&&this.saved.length){var t=performance.now();for(const i of this.saved)if(i.time>=t-100){var e=t-i.time;this.x=(this.parent.x-i.x)/e,this.y=(this.parent.y-i.y)/e,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(t){typeof(t=t||{}).x<"u"&&(this.x=t.x,this.percentChangeX=this.options.friction),typeof t.y<"u"&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){var e,i,s,r,n;this.paused||(e=this.x||this.y,i=this.timeSinceRelease,s=this.timeSinceRelease+t,this.x&&(n=this.percentChangeX,r=Math.log(n),this.parent.x+=16*this.x/r*(Math.pow(n,s/16)-Math.pow(n,i/16)),this.x*=Math.pow(this.percentChangeX,t/16)),this.y&&(r=this.percentChangeY,n=Math.log(r),this.parent.y+=16*this.y/n*(Math.pow(r,s/16)-Math.pow(r,i/16)),this.y*=Math.pow(this.percentChangeY,t/16)),this.timeSinceRelease+=t,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),e&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"}))}reset(){this.x=this.y=null}}const _={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class v extends i{constructor(t,e={}){super(t),this.windowEventHandlers=[],this.options=Object.assign({},_,e),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||"all"===this.options.direction||"x"===this.options.direction,this.yDirection=!this.options.direction||"all"===this.options.direction||"y"===this.options.direction,this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){this.addWindowEventHandler("keyup",t=>{e.includes(t.code)&&(this.keyIsPressed=!1)}),this.addWindowEventHandler("keydown",t=>{e.includes(t.code)&&(this.keyIsPressed=!0)})}addWindowEventHandler(t,e){"u"<typeof window||(window.addEventListener(t,e),this.windowEventHandlers.push({event:t,handler:e}))}destroy(){"u"<typeof window||this.windowEventHandlers.forEach(({event:t,handler:e})=>{window.removeEventListener(t,e)})}mouseButtons(t){this.mouse=t&&"all"!==t?[-1!==t.indexOf("left"),-1!==t.indexOf("middle"),-1!==t.indexOf("right")]:[!0,!0,!0]}parseUnderflow(){var t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(t.includes("left")?this.underflowX=-1:t.includes("right")?this.underflowX=1:this.underflowX=0,t.includes("top")?this.underflowY=-1:t.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(t){var e="mouse"===t.pointerType,i=this.parent.input.count();return!(!(1===i||1<i&&!this.parent.plugins.get("pinch",!0))||e&&!this.mouse[t.button])}checkKeyPress(t){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&"touch"===t.data.pointerType}down(t){return!(this.paused||!this.options.pressDrag||(this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.global.x,y:t.global.y},this.current=t.pointerId,0):(this.last=null,1)))}get active(){return this.moved}move(t){if(!this.paused&&this.options.pressDrag&&this.last&&this.current===t.data.pointerId){var e=t.global.x,i=t.global.y,s=this.parent.input.count();if(1===s||1<s&&!this.parent.plugins.get("pinch",!0)){var s=e-this.last.x,r=i-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(r))return s={x:e,y:i},this.xDirection&&(this.parent.x+=(s.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(s.y-this.last.y)*this.options.factor),this.last=s,this.moved||this.parent.emit("drag-start",{event:t,screen:new h.bRX(this.last.x,this.last.y),world:this.parent.toWorld(new h.bRX(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}else this.moved=!1}return!1}up(t){var e;return!(this.paused||(1===(e=this.parent.input.touches).length?((e=e[0]).last&&(this.last={x:e.last.x,y:e.last.y},this.current=e.id),this.moved=!1):!this.last||!this.moved||(e=new h.bRX(this.last.x,this.last.y),this.parent.emit("drag-end",{event:t,screen:e,world:this.parent.toWorld(e),viewport:this.parent}),this.last=null,this.moved=!1)))}wheel(t){if(!this.paused&&this.options.wheel){var e,i,s=this.parent.plugins.get("wheel",!0);if(!s||!s.options.wheelZoom&&!t.ctrlKey)return s=t.deltaMode?this.options.lineHeight:1,e=[t.deltaX,t.deltaY],[e,i]=this.options.wheelSwapAxes?e.reverse():e,this.xDirection&&(this.parent.x+=e*s*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=i*s*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),this.parent.options.stopPropagation&&t.stopPropagation(),!0}return!1}resume(){this.last=null,this.paused=!1}clamp(){var t=this.parent.plugins.get("decelerate",!0)||{};if("y"!==this.options.clampWheel)if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if("x"!==this.options.clampWheel)if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const x={speed:0,acceleration:null,radius:null};class w extends i{constructor(t,e,i={}){super(t),this.target=e,this.options=Object.assign({},x,i),this.velocity={x:0,y:0}}update(t){if(!this.paused){var i=this.parent.center;let t=this.target.x,e=this.target.y;if(this.options.radius){if(!(Math.sqrt(Math.pow(this.target.y-i.y,2)+Math.pow(this.target.x-i.x,2))>this.options.radius))return;var s=Math.atan2(this.target.y-i.y,this.target.x-i.x);t=this.target.x-Math.cos(s)*this.options.radius,e=this.target.y-Math.sin(s)*this.options.radius}var r,n,a,s=t-i.x,o=e-i.y;(s||o)&&(this.options.speed?this.options.acceleration?(r=Math.atan2(e-i.y,t-i.x),(a=Math.sqrt(Math.pow(s,2)+Math.pow(o,2)))&&(n=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration),this.velocity=n<a?{x:Math.min(this.velocity.x+(this.options.acceleration,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration,this.options.speed))}:{x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)},n=Math.cos(r)*this.velocity.x,a=Math.sin(r)*this.velocity.y,r=Math.abs(n)>Math.abs(s)?t:i.x+n,n=Math.abs(a)>Math.abs(o)?e:i.y+a,this.parent.moveCenter(r,n),this.parent.emit("moved",{viewport:this.parent,type:"follow"}))):(a=Math.atan2(e-i.y,t-i.x),r=Math.cos(a)*this.options.speed,n=Math.sin(a)*this.options.speed,a=Math.abs(r)>Math.abs(s)?t:i.x+r,s=Math.abs(n)>Math.abs(o)?e:i.y+n,this.parent.moveCenter(a,s),this.parent.emit("moved",{viewport:this.parent,type:"follow"})):(this.parent.moveCenter(t,e),this.parent.emit("moved",{viewport:this.parent,type:"follow"})))}}}const b={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class A extends i{constructor(t,e={}){super(t),this.options=Object.assign({},b,e),this.reverse=this.options.reverse?1:-1,this.radiusSquared="number"==typeof this.options.radius?Math.pow(this.options.radius,2):null,this.resize()}resize(){var t=this.options.distance;null!==t?(this.left=t,this.top=t,this.right=this.parent.screenWidth-t,this.bottom=this.parent.screenHeight-t):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=null===this.options.right?null:this.parent.screenWidth-this.options.right,this.bottom=null===this.options.bottom?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(t){var e,i;return this.paused||"mouse"!==t.pointerType&&1!==t.pointerId||!this.options.allowButtons&&0!==t.buttons||(e=t.global.x,t=t.global.y,this.radiusSquared?(i=this.parent.toScreen(this.parent.center),Math.pow(i.x-e,2)+Math.pow(i.y-t,2)>=this.radiusSquared?(i=Math.atan2(i.y-t,i.x-e),this.options.linear?(this.horizontal=Math.round(Math.cos(i))*this.options.speed*this.reverse*.06,this.vertical=Math.round(Math.sin(i))*this.options.speed*this.reverse*.06):(this.horizontal=Math.cos(i)*this.options.speed*this.reverse*.06,this.vertical=Math.sin(i)*this.options.speed*this.reverse*.06)):(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0)):(null!==this.left&&e<this.left?this.horizontal=Number(this.reverse)*this.options.speed*.06:null!==this.right&&e>this.right?this.horizontal=-1*this.reverse*this.options.speed*.06:(this.decelerateHorizontal(),this.horizontal=0),null!==this.top&&t<this.top?this.vertical=Number(this.reverse)*this.options.speed*.06:null!==this.bottom&&t>this.bottom?this.vertical=-1*this.reverse*this.options.speed*.06:(this.decelerateVertical(),this.vertical=0))),!1}decelerateHorizontal(){var t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){var t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){var t;this.paused||!this.horizontal&&!this.vertical||(t=this.parent.center,this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"}))}}const S={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class P extends i{constructor(t,e={}){super(t),this.active=!1,this.pinching=!1,this.moved=!1,this.options=Object.assign({},S,e)}down(){return 2<=this.parent.input.count()&&(this.active=!0)}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(i){if(!this.paused&&this.active){var s=i.global.x,r=i.global.y,n=this.parent.input.touches;if(2<=n.length){var a=n[0],n=n[1],o=a.last&&n.last?Math.sqrt(Math.pow(n.last.x-a.last.x,2)+Math.pow(n.last.y-a.last.y,2)):null;if(a.id===i.pointerId?a.last={x:s,y:r,data:i}:n.id===i.pointerId&&(n.last={x:s,y:r,data:i}),o){let t;s=new h.bRX(a.last.x+(n.last.x-a.last.x)/2,a.last.y+(n.last.y-a.last.y)/2);this.options.center||(t=this.parent.toLocal(s));let e=Math.sqrt(Math.pow(n.last.x-a.last.x,2)+Math.pow(n.last.y-a.last.y,2));r=(1-o/(e=0===e?e=1e-10:e))*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y),i=(this.isAxisX()&&(this.parent.scale.x+=r),this.isAxisY()&&(this.parent.scale.y+=r),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:s}),this.parent.plugins.get("clamp-zoom",!0));i&&i.clamp(),this.options.center?this.parent.moveCenter(this.options.center):(n=this.parent.toGlobal(t),this.parent.x+=(s.x-n.x)*this.options.factor,this.parent.y+=(s.y-n.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(s.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(s.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=s,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}}return!1}up(){return!!(this.pinching&&this.parent.input.touches.length<=1)&&(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0)}}const M={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class C extends i{constructor(t,e,i,s={}){super(t),this.options=Object.assign({},M,s),this.ease=a(s.ease,"easeInOutSine"),this.x=e,this.y=i,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};var t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){var t;return 0===this.parent.input.count()&&(t=this.parent.plugins.get("decelerate",!0))&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction),!1}update(s){if(!(this.paused||this.options.interrupt&&0!==this.parent.input.count()))if(this.snapping){var r=this.snapping;r.time+=s;let t,e,i;var s=this.startX,n=this.startY,a=this.deltaX,o=this.deltaY;i=r.time>this.options.time?(t=!0,e=s+a,n+o):(r=this.ease(r.time,0,1,this.options.time),e=s+a*r,n+o*r),this.options.topLeft?this.parent.moveCorner(e,i):this.parent.moveCenter(e,i),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),t&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{s=this.options.topLeft?this.parent.corner:this.parent.center;s.x===this.x&&s.y===this.y||this.snapStart()}}}const k={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class T extends i{constructor(t,e={}){super(t),this.options=Object.assign({},k,e),this.ease=a(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,(this.yScale=0)<this.options.width&&(this.xScale=t.screenWidth/this.options.width,this.xIndependent=!0),0<this.options.height&&(this.yScale=t.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,0===this.options.time?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):e.forceStart&&this.createSnapping()}createSnapping(){var t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,i=this.parent.screenWidth/this.xScale,s=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:e,deltaX:i-t,deltaY:s-e},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,0<this.options.width&&(this.xScale=this.parent.screenWidth/this.options.width),0<this.options.height&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(!(this.paused||this.options.interrupt&&0!==this.parent.input.count())){let t;var i;this.options.center||this.options.noMove||(t=this.parent.center),this.snapping?this.snapping&&((i=this.snapping).time+=e,i.time>=this.options.time?(this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null):(e=this.snapping,i=this.ease(e.time,e.startX,e.deltaX,this.options.time),e=this.ease(e.time,e.startY,e.deltaY,this.options.time),this.parent.scale.x=this.parent.screenWidth/i,this.parent.scale.y=this.parent.screenHeight/e),(i=this.parent.plugins.get("clamp-zoom",!0))&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(t))):this.parent.scale.x===this.xScale&&this.parent.scale.y===this.yScale||this.createSnapping()}}resume(){this.snapping=null,super.resume()}}const E={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class I extends i{constructor(t,e={}){super(t),this.options=Object.assign({},E,e),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){"u"<typeof window||(window.addEventListener("keydown",t=>{e.includes(t.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",t=>{e.includes(t.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){var e=this.smoothingCenter,i=this.smoothing;let t;this.options.center||(t=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=i.x),this.isAxisY()&&(this.parent.scale.y+=i.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});var i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.center?this.parent.moveCenter(this.options.center):(i=this.parent.toGlobal(t),this.parent.x+=e.x-i.x,this.parent.y+=e.y-i.y),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(!this.paused){var i=this.parent.input.getPointerPosition(e),s=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,s=Math.pow(2,(1+this.options.percent)*s);let t;this.options.center||(t=this.parent.toLocal(i)),this.isAxisX()&&(this.parent.scale.x*=s),this.isAxisY()&&(this.parent.scale.y*=s),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});s=this.parent.plugins.get("clamp-zoom",!0);s&&s.clamp(),this.options.center?this.parent.moveCenter(this.options.center):(s=this.parent.toGlobal(t),this.parent.x+=i.x-s.x,this.parent.y+=i.y-s.y),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}}wheel(t){if(this.paused||!this.checkKeyPress())return!1;if(t.ctrlKey&&this.options.trackpadPinch)this.pinch(t);else if(this.options.wheelZoom){var e=this.parent.input.getPointerPosition(t),i=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,i=Math.pow(2,(1+this.options.percent)*i);if(this.options.smooth){var s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*i-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*i-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=e}else{let t;this.options.center||(t=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});s=this.parent.plugins.get("clamp-zoom",!0);s&&s.clamp(),this.options.center?this.parent.moveCenter(this.options.center):(i=this.parent.toGlobal(t),this.parent.x+=e.x-i.x,this.parent.y+=e.y-i.y)}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}return!this.parent.options.passiveWheel}}class B{constructor(t){this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new h.M_G(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var t;null!=(t=this.viewport.options.events.domElement)&&t.removeEventListener("wheel",this.wheelFunction)}down(t){var e,i;!this.viewport.pause&&this.viewport.visible&&("mouse"===t.pointerType?this.isMouseDown=!0:this.get(t.pointerId)||this.touches.push({id:t.pointerId,last:null}),1!==this.count()||(this.last=t.global.clone(),e=this.viewport.plugins.get("decelerate",!0),i=this.viewport.plugins.get("bounce",!0),e&&e.isActive())||i&&i.isActive()?this.clickedAvailable=!1:this.clickedAvailable=!0,this.viewport.plugins.down(t))&&this.viewport.options.stopPropagation&&t.stopPropagation()}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){var e,i,s;!this.viewport.pause&&this.viewport.visible&&(e=this.viewport.plugins.move(t),this.clickedAvailable&&this.last&&(i=t.global.x-this.last.x,s=t.global.y-this.last.y,this.checkThreshold(i)||this.checkThreshold(s))&&(this.clickedAvailable=!1),e)&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){var e;!this.viewport.pause&&this.viewport.visible&&("mouse"===t.pointerType&&(this.isMouseDown=!1),"mouse"!==t.pointerType&&this.remove(t.pointerId),e=this.viewport.plugins.up(t),this.clickedAvailable&&0===this.count()&&this.last&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),e)&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){var e=new h.bRX;return this.viewport.options.events.mapPositionToPoint(e,t.clientX,t.clientY),e}handleWheel(t){var e;!this.viewport.pause&&this.viewport.visible&&(e=this.viewport.toLocal(this.getPointerPosition(t)),this.viewport.left<=e.x)&&e.x<=this.viewport.right&&this.viewport.top<=e.y&&e.y<=this.viewport.bottom&&this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(const e of this.touches)if(e.id===t)return e;return null}remove(e){for(let t=0;t<this.touches.length;t++)if(this.touches[t].id===e)return void this.touches.splice(t,1)}count(){return(this.isMouseDown?1:0)+this.touches.length}}const R=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class L{constructor(t){this.viewport=t,this.list=[],this.plugins={}}add(t,e,i=R.length){var s=this.plugins[t],s=(s&&s.destroy(),this.plugins[t]=e,R.indexOf(t));-1!==s&&R.splice(s,1),R.splice(i,0,t),this.sort()}get(t,e){return e&&null!=(e=this.plugins[t])&&e.paused?null:this.plugins[t]}update(t){for(const e of this.list)e.update(t)}resize(){for(const t of this.list)t.resize()}reset(){for(const t of this.list)t.reset()}removeAll(){this.list.forEach(t=>{t.destroy()}),this.plugins={},this.sort()}remove(t){var e;this.plugins[t]&&(null!=(e=this.plugins[t])&&e.destroy(),delete this.plugins[t],this.viewport.emit("plugin-remove",t),this.sort())}pause(t){null!=(t=this.plugins[t])&&t.pause()}resume(t){null!=(t=this.plugins[t])&&t.resume()}sort(){this.list=[];for(const t of R)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let e=!1;for(const i of this.list)i.down(t)&&(e=!0);return e}move(t){let e=!1;for(const i of this.viewport.plugins.list)i.move(t)&&(e=!0);return e}up(t){let e=!1;for(const i of this.list)i.up(t)&&(e=!0);return e}wheel(t){let e=!1;for(const i of this.list)i.wheel(t)&&(e=!0);return e}}const O={screenWidth:"u"<typeof window?0:window.innerWidth,screenHeight:"u"<typeof window?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:h.RvI.shared,allowPreserveDragOutside:!1};class F extends h.mcf{constructor(t){super(),this._disableOnContextMenu=t=>t.preventDefault(),this.options={...O,...t},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new B(this),this.plugins=new L(this)}destroy(t){var e;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&null!=(e=this.options.events.domElement)&&e.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new h.M_G(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t="u"<typeof window?0:window.innerWidth,e="u"<typeof window?0:window.innerHeight,i,s){this.screenWidth=t,this.screenHeight=e,typeof i<"u"&&(this._worldWidth=i),typeof s<"u"&&(this._worldHeight=s),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth||this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight||this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new h.M_G(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,e){return 2===arguments.length?this.toLocal(new h.bRX(t,e)):this.toLocal(t)}toScreen(t,e){return 2===arguments.length?this.toGlobal(new h.bRX(t,e)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new h.bRX(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(...t){let e,i;i="number"==typeof t[0]?(e=t[0],t[1]):(e=t[0].x,t[0].y);var t=(this.worldScreenWidth/2-e)*this.scale.x,s=(this.worldScreenHeight/2-i)*this.scale.y;return this.x===t&&this.y===s||(this.position.set(t,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new h.bRX(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(...t){let e,i;return i=1===t.length?(e=-t[0].x*this.scale.x,-t[0].y*this.scale.y):(e=-t[0]*this.scale.x,-t[1]*this.scale.y),e===this.x&&i===this.y||(this.position.set(e,i),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,e){t=this.screenWidth/t,e=this.screenHeight/e;return Math.min(t,e)}findCover(t,e){t=this.screenWidth/t,e=this.screenHeight/e;return Math.max(t,e)}fitWidth(t=this.worldWidth,e,i=!0,s){let r;e&&(r=this.center),this.scale.x=this.screenWidth/t,i&&(this.scale.y=this.scale.x);t=this.plugins.get("clamp-zoom",!0);return!s&&t&&t.clamp(),e&&r&&this.moveCenter(r),this}fitHeight(t=this.worldHeight,e,i=!0,s){let r;e&&(r=this.center),this.scale.y=this.screenHeight/t,i&&(this.scale.x=this.scale.y);t=this.plugins.get("clamp-zoom",!0);return!s&&t&&t.clamp(),e&&r&&this.moveCenter(r),this}fitWorld(t){let e;t&&(e=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;var i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),t&&e&&this.moveCenter(e),this}fit(t,e=this.worldWidth,i=this.worldHeight){let s;t&&(s=this.center),this.scale.x=this.screenWidth/e,this.scale.y=this.screenHeight/i,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;e=this.plugins.get("clamp-zoom",!0);return e&&e.clamp(),t&&s&&this.moveCenter(s),this}setZoom(t,e){let i;e&&(i=this.center),this.scale.set(t);t=this.plugins.get("clamp-zoom",!0);return t&&t.clamp(),e&&i&&this.moveCenter(i),this}zoomPercent(t,e){return this.setZoom(this.scale.x+this.scale.x*t,e)}zoom(t,e){return this.fitWidth(t+this.worldScreenWidth,e),this}get scaled(){return this.scale.x}set scaled(t){this.setZoom(t,!0)}snapZoom(t){return this.plugins.add("snap-zoom",new T(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new h.bRX(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new h.M_G(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new v(this,t)),this}clamp(t){return this.plugins.add("clamp",new p(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new y(this,t)),this}bounce(t){return this.plugins.add("bounce",new d(this,t)),this}pinch(t){return this.plugins.add("pinch",new P(this,t)),this}snap(t,e,i){return this.plugins.add("snap",new C(this,t,e,i)),this}follow(t,e){return this.plugins.add("follow",new w(this,t,e)),this}wheel(t){return this.plugins.add("wheel",new I(this,t)),this}animate(t){return this.plugins.add("animate",new l(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new g(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new A(this,t)),this}get pause(){return!!this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,e,i,s,r){r&&(i>this.worldScreenWidth||s>this.worldScreenHeight)&&(this.fit(!0,i,s),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let n=!1;t<this.left?(this.left=t,n=!0):t+i>this.right&&(this.right=t+i,n=!0),e<this.top?(this.top=e,n=!0):e+s>this.bottom&&(this.bottom=e+s,n=!0),n&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}},1979:(t,e,i)=>{"use strict";i.d(e,{l:()=>s});var o=i(268),h=i(2406);const s=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){var e=this._cache.get(t);return e||(0,o.R)(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,i){var e=(0,h.z)(t);let s;for(let t=0;t<this.parsers.length;t++){var r=this.parsers[t];if(r.test(i)){s=r.getCacheableAssets(e,i);break}}const n=new Map(Object.entries(s||{}));s||e.forEach(t=>{n.set(t,i)});t=[...n.keys()];const a={cacheKeys:t,keys:e};e.forEach(t=>{this._cacheMap.set(t,a)}),t.forEach(t=>{var e=s?s[t]:i;this._cache.has(t)&&this._cache.get(t)!==e&&(0,o.R)("[Cache] already has key:",t),this._cache.set(t,n.get(t))})}remove(t){var e;this._cacheMap.has(t)?((e=this._cacheMap.get(t)).cacheKeys.forEach(t=>{this._cache.delete(t)}),e.keys.forEach(t=>{this._cacheMap.delete(t)})):(0,o.R)(`[Assets] Asset id ${t} was not found in the Cache`)}get parsers(){return this._parsers}}},4589:(t,e,i)=>{"use strict";i.d(e,{T:()=>s});var s=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(s||{})},1173:(t,e,i)=>{"use strict";i.d(e,{x:()=>a});var s=i(268),n=i(2927),l=i(2406);function u(t){var e=t.match(/\{(.*?)\}/g),i=[];if(e){const s=[];e.forEach(t=>{t=t.substring(1,t.length-1).split(",");s.push(t)}),!function e(i,s,r,n,a){var o=s[r];for(let t=0;t<o.length;t++){var h=o[t];r<s.length-1?e(i.replace(n[r],h),s,r+1,n,a):a.push(i.replace(n[r],h))}}(t,s,0,e,i)}else i.push(t);return i}var r=i(2217);class a{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>""+t+this._bundleIdConnector+e,extractAssetIdFromBundle:(t,e)=>e.replace(""+t+this._bundleIdConnector,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if("string"==typeof t)this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}}getAlias(t){var{alias:t,src:e}=t;return(0,l.z)(t||e,t=>"string"==typeof t?t:Array.isArray(t)?t.map(t=>t?.src??t):t?.src?t.src:t,!0)}addManifest(t){this._manifest&&(0,s.R)("[Resolver] Manifest already exists, this will be overwritten"),(this._manifest=t).bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(n,t){const a=[];let e=t;(e=Array.isArray(t)?e:Object.entries(t).map(([t,e])=>"string"==typeof e||Array.isArray(e)?{alias:t,src:e}:{alias:t,...e})).forEach(t=>{var e,i=t.src,s=t.alias;let r;r="string"==typeof s?(e=this._createBundleAssetId(n,s),a.push(e),[s,e]):(e=s.map(t=>this._createBundleAssetId(n,t)),a.push(...e),[...s,...e]),this.add({...t,alias:r,src:i})}),this._bundles[n]=a}add(t){var e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=t=>{this.hasKey(t)&&(0,s.R)(`[Resolver] already has key: ${t} overwriting`)},(0,l.z)(e).forEach(t=>{var e=t["src"];let{data:r,format:n,loadParser:a}=t;e=(0,l.z)(e).map(t=>"string"==typeof t?u(t):Array.isArray(t)?t:[t]);const o=this.getAlias(t),h=(Array.isArray(o)?o.forEach(i):i(o),[]);e.forEach(t=>{t.forEach(e=>{let i={};if("object"!=typeof e){i.src=e;for(let t=0;t<this._parsers.length;t++){var s=this._parsers[t];if(s.test(e)){i=s.parse(e);break}}}else r=e.data??r,n=e.format??n,a=e.loadParser??a,i={...i,...e};if(!o)throw new Error("[Resolver] alias is undefined for this asset: "+i.src);i=this._buildResolvedAsset(i,{aliases:o,data:r,format:n,loadParser:a}),h.push(i)})}),o.forEach(t=>{this._assetMap[t]=h})})}resolveBundle(t){var e=(0,r.a)(t);t=(0,l.z)(t);const a={};return t.forEach(t=>{var e=this._bundles[t];if(e){var i=this.resolve(e),s={};for(const n in i){var r=i[n];s[this._extractAssetIdFromBundle(t,n)]=r}a[t]=s}}),e?a[t[0]]:a}resolveUrl(t){var e=this.resolve(t);if("string"==typeof t)return e.src;var i={};for(const s in e)i[s]=e[s].src;return i}resolve(t){var e=(0,r.a)(t);t=(0,l.z)(t);const i={};return t.forEach(t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let s=this._assetMap[t];const e=this._getPreferredOrder(s);e?.priority.forEach(i=>{e.params[i].forEach(e=>{var t=s.filter(t=>!!t[i]&&t[i]===e);t.length&&(s=t)})}),this._resolverHash[t]=s[0]}else this._resolverHash[t]=this._buildResolvedAsset({alias:[t],src:t},{});i[t]=this._resolverHash[t]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[0];var i=this._preferredOrder.find(t=>t.params.format.includes(s.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(t){return this._defaultSearchParams?t+(/\?/.test(t)?"&":"?")+this._defaultSearchParams:t}_buildResolvedAsset(t,e){var{aliases:e,data:i,loadParser:s,format:r}=e;return(this._basePath||this._rootPath)&&(t.src=n.A.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=e??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...i||{},...t.data},t.loadParser=s??t.loadParser,t.format=r??t.format??t.src.split(".").pop().split("?").shift().split("#").shift(),t}}a.RETINA_PREFIX=/@([0-9\.]+)x/},2406:(t,e,i)=>{"use strict";i.d(e,{z:()=>s});const s=(t,e,i=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(t=>"string"==typeof t||i?e(t):t):t)},2233:(t,e,i)=>{"use strict";i.d(e,{Y:()=>s});const s=(t,e)=>{e=e.split("?")[1];return e&&(t+="?"+e),t}},2217:(t,e,i)=>{"use strict";i.d(e,{a:()=>s});const s=t=>!Array.isArray(t)},2577:(t,e,i)=>{"use strict";i.d(e,{Q:()=>R});function r(t){return"string"==typeof t?0<t.length:"number"==typeof t}function n(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=Math.pow(10,e)),Math.round(i*t)/i+0}function a(t,e,i){return void 0===e&&(e=0),(i=void 0===i?1:i)<t?i:e<t?t:e}function o(t){return 0<(t=isFinite(t)?t%360:0)?t:t+360}function h(t){return{r:a(t.r,0,255),g:a(t.g,0,255),b:a(t.b,0,255),a:a(t.a)}}function l(t){return{r:n(t.r),g:n(t.g),b:n(t.b),a:n(t.a,3)}}function u(t){return(t=t.toString(16)).length<2?"0"+t:t}function d(t){var e=t.r,i=t.g,s=t.b,t=t.a,r=Math.max(e,i,s),n=r-Math.min(e,i,s);return{h:60*((s=n?r===e?(i-s)/n:r===i?2+(s-e)/n:4+(e-i)/n:0)<0?6+s:s),s:r?n/r*100:0,v:r/255*100,a:t}}function c(t){var e=t.h,i=t.s,s=t.v,t=t.a,e=e/360*6,r=(i/=100,s/=100,Math.floor(e)),n=s*(1-i),a=s*(1-(e-r)*i);return{r:255*[s,a,n,n,e=s*(1-(1-e+r)*i),s][i=r%6],g:255*[e,s,s,a,n,n][i],b:255*[n,n,e,s,s,a][i],a:t}}function p(t){return{h:o(t.h),s:a(t.s,0,100),l:a(t.l,0,100),a:a(t.a)}}function f(t){return{h:n(t.h),s:n(t.s),l:n(t.l),a:n(t.a,3)}}function g(t){return c((e=t.s,{h:t.h,s:0<(e*=((i=t.l)<50?i:100-i)/100)?2*e/(i+e)*100:0,v:i+e,a:t.a}));var e,i}function m(t){return{h:(t=d(t)).h,s:0<(s=(200-(e=t.s))*(i=t.v)/100)&&s<200?e*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var e,i,s}function s(t){return"string"==typeof t?C(t.trim(),M.string):"object"==typeof t&&null!==t?C(t,M.object):[null,void 0]}function y(t,e){return{h:(t=m(t)).h,s:a(t.s+100*e,0,100),l:t.l,a:t.a}}function _(t){return(299*t.r+587*t.g+114*t.b)/1e3/255}function v(t,e){return{h:(t=m(t)).h,s:t.s,l:a(t.l+100*e,0,100),a:t.a}}var x={grad:.9,turn:360,rad:360/(2*Math.PI)},w=/^#([0-9a-f]{3,8})$/i,b=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,A=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,S=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,P=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,M={string:[[function(t){var e=w.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?n(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?n(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){t=S.exec(t)||P.exec(t);return!t||t[2]!==t[4]||t[4]!==t[6]?null:h({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)})},"rgb"],[function(t){var e,i,t=b.exec(t)||A.exec(t);return t?(i=p({h:(i=t[1],void 0===(e=t[2])&&(e="deg"),Number(i)*(x[e]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)}),g(i)):null},"hsl"]],object:[[function(t){var e=t.r,i=t.g,s=t.b,t=t.a,t=void 0===t?1:t;return r(e)&&r(i)&&r(s)?h({r:Number(e),g:Number(i),b:Number(s),a:Number(t)}):null},"rgb"],[function(t){var e=t.h,i=t.s,s=t.l,t=t.a,t=void 0===t?1:t;return r(e)&&r(i)&&r(s)?(e=p({h:Number(e),s:Number(i),l:Number(s),a:Number(t)}),g(e)):null},"hsl"],[function(t){var e=t.h,i=t.s,s=t.v,t=t.a,t=void 0===t?1:t;return r(e)&&r(i)&&r(s)?(e={h:Number(e),s:Number(i),v:Number(s),a:Number(t)},i={h:o(e.h),s:a(e.s,0,100),v:a(e.v,0,100),a:a(e.a)},c(i)):null},"hsv"]]},C=function(t,e){for(var i=0;i<e.length;i++){var s=e[i][0](t);if(s)return[s,e[i][1]]}return[null,void 0]},k=(I.prototype.isValid=function(){return null!==this.parsed},I.prototype.brightness=function(){return n(_(this.rgba),2)},I.prototype.isDark=function(){return _(this.rgba)<.5},I.prototype.isLight=function(){return.5<=_(this.rgba)},I.prototype.toHex=function(){return t=(s=l(this.rgba)).r,e=s.g,i=s.b,s=(s=s.a)<1?u(n(255*s)):"","#"+u(t)+u(e)+u(i)+s;var t,e,i,s},I.prototype.toRgb=function(){return l(this.rgba)},I.prototype.toRgbString=function(){return t=(s=l(this.rgba)).r,e=s.g,i=s.b,(s=s.a)<1?"rgba("+t+", "+e+", "+i+", "+s+")":"rgb("+t+", "+e+", "+i+")";var t,e,i,s},I.prototype.toHsl=function(){return f(m(this.rgba))},I.prototype.toHslString=function(){return t=(s=f(m(this.rgba))).h,e=s.s,i=s.l,(s=s.a)<1?"hsla("+t+", "+e+"%, "+i+"%, "+s+")":"hsl("+t+", "+e+"%, "+i+"%)";var t,e,i,s},I.prototype.toHsv=function(){return t=d(this.rgba),{h:n(t.h),s:n(t.s),v:n(t.v),a:n(t.a,3)};var t},I.prototype.invert=function(){return T({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},I.prototype.saturate=function(t){return T(y(this.rgba,t=void 0===t?.1:t))},I.prototype.desaturate=function(t){return T(y(this.rgba,-(t=void 0===t?.1:t)))},I.prototype.grayscale=function(){return T(y(this.rgba,-1))},I.prototype.lighten=function(t){return T(v(this.rgba,t=void 0===t?.1:t))},I.prototype.darken=function(t){return T(v(this.rgba,-(t=void 0===t?.1:t)))},I.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},I.prototype.alpha=function(t){return"number"==typeof t?T({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):n(this.rgba.a,3);var e},I.prototype.hue=function(t){var e=m(this.rgba);return"number"==typeof t?T({h:t,s:e.s,l:e.l,a:e.a}):n(e.h)},I.prototype.isEqual=function(t){return this.toHex()===T(t).toHex()},I),T=function(t){return t instanceof k?t:new k(t)},E=[];function I(t){this.parsed=s(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}[function(l,t){var e,u={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},d={};for(e in u)d[u[e]]=e;var c={};l.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var e,i=d[this.toHex()];if(i)return i;if(null!=t&&t.closest){var s,r=this.toRgb(),n=1/0,a="black";if(!c.length)for(var o in u)c[o]=new l(u[o]).toRgb();for(s in u){h=r,e=c[s];var h=Math.pow(h.r-e.r,2)+Math.pow(h.g-e.g,2)+Math.pow(h.b-e.b,2);h<n&&(n=h,a=s)}return a}},t.string.push([function(t){t=t.toLowerCase(),t="transparent"===t?"#0000":u[t];return t?new l(t).toRgb():null},"name"])}].forEach(function(t){E.indexOf(t)<0&&(t(k,M),E.push(t))});const B=class B{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof B)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set Color#value to null");null!==this._value&&this._isSourceEqual(this._value,t)||(this._normalize(t),this._value=this._cloneSource(t))}}get value(){return this._value}_cloneSource(t){return"string"==typeof t||"number"==typeof t||t instanceof Number||null===t?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):"object"==typeof t&&null!==t?{...t}:t}_isSourceEqual(e,i){var t,s=typeof e;return s==typeof i&&("number"==s||"string"==s||e instanceof Number?e===i:Array.isArray(e)&&Array.isArray(i)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(i)?e.length===i.length&&e.every((t,e)=>t===i[e]):null!==e&&null!==i?(s=Object.keys(e),t=Object.keys(i),s.length===t.length&&s.every(t=>e[t]===i[t])):e===i)}toRgba(){var[t,e,i,s]=this._components;return{r:t,g:e,b:i,a:s}}toRgb(){var[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){var[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){var[e,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),(t=t||this._arrayRgb)[0]=Math.round(255*e),t[1]=Math.round(255*i),t[2]=Math.round(255*s),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t=t||this._arrayRgba;var[e,i,s,r]=this._components;return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb;var[e,i,s]=this._components;return t[0]=e,t[1]=i,t[2]=s,t}toNumber(){return this._int}toBgrNumber(){var[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){var t=this._int;return(t>>16)+(65280&t)+((255&t)<<16)}multiply(t){var[t,e,i,s]=B._temp.setValue(t)._components;return this._components[0]*=t,this._components[1]*=e,this._components[2]*=i,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(1===t)return(255<<24)+this._int;if(0===t)return e?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,r=255&this._int;return e&&(i=i*t+.5|0,s=s*t+.5|0,r=r*t+.5|0),(255*t<<24)+(i<<16)+(s<<8)+r}toHex(){var t=this._int.toString(16);return"#"+("000000".substring(0,6-t.length)+t)}toHexa(){var t=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,s,r;var n;if(("number"==typeof t||t instanceof Number)&&0<=t&&t<=16777215?(e=(t>>16&255)/255,i=(t>>8&255)/255,s=(255&t)/255,r=1):(Array.isArray(t)||t instanceof Float32Array)&&3<=t.length&&t.length<=4?(t=this._clamp(t),[e,i,s,r=1]=t):(t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&3<=t.length&&t.length<=4?(t=this._clamp(t,0,255),[e,i,s,r=255]=t,e/=255,i/=255,s/=255,r/=255):"string"!=typeof t&&"object"!=typeof t||("string"==typeof t&&(n=B.HEX_PATTERN.exec(t))&&(t="#"+n[2]),(n=T(t)).isValid()&&({r:e,g:i,b:s,a:r}=n.rgba,e/=255,i/=255,s/=255)),void 0===e)throw new Error("Unable to convert color "+t);this._components[0]=e,this._components[1]=i,this._components[2]=s,this._components[3]=r,this._refreshInt()}_refreshInt(){this._clamp(this._components);var[t,e,i]=this._components;this._int=(255*t<<16)+(255*e<<8)+(255*i|0)}_clamp(i,s=0,r=1){return"number"==typeof i?Math.min(Math.max(i,s),r):(i.forEach((t,e)=>{i[e]=Math.min(Math.max(t,s),r)}),i)}static isColorLike(t){return"number"==typeof t||"string"==typeof t||t instanceof Number||t instanceof B||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||void 0!==t.r&&void 0!==t.g&&void 0!==t.b||void 0!==t.r&&void 0!==t.g&&void 0!==t.b&&void 0!==t.a||void 0!==t.h&&void 0!==t.s&&void 0!==t.l||void 0!==t.h&&void 0!==t.s&&void 0!==t.l&&void 0!==t.a||void 0!==t.h&&void 0!==t.s&&void 0!==t.v||void 0!==t.h&&void 0!==t.s&&void 0!==t.v&&void 0!==t.a}};B.shared=new B,B._temp=new B,B.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let R=B},1761:(t,e,i)=>{"use strict";i.d(e,{e:()=>r});let s={createCanvas:(t,e)=>{var i=document.createElement("canvas");return i.width=t,i.height=e,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>{return(new DOMParser).parseFromString(t,"text/xml")}};const r={get(){return s},set(t){s=t}}},7566:(t,e,i)=>{"use strict";i.d(e,{N:()=>r});var s=i(5101);class r{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=r.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new s.b,this.page=new s.b,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,s,r){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}},3285:(t,e,i)=>{"use strict";i.d(e,{_:()=>r});var s=i(5101);class r extends i(7566).N{constructor(){super(...arguments),this.client=new s.b,this.movement=new s.b,this.offset=new s.b,this.global=new s.b,this.screen=new s.b}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,s,r,n,a,o,h,l,u,d,c,p,f){throw new Error("Method not implemented.")}}},4935:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});class s extends i(3285)._{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}},8507:(t,e,i)=>{"use strict";i.d(e,{Ag:()=>s,XO:()=>a});var s=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t))(s||{});const r=t=>{if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!=typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t={...t}).type&&(t.type=[t.type]),t},n=(t,e)=>r(t).priority??e,a={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(r).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...t){return t.map(r).forEach(s=>{s.type.forEach(t=>{var e=this._addHandlers,i=this._queue;e[t]?e[t]?.(s):(i[t]=i[t]||[],i[t]?.push(s))})}),this},handle(t,e,i){var s=this._addHandlers,r=this._removeHandlers;if(s[t]||r[t])throw new Error(`Extension type ${t} already has a handler`);s[t]=e,r[t]=i;s=this._queue;return s[t]&&(s[t]?.forEach(t=>e(t)),delete s[t]),this},handleByMap(t,e){return this.handle(t,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(t,i,s=-1){return this.handle(t,e=>{0<=i.findIndex(t=>t.name===e.name)||(i.push({name:e.name,value:e.ref}),i.sort((t,e)=>n(e.value,s)-n(t.value,s)))},e=>{var t=i.findIndex(t=>t.name===e.name);-1!==t&&i.splice(t,1)})},handleByList(t,e,i=-1){return this.handle(t,t=>{e.includes(t.ref)||(e.push(t.ref),e.sort((t,e)=>n(e,i)-n(t,i)))},t=>{t=e.indexOf(t.ref);-1!==t&&e.splice(t,1)})}}},9049:(t,e,i)=>{"use strict";i.d(e,{a:()=>s});class s{constructor(t){this.pipe="filter",this.priority=1,this.filters=t?.filters,this.filterArea=t?.filterArea}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}},5640:(H,t,h)=>{"use strict";h.d(t,{lgM:()=>i,sP:()=>O,mcf:()=>e.mc,eBH:()=>m.e,bkB:()=>Lt.A,AgS:()=>s.Ag,AjL:()=>_t.A,A1g:()=>bt.A,TgI:()=>M.T,xni:()=>Tt,T9C:()=>S.T,bRX:()=>vt.b,tS:()=>xt.t,M_G:()=>wt.M,EYj:()=>Bt,xJt:()=>It.x,RvI:()=>Rt.R,XOh:()=>s.XO,AeT:()=>v.A});var s=h(8507),t={extension:{type:s.Ag.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.all([h.e(188),h.e(135),h.e(557)]).then(h.bind(h,2557))}},F={extension:{type:s.Ag.Environment,name:"webworker",priority:0},test:()=>"undefined"!=typeof self&&void 0!==self.WorkerGlobalScope,load:async()=>{await Promise.all([h.e(188),h.e(135),h.e(162)]).then(h.bind(h,2162))}};h(8480),h(9010);const l=[];s.XO.handleByNamedList(s.Ag.Environment,l);var m=h(1761),u=h(2855);let d;let c;const p=["webgl","webgpu","canvas"];async function W(e){let i=[];e.preference?(i.push(e.preference),p.forEach(t=>{t!==e.preference&&i.push(t)})):i=p.slice();let s,r=(await async function(t){if(t)for(let t=0;t<l.length;t++){var e=l[t];if(e.value.test())return!await e.value.load()}}(e.manageImports??!0),{});for(let t=0;t<i.length;t++){var n=i[t];if("webgpu"===n&&await async function(t={}){return c=void 0===c?await(async()=>{if(!m.e.get().getNavigator().gpu)return!1;try{const m=await navigator.gpu.requestAdapter(t);return await m.requestDevice(),!0}catch(t){return!1}})():c}()){var a=(await Promise.all([h.e(188),h.e(341),h.e(751)]).then(h.bind(h,4751)))["WebGPURenderer"];s=a,r={...e,...e.webgpu};break}if("webgl"===n&&(o=e.failIfMajorPerformanceCaveat??u.k.defaultOptions.failIfMajorPerformanceCaveat,d=void 0===d?(()=>{var e={stencil:!0,failIfMajorPerformanceCaveat:o??u.k.defaultOptions.failIfMajorPerformanceCaveat};try{if(!m.e.get().getWebGLRenderingContext())return!1;let t=m.e.get().createCanvas().getContext("webgl",e);var i,s=!!t?.getContextAttributes()?.stencil;return t&&(i=t.getExtension("WEBGL_lose_context"))&&i.loseContext(),t=null,s}catch(t){return!1}})():d)){a=(await Promise.all([h.e(188),h.e(341),h.e(151)]).then(h.bind(h,3151)))["WebGLRenderer"];s=a,r={...e,...e.webgl};break}if("canvas"===n)throw r={...e},new Error("CanvasRenderer is not yet implemented")}var o,t;if(delete r.webgpu,delete r.webgl,s)return await(t=new s).init(r),t;throw new Error("No available renderer for the current environment")}var e=h(4263),r=h(4670);const n=class n{constructor(...t){this.stage=new e.mc,void 0!==t[0]&&(0,r.t)(r.l,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await W(e),n._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return(0,r.t)(r.l,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){var i=n._plugins.slice(0);i.reverse(),i.forEach(t=>{t.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};n._plugins=[];let i=n;s.XO.handleByList(s.Ag.Application,i._plugins);var f=h(268);class z{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;var e=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let t=0;t<i;t++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t)&&!this._isLoading&&this._next()}}var g=h(1979),a=h(4492),D={extension:s.Ag.CacheParser,test:t=>Array.isArray(t)&&t.every(t=>t instanceof a.g),getCacheableAssets:(t,e)=>{const s={};return t.forEach(i=>{e.forEach((t,e)=>{s[i+(0===e?"":e+1)]=t})}),s}};async function o(i){if("Image"in globalThis)return new Promise(t=>{var e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{var t=await(await fetch(i)).blob();await createImageBitmap(t)}catch(t){return!1}return!0}return!1}var U={extension:{type:s.Ag.DetectionParser,priority:1},test:async()=>o("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(t=>"avif"!==t)};const y=["png","jpg","jpeg"];var G={extension:{type:s.Ag.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...y],remove:async t=>t.filter(t=>!y.includes(t))};const X="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function _(t){return!X&&""!==document.createElement("video").canPlayType(t)}var Y={extension:{type:s.Ag.DetectionParser,priority:0},test:async()=>_("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(t=>"mp4"!==t&&"m4v"!==t)},V={extension:{type:s.Ag.DetectionParser,priority:0},test:async()=>_("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(t=>"ogv"!==t)},N={extension:{type:s.Ag.DetectionParser,priority:0},test:async()=>_("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(t=>"webm"!==t)},j={extension:{type:s.Ag.DetectionParser,priority:0},test:async()=>o("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(t=>"webp"!==t)},v=h(2927),x=h(2406),w=h(2217);class q{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(n,a){const o={promise:null,parser:null};return o.promise=(async()=>{let e=null,i=null;if(!a.loadParser||(i=this._parserHash[a.loadParser])||(0,f.R)(`[Assets] specified load parser "${a.loadParser}" not found while loading `+n),!i){for(let t=0;t<this.parsers.length;t++){var s=this.parsers[t];if(s.load&&s.test?.(n,a,this)){i=s;break}}if(!i)return(0,f.R)(`[Assets] ${n} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}e=await i.load(n,a,this),o.parser=i;for(let t=0;t<this.parsers.length;t++){var r=this.parsers[t];r.parse&&r.parse&&await r.testParse?.(e,a,this)&&(e=await r.parse(e,a,this)||e,o.parser=r)}return e})(),o}async load(t,s){this._parsersValidated||this._validateParsers();let r=0;const n={};var e=(0,w.a)(t),t=(0,x.z)(t,t=>({alias:[t],src:t}));const a=t.length;var i=t.map(async e=>{var i=v.A.toAbsolute(e.src);if(!n[e.src])try{this.promiseCache[i]||(this.promiseCache[i]=this._getLoadPromiseAndParser(i,e)),n[e.src]=await this.promiseCache[i].promise,s&&s(++r/a)}catch(t){throw delete this.promiseCache[i],delete n[e.src],new Error(`[Loader.load] Failed to load ${i}.
`+t)}});return await Promise.all(i),e?n[t[0].src]:n}async unload(t){t=(0,x.z)(t,t=>({alias:[t],src:t})).map(async t=>{var e,i=v.A.toAbsolute(t.src),s=this.promiseCache[i];s&&(e=await s.promise,delete this.promiseCache[i],await s.parser?.unload?.(e,t,this))});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&(0,f.R)(`[Assets] loadParser name conflict "${e.name}"`):(0,f.R)("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}}function b(t,e){if(Array.isArray(e)){for(const i of e)if(t.startsWith("data:"+i))return!0;return!1}return t.startsWith("data:"+e)}function A(t,e){t=t.split("?")[0],t=v.A.extname(t).toLowerCase();return Array.isArray(e)?e.includes(t):t===e}var S=h(4589);var $={extension:{type:s.Ag.LoadParser,priority:S.T.Low},name:"loadJson",test(t){return b(t,"application/json")||A(t,".json")},async load(t){return await(await m.e.get().fetch(t)).json()}};var Z={name:"loadTxt",extension:{type:s.Ag.LoadParser,priority:S.T.Low},test(t){return b(t,"text/plain")||A(t,".txt")},async load(t){return await(await m.e.get().fetch(t)).text()}};const K=["normal","bold","100","200","300","400","500","600","700","800","900"],Q=[".ttf",".otf",".woff",".woff2"],J=["font/ttf","font/otf","font/woff","font/woff2"],tt=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;const et=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;var it={extension:{type:s.Ag.LoadParser,priority:S.T.Low},name:"loadWebFont",test(t){return b(t,J)||A(t,Q)},async load(e,t){var i=m.e.get().getFontFaceSet();if(i){var s=[],r=t.data?.family??function(t){var e=v.A.extname(t);let i=0<(t=v.A.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1))).length;for(const r of t)if(!r.match(tt)){i=!1;break}let s=t.join(" ");return s=i?s:`"${s.replace(/[\\"]/g,"\\$&")}"`}(e),n=t.data?.weights?.filter(t=>K.includes(t))??["normal"],a=t.data??{};for(let t=0;t<n.length;t++){var o=n[t],h=new FontFace(r,`url(${h=e,et.test(h)?h:encodeURI(h)})`,{...a,weight:o});await h.load(),i.add(h),s.push(h)}return g.l.set(r+"-and-url",{url:e,fontFaces:s}),1===s.length?s[0]:s}return(0,f.R)("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(t=>{g.l.remove(t.family),m.e.get().getFontFaceSet().delete(t)})}},P=h(8293),M=h(2694),C=h(1173);function k(t,e=1){t=C.x.RETINA_PREFIX?.exec(t);return t?parseFloat(t[1]):e}function T(t,e,i){t.label=i,t._sourceOrigin=i;var s=new a.g({source:t,label:i});const r=()=>{delete e.promiseCache[i],g.l.has(i)&&g.l.remove(i)};return s.source.once("destroy",()=>{e.promiseCache[i]&&((0,f.R)("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),r())}),s.once("destroy",()=>{t.destroyed||((0,f.R)("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),s}var st={extension:{type:s.Ag.LoadParser,priority:S.T.Low},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return b(t,"image/svg+xml")||A(t,".svg")},async load(t,e,i){return e.data.parseAsGraphicsContext??this.config.parseAsGraphicsContext?async function(t){var t=await m.e.get().fetch(t),t=await t.text(),e=new M.T;return e.svg(t),e}(t):async function(t,e,i,s){const r=await m.e.get().fetch(t),n=await r.blob(),a=URL.createObjectURL(n),o=new Image,h=(o.src=a,o.crossOrigin=s,await o.decode(),URL.revokeObjectURL(a),document.createElement("canvas")),l=h.getContext("2d"),u=e.data?.resolution||k(t),d=e.data?.width??o.width,c=e.data?.height??o.height,{parseAsGraphicsContext:p,...f}=(h.width=d*u,h.height=c*u,l.drawImage(o,0,0,d*u,c*u),e.data),g=new P.b({resource:h,alphaMode:"premultiply-alpha-on-upload",resolution:u,...f});return T(g,i,t)}(t,e,i,this.config.crossOrigin)},unload(t){t.destroy(!0)}};let E=null;class I{constructor(){E=E||URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";\n    async function checkImageBitmap() {\n      try {\n        if (typeof createImageBitmap !== "function")\n          return false;\n        const response = await fetch(WHITE_PNG);\n        const imageBlob = await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\n      } catch (e) {\n        return false;\n      }\n    }\n    void checkImageBitmap().then((result) => {\n      self.postMessage(result);\n    });\n\n})();\n'],{type:"application/javascript"})),this.worker=new Worker(E)}}I.revokeObjectURL=function(){E&&(URL.revokeObjectURL(E),E=null)};let B=null;class rt{constructor(){B=B||URL.createObjectURL(new Blob(["(function () {\n    'use strict';\n\n    async function loadImageBitmap(url) {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n      }\n      const imageBlob = await response.blob();\n      const imageBitmap = await createImageBitmap(imageBlob);\n      return imageBitmap;\n    }\n    self.onmessage = async (event) => {\n      try {\n        const imageBitmap = await loadImageBitmap(event.data.data[0]);\n        self.postMessage({\n          data: imageBitmap,\n          uuid: event.data.uuid,\n          id: event.data.id\n        }, [imageBitmap]);\n      } catch (e) {\n        self.postMessage({\n          error: e,\n          uuid: event.data.uuid,\n          id: event.data.id\n        });\n      }\n    };\n\n})();\n"],{type:"application/javascript"})),this.worker=new Worker(B)}}rt.revokeObjectURL=function(){B&&(URL.revokeObjectURL(B),B=null)};let nt=0,R;const at=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return void 0===this._isImageBitmapSupported&&(this._isImageBitmapSupported=new Promise(e=>{const i=(new I)["worker"];i.addEventListener("message",t=>{i.terminate(),I.revokeObjectURL(),e(t.data)})})),this._isImageBitmapSupported}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){void 0===R&&(R=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<R&&(this._createdWorkers++,(t=(new rt).worker).addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){void 0!==t.error?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(i,s){await this._initWorkers();var t=new Promise((t,e)=>{this._queue.push({id:i,arguments:s,resolve:t,reject:e})});return this._next(),t}_next(){var t,e,i;this._queue.length&&(t=this._getWorker())&&(i=(e=this._queue.pop()).id,this._resolveHash[nt]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:nt++,id:i}))}},ot=[".jpeg",".jpg",".png",".webp",".avif"],ht=["image/jpeg","image/png","image/webp","image/avif"];var lt={name:"loadTextures",extension:{type:s.Ag.LoadParser,priority:S.T.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return b(t,ht)||A(t,ot)},async load(e,t,i){let s=null;return s=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await at.isImageBitmapSupported()?await at.loadImageBitmap(e):await async function(t){var e,i=await m.e.get().fetch(t);if(i.ok)return e=await i.blob(),await createImageBitmap(e);throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${i.status} `+i.statusText)}(e):await new Promise(t=>{(s=new Image).crossOrigin=this.config.crossOrigin,s.src=e,s.complete?t(s):s.onload=()=>{t(s)}}),T(new P.b({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||k(e),...t.data}),i,e)},unload(t){t.destroy(!0)}},L=h(6139),ut=h(6858);const dt=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],ct=dt.map(t=>"video/"+t.substring(1));function pt(t,e,i){void 0!==i||e.startsWith("data:")?!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous"):t.crossOrigin=function(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;t=new URL(t,document.baseURI);return t.hostname===e.hostname&&t.port===e.port&&t.protocol===e.protocol?"":"anonymous"}(e)}var ft={name:"loadVideo",extension:{type:s.Ag.LoadParser},config:null,test(t){var e=b(t,ct),t=A(t,dt);return e||t},async load(s,r,a){const o={...L.$.defaultOptions,resolution:r.data?.resolution||k(s),alphaMode:r.data?.alphaMode||await(0,ut.C)(),...r.data},h=document.createElement("video"),i={preload:!1!==o.autoLoad?"auto":void 0,"webkit-playsinline":!1!==o.playsinline?"":void 0,playsinline:!1!==o.playsinline?"":void 0,muted:!0===o.muted?"":void 0,loop:!0===o.loop?"":void 0,autoplay:!1!==o.autoPlay?"":void 0},t=(Object.keys(i).forEach(t=>{var e=i[t];void 0!==e&&h.setAttribute(t,e)}),!0===o.muted&&(h.muted=!0),pt(h,s,o.crossorigin),document.createElement("source"));let e;var n;return s.startsWith("data:")?e=s.slice(5,s.indexOf(";")):s.startsWith("blob:")||(n=s.split("?")[0].slice(s.lastIndexOf(".")+1).toLowerCase(),e=L.$.MIME_TYPES[n]||"video/"+n),t.src=s,e&&(t.type=e),new Promise(e=>{const i=async()=>{var n,t=new L.$({...o,resource:h});h.removeEventListener("canplay",i),r.data.preload&&(n=h,await new Promise((t,e)=>{function i(){r(),t()}function s(t){r(),e(t)}function r(){n.removeEventListener("canplaythrough",i),n.removeEventListener("error",s)}n.addEventListener("canplaythrough",i),n.addEventListener("error",s),n.load()})),e(T(t,a,s))};h.addEventListener("canplay",i),h.appendChild(t)})},unload(t){t.destroy(!0)}},gt={extension:s.Ag.ResolveParser,test:lt.test,parse:t=>({resolution:parseFloat(C.x.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})},mt={extension:s.Ag.ResolveParser,test:t=>C.x.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:gt.parse};const O=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new C.x,this.loader=new q,this.cache=g.l,this._backgroundLoader=new z(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized)(0,f.R)("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");else{if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let t=e.manifest;"string"==typeof t&&(t=await this.load(t)),this.resolver.addManifest(t)}var t=e.texturePreference?.resolution??1,t="number"==typeof t?[t]:t,i=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:t}}),e.preferences&&this.setPreferences(e.preferences)}}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();var i=(0,w.a)(t),t=(0,x.z)(t).map(t=>{var e;return"string"!=typeof t?((e=this.resolver.getAlias(t)).some(t=>!this.resolver.hasKey(t))&&this.add(t),Array.isArray(e)?e[0]:e):(this.resolver.hasKey(t)||this.add({alias:t,src:t}),t)}),s=this.resolver.resolve(t),s=await this._mapLoadToResolve(s,e);return i?s[t[0]]:s}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;"string"==typeof t&&(i=!0,t=[t]);const s=this.resolver.resolveBundle(t),r={};var n=Object.keys(s);let a=0,o=0;const h=()=>{e?.(++a/o)};n=n.map(e=>{var t=s[e];return o+=Object.keys(t).length,this._mapLoadToResolve(t,h).then(t=>{r[e]=t})});return await Promise.all(n),i?r[t[0]]:r}async backgroundLoad(t){this._initialized||await this.init();t=this.resolver.resolve(t="string"==typeof t?[t]:t);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(t){this._initialized||await this.init();t=this.resolver.resolveBundle(t="string"==typeof t?[t]:t);Object.values(t).forEach(t=>{this._backgroundLoader.add(Object.values(t))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return g.l.get(e);var i={};for(let t=0;t<e.length;t++)i[t]=g.l.get(e[t]);return i}async _mapLoadToResolve(t,e){t=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const s=await this.loader.load(t,e),r=(this._backgroundLoader.active=!0,{});return t.forEach(t=>{const e=s[t.src];var i=[t.src];t.alias&&i.push(...t.alias),i.forEach(t=>{r[t]=e}),g.l.set(i,e)}),r}async unload(t){this._initialized||await this.init();t=(0,x.z)(t).map(t=>"string"!=typeof t?t.src:t),t=this.resolver.resolve(t);await this._unloadFromResolved(t)}async unloadBundle(t){this._initialized||await this.init(),t=(0,x.z)(t);const e=this.resolver.resolveBundle(t);t=Object.keys(e).map(t=>this._unloadFromResolved(e[t]));await Promise.all(t)}async _unloadFromResolved(t){t=Object.values(t);t.forEach(t=>{g.l.remove(t.src)}),await this.loader.unload(t)}async _detectFormats(t){let i=[];t.preferredFormats&&(i=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const e of t.detections)t.skipDetections||await e.test()?i=await e.add(i):t.skipDetections||(i=await e.remove(i));return i=i.filter((t,e)=>i.indexOf(t)===e)}get detections(){return this._detections}setPreferences(i){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(t=>t in i).forEach(t=>{e.config[t]=i[t]})})}},yt=(s.XO.handleByList(s.Ag.LoadParser,O.loader.parsers).handleByList(s.Ag.ResolveParser,O.resolver.parsers).handleByList(s.Ag.CacheParser,O.cache.parsers).handleByList(s.Ag.DetectionParser,O.detections),s.XO.add(D,G,U,j,Y,V,N,$,Z,it,st,lt,ft,gt,mt),{loader:s.Ag.LoadParser,resolver:s.Ag.ResolveParser,cache:s.Ag.CacheParser,detection:s.Ag.DetectionParser});s.XO.handle(s.Ag.Asset,t=>{const i=t.ref;Object.entries(yt).filter(([t])=>!!i[t]).forEach(([t,e])=>s.XO.add(Object.assign(i[t],{extension:i[t].extension??e})))},t=>{const e=t.ref;Object.keys(yt).filter(t=>!!e[t]).forEach(t=>s.XO.remove(e[t]))});var _t=h(4935),vt=h(5101),xt=h(5438),wt=h(9252),bt=(h(6557),h(9408)),At=h(2812),St=h(9636);class Pt extends e.mc{constructor(t,e){const{text:i,resolution:s,style:r,anchor:n,width:a,height:o,roundPixels:h,...l}=t;super({...l}),this.batched=!0,this.resolution=null,this._didTextUpdate=!0,this._roundPixels=0,this._bounds=new St.c,this._boundsDirty=!0,this._styleClass=e,this.text=i??"",this.style=r,this.resolution=s??null,this.allowChildren=!1,this._anchor=new At.o({_onUpdate:()=>{this.onViewUpdate()}}),n&&(this.anchor=n),this.roundPixels=h??!1,a&&(this.width=a),o&&(this.height=o)}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}get style(){return this._style}set style(t){t=t||{},this._style?.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return(t=t||{}).width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){let i,s;s="object"!=typeof t?(i=t,e??t):(i=t.width,t.height??t.width),void 0!==i&&this._setWidth(i,this.bounds.width),void 0!==s&&this._setHeight(s,this.bounds.height)}addBounds(t){var e=this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}containsPoint(t){var e=this.bounds.maxX,i=this.bounds.maxY,s=-e*this.anchor.x;return t.x>=s&&t.x<=s+e&&(s=-i*this.anchor.y,t.y>=s)&&t.y<=s+i}onViewUpdate(){this._didChangeId+=4096,this._boundsDirty=!0,this.didViewUpdate||(this.didViewUpdate=!0,this._didTextUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}_getKey(){return this.text+":"+this._style.styleKey}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,("boolean"==typeof t?t:t?.style)&&this._style.destroy(t),this._style=null,this._text=null}}function Mt(t,e){let i=t[0]??{};return"string"!=typeof i&&!t[1]||((0,r.t)(r.l,`use new ${e}({ text: "hi!", style }) instead`),i={text:i,style:t[1]}),i}var Ct=h(7577),kt=h(2073);class Tt extends Pt{constructor(...t){super(Mt(t,"HtmlText"),Ct.I),this.renderPipeId="htmlText"}_updateBounds(){var t=this._bounds,e=this._style.padding,i=this._anchor,{width:s,height:r}=(0,kt.r)(this.text,this._style);t.minX=-i._x*s-e,t.maxX=t.minX+s,t.minY=-i._y*r-e,t.maxY=t.minY+r}}var Et=h(4016),It=h(8291);class Bt extends Pt{constructor(...t){super(Mt(t,"Text"),It.x),this.renderPipeId="text"}_updateBounds(){var t=this._bounds,e=this._style.padding,i=this._anchor,{width:s,height:r}=Et.P.measureText(this._text,this._style);t.minX=-i._x*s-e,t.maxX=t.minX+s,t.minY=-i._y*r-e,t.maxY=t.minY+r}}var Rt=h(7309),Lt=h(4486);h(6570);s.XO.add(t,F)},9313:(t,e,i)=>{"use strict";i.d(e,{u:()=>s});var l=i(1652),u=i(5101);class s{constructor(t=1,e=0,i=0,s=1,r=0,n=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=r,this.ty=n}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,s,r,n){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=r,this.ty=n,this}toArray(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e}apply(t,e){e=e||new u.b;var i=t.x,t=t.y;return e.x=this.a*i+this.c*t+this.tx,e.y=this.b*i+this.d*t+this.ty,e}applyInverse(t,e){e=e||new u.b;var i=this.a,s=this.b,r=this.c,n=this.d,a=this.tx,o=this.ty,h=1/(i*n+r*-s),l=t.x,t=t.y;return e.x=n*h*l+-r*h*t+(o*r-a*n)*h,e.y=i*h*t+-s*h*l+(-o*i+a*s)*h,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){var e=Math.cos(t),t=Math.sin(t),i=this.a,s=this.c,r=this.tx;return this.a=i*e-this.b*t,this.b=i*t+this.b*e,this.c=s*e-this.d*t,this.d=s*t+this.d*e,this.tx=r*e-this.ty*t,this.ty=r*t+this.ty*e,this}append(t){var e=this.a,i=this.b,s=this.c,r=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this}appendFrom(t,e){var i=t.a,s=t.b,r=t.c,n=t.d,a=t.tx,t=t.ty,o=e.a,h=e.b,l=e.c,u=e.d;return this.a=i*o+s*l,this.b=i*h+s*u,this.c=r*o+n*l,this.d=r*h+n*u,this.tx=a*o+t*l+e.tx,this.ty=a*h+t*u+e.ty,this}setTransform(t,e,i,s,r,n,a,o,h){return this.a=Math.cos(a+h)*r,this.b=Math.sin(a+h)*r,this.c=-Math.sin(a-o)*n,this.d=Math.cos(a-o)*n,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this}prepend(t){var e,i,s=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,i=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d),this.tx=s*t.a+this.ty*t.c+t.tx,this.ty=s*t.b+this.ty*t.d+t.ty,this}decompose(t){var e=this.a,i=this.b,s=this.c,r=this.d,n=t.pivot,a=-Math.atan2(-s,r),o=Math.atan2(i,e),h=Math.abs(a+o);return h<1e-5||Math.abs(l.TO-h)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(s*s+r*r),t.position.x=this.tx+(n.x*e+n.y*s),t.position.y=this.ty+(n.x*i+n.y*r),t}invert(){var t=this.a,e=this.b,i=this.c,s=this.d,r=this.tx,n=t*s-e*i;return this.a=s/n,this.b=-e/n,this.c=-i/n,this.d=t/n,this.tx=(i*this.ty-s*r)/n,this.ty=-(t*this.ty-e*r)/n,this}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.tx&&0===this.ty}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){var t=new s;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return n.identity()}static get shared(){return r.identity()}}const r=new s,n=new s},1652:(t,e,i)=>{"use strict";i.d(e,{TO:()=>s,Td:()=>n,bO:()=>r});const s=2*Math.PI,r=180/Math.PI,n=Math.PI/180},9939:(t,e,i)=>{"use strict";i.d(e,{U5:()=>function(t){return t+=0===t?1:0,--t,1+(t=(t=(t=(t=(t|=t>>>1)|t>>>2)|t>>>4)|t>>>8)|t>>>16)},f3:()=>function(t){return!(t&t-1||!t)}})},2812:(t,e,i)=>{"use strict";i.d(e,{o:()=>s});class s{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new s(t??this._observer,this._x,this._y)}set(t=0,e=t){return this._x===t&&this._y===e||(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}},5101:(t,e,i)=>{"use strict";i.d(e,{b:()=>s});class s{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new s(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return r.x=0,r.y=0,r}}const r=new s},5438:(t,e,i)=>{"use strict";i.d(e,{t:()=>s});var l=i(9252);class s{constructor(...t){this.type="polygon";let i=Array.isArray(t[0])?t[0]:t;if("number"!=typeof i[0]){var s=[];for(let t=0,e=i.length;t<e;t++)s.push(i[t].x,i[t].y);i=s}this.points=i,this.closePath=!0}clone(){var t=this.points.slice(),t=new s(t);return t.closePath=this.closePath,t}contains(i,s){let r=!1;var n=this.points.length/2;for(let t=0,e=n-1;t<n;e=t++){var a=this.points[2*t],o=this.points[2*t+1],h=this.points[2*e],l=this.points[2*e+1];s<o!=s<l&&i<(s-o)/(l-o)*(h-a)+a&&(r=!r)}return r}strokeContains(e,i,t){var t=t/2,s=t*t,r=this["points"],n=r.length-(this.closePath?0:2);for(let t=0;t<n;t+=2)if(function(t,e,i,s,r,n){var a=r-i,o=n-s,h=a*a+o*o;let l=-1;0!=h&&(l=((t-i)*a+(e-s)*o)/h);let u,d;return d=l<0?(u=i,s):1<l?(u=r,n):(u=i+l*a,s+l*o),h=t-u,r=e-d,h*h+r*r}(e,i,r[t],r[t+1],r[(t+2)%r.length],r[(t+3)%r.length])<=s)return!0;return!1}getBounds(t){t=t||new l.M;var i=this.points;let s=1/0,r=-1/0,n=1/0,a=-1/0;for(let t=0,e=i.length;t<e;t+=2){var o=i[t],h=i[t+1];s=o<s?o:s,r=o>r?o:r,n=h<n?h:n,a=h>a?h:a}return t.x=s,t.width=r-s,t.y=n,t.height=a-n,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>t+", "+e,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}},9252:(t,e,i)=>{"use strict";i.d(e,{M:()=>s});e=i(5101);const g=[new e.b,new e.b,new e.b,new e.b];class s{constructor(t=0,e=0,i=0,s=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new s(0,0,0,0)}clone(){return new s(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i){var s,r,{width:n,height:a}=this;return!(n<=0||a<=0)&&(s=this.x,r=this.y,s-i/2<=t)&&t<=s+n+i/2&&r-i/2<=e&&e<=r+a+i/2&&!(s+i/2<t&&t<s+n-i/2&&r+i/2<e&&e<r+a-i/2)}intersects(t,e){var i,s,r,n,a,o,h,l,u,d,c,p,f;return e?(i=this.left,s=this.right,r=this.top,n=this.bottom,!(s<=i||n<=r||(a=g[0].set(t.left,t.top),f=g[1].set(t.left,t.bottom),o=g[2].set(t.right,t.top),h=g[3].set(t.right,t.bottom),o.x<=a.x)||f.y<=a.y||0===(l=Math.sign(e.a*e.d-e.b*e.c))||(e.apply(a,a),e.apply(f,f),e.apply(o,o),e.apply(h,h),Math.max(a.x,f.x,o.x,h.x)<=i)||Math.min(a.x,f.x,o.x,h.x)>=s||Math.max(a.y,f.y,o.y,h.y)<=r||Math.min(a.y,f.y,o.y,h.y)>=n||(u=(e=l*(f.y-a.y))*i+(f=l*(a.x-f.x))*r,d=e*s+f*r,c=e*i+f*n,p=e*s+f*n,Math.max(u,d,c,p)<=e*a.x+f*a.y)||Math.min(u,d,c,p)>=e*h.x+f*h.y||(c=(u=l*(a.y-o.y))*i+(d=l*(o.x-a.x))*r,p=u*s+d*r,e=u*i+d*n,f=u*s+d*n,Math.max(c,p,e,f)<=u*a.x+d*a.y)||Math.min(c,p,e,f)>=u*h.x+d*h.y)):(l=(this.x<t.x?t:this).x,!((this.right>t.right?t:this).right<=l)&&(this.y<t.y?t:this).y<(this.bottom>t.bottom?t:this).bottom)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(t-s,0),this}ceil(t=1,e=.001){var i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=t-s,this}getBounds(t){return(t=t||new s).copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}},8634:(t,e,i)=>{"use strict";i.d(e,{J:()=>o});var s=i(949),r=i(1132),e=i(6011);const n=new Float32Array(1),a=new Uint32Array(1);class o extends e.V{constructor(){var t=new s.h({data:n,label:"attribute-batch-buffer",usage:r.S.VERTEX|r.S.COPY_DST,shrinkToFit:!1});super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:24,offset:0,location:1},aUV:{buffer:t,format:"float32x2",stride:24,offset:8,location:3},aColor:{buffer:t,format:"unorm8x4",stride:24,offset:16,location:0},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:24,offset:20,location:2}},indexBuffer:new s.h({data:a,label:"index-batch-buffer",usage:r.S.INDEX|r.S.COPY_DST,shrinkToFit:!1})})}}},341:(t,e,i)=>{"use strict";i.d(e,{w:()=>function(e,i){let s=0;for(let t=0;t<i;t++)s=31*s+e[t].uid>>>0;return l[s]||function(e,t){var i={};let s=0;for(let t=0;t<h.k;t++){var r=t<e.length?e[t]:o.g.EMPTY.source;i[s++]=r.source,i[s++]=r.style}var n=new a.T(i);return l[t]=n}(e,s)}});var a=i(3513),o=i(4492),h=i(9104);const l={}},1478:(t,e,i)=>{"use strict";i.d(e,{i:()=>h});var s=i(133);class r{constructor(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[t+"View"]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}}}var n=i(6736),a=i(1957);function m(t,e){return"no-premultiply-alpha"===e.alphaMode&&a.Q[t]||t}class y{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){var e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}var _=i(9104);class v{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.blendMode="normal",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}let x=0;const o=class o{constructor(t={}){this.uid=(0,s.L)("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._vertexSize=6,this._elements=[],this._batchPool=[],this._batchPoolIndex=0,this._textureBatchPool=[],this._textureBatchPoolIndex=0;var{vertexSize:t,indexSize:e}=t={...o.defaultOptions,...t};this.attributeBuffer=new r(t*this._vertexSize*4),this.indexBuffer=new Uint16Array(e)}begin(){this.batchIndex=0,this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0,this._batchPoolIndex=0,this._textureBatchPoolIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){(this._elements[this.elementSize++]=t).indexStart=this.indexSize,t.location=this.attributeSize,(t.batcher=this).indexSize+=t.indexSize,this.attributeSize+=t.vertexSize*this._vertexSize}checkAndUpdateTexture(t,e){var i=t.batch.textures.ids[e._source.uid];return!(!i&&0!==i||(t.textureId=i,t.texture=e,0))}updateElement(t){this.dirty=!0,t.packAttributes(this.attributeBuffer.float32View,this.attributeBuffer.uint32View,t.location,t.textureId)}break(a){var o=this._elements;let h=this._textureBatchPool[this._textureBatchPoolIndex++]||new y;if(h.clear(),o[this.elementStart]){var t=o[this.elementStart];let e=m(t.blendMode,t.texture._source);4*this.attributeSize>this.attributeBuffer.size&&this._resizeAttributeBuffer(4*this.attributeSize),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);var l=this.attributeBuffer.float32View,u=this.attributeBuffer.uint32View,d=this.indexBuffer;let i=this._batchIndexSize,s=this._batchIndexStart,r="startBatch",n=this._batchPool[this._batchPoolIndex++]||new v;for(let t=this.elementStart;t<this.elementSize;++t){var c=o[t],p=(o[t]=null,c.texture),p=p._source,f=m(c.blendMode,p),g=e!==f;p._batchTick!==x||g?(p._batchTick=x,(h.count>=_.k||g)&&(this._finishBatch(n,s,i-s,h,e,a,r),r="renderBatch",s=i,e=f,(h=this._textureBatchPool[this._textureBatchPoolIndex++]||new y).clear(),n=this._batchPool[this._batchPoolIndex++]||new v,++x),c.textureId=p._textureBindLocation=h.count,h.ids[p.uid]=h.count,h.textures[h.count++]=p,c.batch=n,i+=c.indexSize,c.packAttributes(l,u,c.location,c.textureId),c.packIndex(d,c.indexStart,c.location/this._vertexSize)):(c.textureId=p._textureBindLocation,i+=c.indexSize,c.packAttributes(l,u,c.location,c.textureId),c.packIndex(d,c.indexStart,c.location/this._vertexSize),c.batch=n)}0<h.count&&(this._finishBatch(n,s,i-s,h,e,a,r),s=i,++x),this.elementStart=this.elementSize,this._batchIndexStart=s,this._batchIndexSize=i}}_finishBatch(t,e,i,s,r,n,a){t.gpuBindGroup=null,t.action=a,t.batcher=this,t.textures=s,t.blendMode=r,t.start=e,t.size=i,++x,n.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){4*t<=this.attributeBuffer.size||this._resizeAttributeBuffer(4*t)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){t=Math.max(t,2*this.attributeBuffer.size),t=new r(t);(0,n.W)(this.attributeBuffer.rawBinaryData,t.rawBinaryData),this.attributeBuffer=t}_resizeIndexBuffer(t){var e=this.indexBuffer,t=Math.max(t,1.5*e.length),i=new(65535<(t+=t%2)?Uint32Array:Uint16Array)(t);if(i.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let t=0;t<e.length;t++)i[t]=e[t];else(0,n.W)(e.buffer,i.buffer);this.indexBuffer=i}destroy(){for(let t=0;t<this.batches.length;t++)this.batches[t].destroy();this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t].batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};o.defaultOptions={vertexSize:4,indexSize:6};let h=o},9104:(t,e,i)=>{"use strict";i.d(e,{k:()=>s});const s=16},8480:(t,e,i)=>{"use strict";var s=i(8507),r=i(6844),n=i(9636),a=i(9443);const o=new n.c;function h(t,e,i){var s=o;t.measurable=!0,(0,a.fB)(t,i,s),e.addBoundsMask(s),t.measurable=!1}var l=i(7269),u=i(2208),d=i(268);function c(t,e,i){var s=u.o.get(),r=(t.measurable=!0,u.u.get().identity()),i=function t(e,i,s){if(!e)return(0,d.R)("Mask bounds, renderable is not inside the root container"),s;e!==i&&(t(e.parent,i,s),e.updateLocalTransform(),s.append(e.localTransform));return s}(t,i,r);(0,l.n)(t,s,i),t.measurable=!1,e.addBoundsMask(s),u.u.return(r),u.o.return(s)}class p{constructor(t){this.priority=0,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof r.k),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){h(this.mask,t,e)}addLocalBounds(t,e){c(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof r.k}}p.extension=s.Ag.MaskEffect;class f{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return"number"==typeof t}}f.extension=s.Ag.MaskEffect;var g=i(4263);class m{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){h(this.mask,t,e)}addLocalBounds(t,e){c(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof g.mc}}m.extension=s.Ag.MaskEffect;var n=i(2518),y=i(4884),_=i(8293),v=i(6139);i(6557);s.XO.add(p,f,m,v.$,_.b,y.q,n.P)},1257:(t,e,i)=>{"use strict";i.d(e,{u:()=>s});var s=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(s||{})},3513:(t,e,i)=>{"use strict";i.d(e,{T:()=>s});class s{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const s in t){var i=t[s];this.setResource(i,e++)}this._updateKey()}_updateKey(){if(this._dirty){this._dirty=!1;var e=[];let t=0;for(const i in this.resources)e[t++]=this.resources[i]._resourceId;this._key=e.join("|")}}setResource(t,e){var i=this.resources[e];t!==i&&(i&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){var e=this.resources;for(const i in e)e[i]._touched=t}destroy(){var t=this.resources;for(const e in t)t[e].off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){var e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}},949:(t,e,i)=>{"use strict";i.d(e,{h:()=>r});var e=i(4486),a=i(133),s=i(1132);class r extends e.A{constructor(t){let{data:e,size:i}=t;var{usage:t,label:s,shrinkToFit:r}=t,n=(super(),this.uid=(0,a.L)("buffer"),this._resourceType="buffer",this._resourceId=(0,a.L)("resource"),this._touched=0,this._updateID=1,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i=i??e?.byteLength,!!e);this.descriptor={size:i,usage:t,mappedAtCreation:n,label:s},this.shrinkToFit=r??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get static(){return!!(this.descriptor.usage&s.S.STATIC)}set static(t){t?this.descriptor.usage|=s.S.STATIC:this.descriptor.usage&=~s.S.STATIC}setDataWithSize(t,e,i){this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t||(e=this._data,this._data=t,e.length===t.length)||!this.shrinkToFit&&t.byteLength<e.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=(0,a.L)("resource"),this.emit("change",this))}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}},1132:(t,e,i)=>{"use strict";i.d(e,{S:()=>s});var s=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(s||{})},6736:(t,e,i)=>{"use strict";i.d(e,{W:()=>function(t,e){var i=t.byteLength/8|0,s=new Float64Array(t,0,i),r=new Float64Array(e,0,i),r=(r.set(s),t.byteLength-8*i);0<r&&(s=new Uint8Array(t,8*i,r),new Uint8Array(e,8*i,r).set(s))}})},6011:(t,e,i)=>{"use strict";i.d(e,{V:()=>r});var e=i(4486),a=i(9636),o=i(133),h=i(949),s=i(1132);function l(e,i){if(!(e instanceof h.h)){let t=i?s.S.INDEX:s.S.VERTEX;e instanceof Array&&(t=i?(e=new Uint32Array(e),s.S.INDEX|s.S.COPY_DST):(e=new Float32Array(e),s.S.VERTEX|s.S.COPY_DST)),e=new h.h({data:e,label:i?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return e}class r extends e.A{constructor(t){var{attributes:e,indexBuffer:i,topology:s}=t;super(),this.uid=(0,o.L)("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new a.c,this._boundsDirty=!0,this.attributes=e,this.buffers=[],this.instanceCount=t.instanceCount||1;for(const n in e){var r=e[n]=((r=(r=e[n])instanceof h.h||Array.isArray(r)||r.BYTES_PER_ELEMENT?{buffer:r}:r).buffer=l(r.buffer,!1),r);-1===this.buffers.indexOf(r.buffer)&&(this.buffers.push(r.buffer),r.buffer.on("update",this.onBufferUpdate,this),r.buffer.on("change",this.onBufferUpdate,this))}i&&(this.indexBuffer=l(i,!0),this.buffers.push(this.indexBuffer)),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const e in this.attributes){var t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;var t=this,n="aPosition",a=this._bounds;if(t=t.getAttribute(n)){var o=t.buffer.data;let e=1/0,i=1/0,s=-1/0,r=-1/0;var n=o.BYTES_PER_ELEMENT,h=(t.offset||0)/n,l=(t.stride||8)/n;for(let t=h;t<o.length;t+=l){var u=o[t],d=o[t+1];u>s&&(s=u),d>r&&(r=d),u<e&&(e=u),d<i&&(i=d)}a.minX=e,a.minY=i,a.maxX=s,a.maxY=r}else a.minX=0,a.minY=0,a.maxX=0,a.maxY=0;return a}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(t=>t.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}},848:(t,e,i)=>{"use strict";i.d(e,{L:()=>r});var s=i(133);class r{constructor(){this.uid=(0,s.L)("instructionSet"),this.instructions=[],this.instructionSize=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}},1957:(t,e,i)=>{"use strict";i.d(e,{K:()=>r,Q:()=>s});const s={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var r=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=3]="RENDERING_MASK_REMOVE",t[t.NONE=4]="NONE",t))(r||{})},2855:(t,e,i)=>{"use strict";i.d(e,{k:()=>d});var s=i(2577),r=i(4263),n=i(4577),a=i(4670),o=i(1257),h=i(7729),e=i(4486);const l=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],u=class u extends e.A{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name;var e=[...l,...t.runners??[]];this._addRunners(...e),this._addSystems(t.systems),this._addPipes(t.renderPipes,t.renderPipeAdaptors),this._unsafeEvalCheck()}async init(e={}){for(const t in this._systemsHash)e={...this._systemsHash[t].constructor.defaultOptions,...e};e={...u.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let t=0;t<this.runners.init.items.length;t++)await this.runners.init.items[t].init(e);this._initOptions=e}render(t,e){let i=t;i instanceof r.mc&&(i={container:i},e)&&((0,a.t)(a.l,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor=this.background.colorRgba),i.clearColor&&(t=Array.isArray(i.clearColor)&&4===i.clearColor.length,i.clearColor=t?i.clearColor:s.Q.shared.setValue(i.clearColor).toArray()),i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height)}clear(t={}){t.target||(t.target=this.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=o.u.ALL);var{clear:t,clearColor:e,target:i}=t;s.Q.shared.setValue(e??this.background.colorRgba),this.renderTarget.clear(i,t,s.Q.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(t=>{this.runners[t]=new h.C(t)})}_addSystems(t){let e;for(e in t){var i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){var i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const s in this.runners)this.runners[s].add(i);return this}_addPipes(t,e){const s=e.reduce((t,e)=>(t[e.name]=e.value,t),{});t.forEach(t=>{var e=t.value,t=t.name,i=s[t];this.renderPipes[t]=new e(this,i?new i:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!(0,n.f)())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};u.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let d=u},7729:(t,e,i)=>{"use strict";i.d(e,{C:()=>s});class s{constructor(t){this.items=[],this._name=t}emit(i,s,r,n,a,o,h,l){var{name:u,items:d}=this;for(let t=0,e=d.length;t<e;t++)d[t][u](i,s,r,n,a,o,h,l);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){t=this.items.indexOf(t);return-1!==t&&this.items.splice(t,1),this}contains(t){return-1!==this.items.indexOf(t)}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}},4492:(t,e,i)=>{"use strict";i.d(e,{g:()=>P});var e=i(4486),s=i(9313);const r=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],n=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],o=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],h=[],l=[],u=Math.sign;for(let e=0;e<16;e++){var d=[];h.push(d);for(let t=0;t<16;t++){var c=u(r[e]*r[t]+a[e]*n[t]),p=u(n[e]*r[t]+o[e]*n[t]),f=u(r[e]*a[t]+a[e]*o[t]),g=u(n[e]*a[t]+o[e]*o[t]);for(let t=0;t<16;t++)if(r[t]===c&&n[t]===p&&a[t]===f&&o[t]===g){d.push(t);break}}}for(let t=0;t<16;t++){var m=new s.u;m.set(r[t],n[t],a[t],o[t],0,0),l.push(m)}const y={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>r[t],uY:t=>n[t],vX:t=>a[t],vY:t=>o[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>h[t][e],sub:(t,e)=>h[t][y.inv(e)],rotate180:t=>4^t,isVertical:t=>2==(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?0<=e?y.S:y.N:2*Math.abs(e)<=Math.abs(t)?0<t?y.E:y.W:0<e?0<t?y.SE:y.SW:0<t?y.NE:y.NW,matrixAppendRotationInv:(t,e,i=0,s=0)=>{e=l[y.inv(e)];e.tx=i,e.ty=s,t.append(e)}};var _=i(9252),v=i(133),x=i(4670),w=()=>{},b=i(2518),A=i(6932),S=i(1196);class P extends e.A{constructor({source:t,label:e,frame:i,orig:s,trim:r,defaultAnchor:n,defaultBorders:a,rotate:o,dynamic:h}={}){super(),this.uid=(0,v.L)("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new _.M,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=t?.source??new A.v,this.noFrame=!i,i?this.frame.copyFrom(i):({width:e,height:t}=this._source,this.frame.width=e,this.frame.height=t),this.orig=s||this.frame,this.trim=r,this.rotate=o??0,this.defaultAnchor=n,this.defaultBorders=a,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),(this._source=t).on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new S.N(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){var t,e,i,s,{uvs:r,frame:n}=this,{width:a,height:o}=this._source,h=n.x/a,l=n.y/o,a=n.width/a,n=n.height/o,o=this.rotate;o?(i=h+(t=a/2),s=l+(e=n/2),o=y.add(o,y.NW),r.x0=i+t*y.uX(o),r.y0=s+e*y.uY(o),o=y.add(o,2),r.x1=i+t*y.uX(o),r.y1=s+e*y.uY(o),o=y.add(o,2),r.x2=i+t*y.uX(o),r.y2=s+e*y.uY(o),o=y.add(o,2),r.x3=i+t*y.uX(o),r.y3=s+e*y.uY(o)):(r.x0=h,r.y0=l,r.x1=h+a,r.y1=l,r.x2=h+a,r.y2=l+n,r.x3=h,r.y3=l+n)}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return(0,x.t)(x.l,"Texture.baseTexture is now Texture.source"),this._source}}P.EMPTY=new P({label:"EMPTY",source:new A.v({label:"EMPTY"})}),P.EMPTY.destroy=w,P.WHITE=new P({source:new b.P({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),P.WHITE.destroy=w},1196:(t,e,i)=>{"use strict";i.d(e,{N:()=>r});var s=i(9313);const n=new s.u;class r{constructor(t,e){this.mapCoord=new s.u,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?t.width<10?0:.5:e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,i){void 0===i&&(i=e);var s=this.mapCoord;for(let t=0;t<e.length;t+=2){var r=e[t],n=e[t+1];i[t]=r*s.a+n*s.c+s.tx,i[t+1]=r*s.b+n*s.d+s.ty}return i}update(){var t=this._texture,e=(this._updateID++,t.uvs),e=(this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0),t.orig),i=t.trim,e=(i&&(n.set(e.width/i.width,0,0,e.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(n)),t.source),i=this.uClampFrame,s=this.clampMargin/e._resolution,r=this.clampOffset;return i[0]=(t.frame.x+s+r)/e.width,i[1]=(t.frame.y+s+r)/e.height,i[2]=(t.frame.x+t.frame.width-s+r)/e.width,i[3]=(t.frame.y+t.frame.height-s+r)/e.height,this.uClampOffset[0]=r/e.pixelWidth,this.uClampOffset[1]=r/e.pixelHeight,this.isSimple=t.frame.width===e.width&&t.frame.height===e.height&&0===t.rotate,!0}}},2518:(t,e,i)=>{"use strict";i.d(e,{P:()=>s});e=i(8507);class s extends i(6932).v{constructor(t){var e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i=i||(e instanceof Float32Array?"rgba32float":e instanceof Int32Array||e instanceof Uint32Array?"rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?"rgba16uint":(0 instanceof Int8Array,"bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}s.extension=e.Ag.TextureSource},4884:(t,e,i)=>{"use strict";i.d(e,{q:()=>r});var s=i(1761),e=i(8507);class r extends i(6932).v{constructor(t){t.resource||(t.resource=s.e.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity)||(t.width/=t.resolution),t.height||(t.height=t.resource.height,t.autoDensity)||(t.height/=t.resolution),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity;var e=t.resource;this.pixelWidth===e.width&&this.pixelWidth===e.height||this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=this.width+"px",this.resource.style.height=this.height+"px"),this.resource.width===this.pixelWidth&&this.resource.height===this.pixelHeight||(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){t=super.resize(t,e,i);return t&&this.resizeCanvas(),t}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}}r.extension=e.Ag.TextureSource},8293:(t,e,i)=>{"use strict";i.d(e,{b:()=>n});var s=i(1761),e=i(8507),r=i(268);class n extends i(6932).v{constructor(t){var e;t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement&&((e=s.e.get().createCanvas(t.resource.width,t.resource.height)).getContext("2d").drawImage(t.resource,0,0),t.resource=e,(0,r.R)("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")),super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}}n.extension=e.Ag.TextureSource},6932:(t,e,i)=>{"use strict";i.d(e,{v:()=>u});var e=i(4486),s=i(9939);var r=i(133),n=i(4670);const a=Object.create(null);const o=class o extends e.A{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...o.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){(0,n.t)(n.l,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),1<this._maxAnisotropy&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){var t,e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-`+this._maxAnisotropy;return this._sharedResourceId=(e=e,void 0===(t=a[e])&&(a[e]=(0,r.L)("resource")),t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};o.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let h=o;const l=class l extends e.A{constructor(t={}){super(),this.options=t,this.uid=(0,r.L)("textureSource"),this._resourceType="textureSource",this._resourceId=(0,r.L)("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...l.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new h(function(t){var e={};for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){var t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=(0,r.L)("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){var t=this["resource"];return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){var t=this["resource"];return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i=i||this._resolution,t=t||this.width,e=e||this.height;t=Math.round(t*i),e=Math.round(e*i);return this.width=t/i,this.height=e/i,this._resolution=i,(this.pixelWidth!==t||this.pixelHeight!==e)&&(this._refreshPOT(),this.pixelWidth=t,this.pixelHeight=e,this.emit("resize",this),this._resourceId=(0,r.L)("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&1<this.mipLevelCount&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=(0,s.f3)(this.pixelWidth)&&(0,s.f3)(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};l.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let u=l},6139:(t,e,i)=>{"use strict";i.d(e,{$:()=>a});var e=i(8507),s=i(7309),r=i(6858),i=i(6932);const n=class n extends i.v{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...n.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==t.autoPlay,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==t.autoLoad&&this.load()}updateFrame(){var t;this.destroyed||(this._updateFPS&&(t=s.R.shared.elapsedMS*this.resource.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)),(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update())}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(!this._load){const i=this.resource,s=this.options;(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart),i.addEventListener("pause",this._onPlayStop),i.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(s.preload||i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlayThrough),i.addEventListener("error",this._onError,!0)),this.alphaMode=await(0,r.C)(),this._load=new Promise((t,e)=>{this.isValid?t(this):(this._resolve=t,this._reject=e,void 0!==s.preloadTimeoutMs&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${s.preloadTimeoutMs}ms`))})),i.load())})}return this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){var t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return 2<this.resource.readyState}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){var t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();var t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(s.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(s.R.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(s.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||globalThis.VideoFrame&&t instanceof VideoFrame}};n.extension=e.Ag.TextureSource,n.defaultOptions={...i.v.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},n.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let a=n},6557:(t,e,i)=>{"use strict";var r=i(1979),s=i(8507),n=i(6932),a=i(4492);const o=[];function h(t={},e=!1){var i=t&&t.resource;const s=i?t.resource:t;i=i?t:{resource:t};return!e&&r.l.has(s)?r.l.get(s):((t=new a.g({source:function(t={}){var e=t&&t.resource,i=e?t.resource:t,s=e?t:{resource:t};for(let t=0;t<o.length;t++){var r=o[t];if(r.test(i))return new r(s)}throw new Error("Could not find a source type for resource: "+s.resource)}(i)})).on("destroy",()=>{r.l.has(s)&&r.l.remove(s)}),e||r.l.set(s,t),t)}s.XO.handleByList(s.Ag.TextureSource,o),a.g.from=function(t,e=!1){return"string"==typeof t?r.l.get(t):t instanceof n.v?new a.g({source:t}):h(t,e)}},4263:(t,e,i)=>{"use strict";i.d(e,{mc:()=>R,u:()=>I,ig:()=>E,fR:()=>B});var e=i(4486),s=i(2577),n=i(9313),r=i(1652),a=i(2812),o=i(133),h=i(4670),l=i(9903),u={allowChildren:!0,removeChildren(e=0,i){var i=i??this.children.length,t=i-e,s=[];if(0<t&&t<=i){for(let t=i-1;t>=e;t--){var r=this.children[t];r&&(this.renderGroup&&this.renderGroup.removeChild(r),s.push(r),r.parent=null)}(0,l.d)(this.children,e,i);for(let t=0;t<s.length;++t)this.emit("childRemoved",s[t],this,t),s[t].emit("removed",this);return s}if(0==t&&0===this.children.length)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){t=this.getChildAt(t);return this.removeChild(t)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds `+this.children.length);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(t,e){this.allowChildren||(0,h.t)(h.l,"addChildAt: Only Containers will be allowed to add children in v8.0.0");var i=this["children"];if(e<0||e>i.length)throw new Error(t+`addChildAt: The index ${e} supplied is out of bounds `+i.length);if(t.parent){var s=t.parent.children.indexOf(t);if(t.parent===this&&s===e)return t;-1!==s&&t.parent.children.splice(s,1)}return e===i.length?i.push(t):i.splice(e,0,t),t.parent=this,t.didChange=!0,t.didViewUpdate=!1,t._updateFlags=15,this.renderGroup&&this.renderGroup.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){var i,s;t!==e&&(i=this.getChildIndex(t),s=this.getChildIndex(e),this.children[i]=e,this.children[s]=t)},removeFromParent(){this.parent?.removeChild(this)}},d=i(9049),c=i(8507),p=i(8218);const f=new class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){var i=this._tests[t];if(i.test(e))return p.Z.get(i.maskClass,e)}return e}returnMaskEffect(t){p.Z.return(t)}};c.XO.handleByList(c.Ag.MaskEffect,f._effectClasses);var c={_mask:null,_filters:null,effects:[],addEffect(t){-1===this.effects.indexOf(t)&&(this.effects.push(t),this.effects.sort((t,e)=>t.priority-e.priority),this.renderGroup&&(this.renderGroup.structureDidChange=!0),this._updateIsSimple())},removeEffect(t){t=this.effects.indexOf(t);-1!==t&&(this.effects.splice(t,1),!this.isRenderGroupRoot&&this.renderGroup&&(this.renderGroup.structureDidChange=!0),this._updateIsSimple())},set mask(t){this._mask||(this._mask={mask:null,effect:null}),this._mask.mask!==t&&(this._mask.effect&&(this.removeEffect(this._mask.effect),f.returnMaskEffect(this._mask.effect),this._mask.effect=null),null!=(this._mask.mask=t))&&(t=f.getMaskEffect(t),this._mask.effect=t,this.addEffect(t))},get mask(){return this._mask?.mask},set filters(t){Array.isArray(t)||(t=t&&[t]),this._filters||(this._filters={filters:null,effect:null,filterArea:null});var e=0<t?.length,i=this._filters.effect&&!e||!this._filters.effect&&e;t=Array.isArray(t)?t.slice(0):t,this._filters.filters=Object.freeze(t),i&&(e?(i=p.Z.get(d.a),this._filters.effect=i,this.addEffect(i)):(i=this._filters.effect,this.removeEffect(i),i.filterArea=null,i.filters=null,this._filters.effect=null,p.Z.return(i))),e&&(this._filters.effect.filters=t,this._filters.effect.filterArea=this.filterArea)},get filters(){return this._filters?.filters},set filterArea(t){this._filters||(this._filters={filters:null,effect:null,filterArea:null}),this._filters.filterArea=t},get filterArea(){return this._filters?.filterArea}},g={label:null,get name(){return(0,h.t)(h.l,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){(0,h.t)(h.l,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(e,t=!1){var i=this.children;for(let t=0;t<i.length;t++){var s=i[t];if(s.label===e||e instanceof RegExp&&e.test(s.label))return s}if(t)for(let t=0;t<i.length;t++){var r=i[t].getChildByLabel(e,!0);if(r)return r}return null},getChildrenByLabel(e,t=!1,i=[]){var s=this.children;for(let t=0;t<s.length;t++){var r=s[t];(r.label===e||e instanceof RegExp&&e.test(r.label))&&i.push(r)}if(t)for(let t=0;t<s.length;t++)s[t].getChildrenByLabel(e,!0,i);return i}},m=i(9636),y=i(9443),_=i(7269);const v=new n.u;var x={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){var i=Math.sign(this.scale.x)||1;this.scale.x=0!==e?t/e*i:i},_setHeight(t,e){var i=Math.sign(this.scale.y)||1;this.scale.y=0!==e?t/e*i:i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new m.c});var t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didChangeId>>12&&(t.didChange=!0,t.data[0]=this._didChangeId>>12),function e(t,i){var s=t.children;for(let t=0;t<s.length;t++){var r=s[t],n=(255&r.uid)<<24|16777215&r._didChangeId;i.data[i.index]!==n&&(i.data[i.index]=n,i.didChange=!0),i.index++,r.children.length&&e(r,i)}i.didChange}(this,t),t.didChange&&(0,_.n)(this,t.localBounds,v),t.localBounds},getBounds(t,e){return(0,y.fB)(this,t,e||new m.c)}},w={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(b))}};function b(t,e){return t._zIndex-e._zIndex}var A=i(5101),S={getGlobalPosition(t=new A.b,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,i=!1){return(i?this.worldTransform:(this.updateLocalTransform(),(i=(0,y.Ek)(this,new n.u)).append(this.localTransform),i)).apply(t,e)},toLocal(t,e,i,s){return e&&(t=e.toGlobal(t,i,s)),(s?this.worldTransform:(this.updateLocalTransform(),(e=(0,y.Ek)(this,new n.u)).append(this.localTransform),e)).applyInverse(t,i)}},P=i(848);class M{constructor(t){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this._children=[],this.worldTransform=new n.u,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new P.L,this._onRenderContainers=[],this.root=t,this.addChild(t)}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),(t.renderGroupParent=this).onChildUpdate(t.root),this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){t.root.didChange&&this._removeChildFromUpdate(t.root);var e=this.renderGroupChildren.indexOf(t);-1<e&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t!==this.root&&(this._children.push(t),t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1),t.renderGroup){if(t.renderGroup.root===t)return void this.addRenderGroupChild(t.renderGroup)}else t.renderGroup=this,t.didChange=!0;!t._onRender||t.isRenderGroupRoot&&t.renderGroup.root!==t||this.addOnRender(t);var e=t.children;t.isRenderGroupRoot||this.onChildUpdate(t);for(let t=0;t<e.length;t++)this.addChild(e[t])}removeChild(t){if(this.structureDidChange=!0,!t._onRender||t.isRenderGroupRoot&&t.renderGroup.root!==t||this.removeOnRender(t),t.renderGroup.root!==t){var e=t.children;for(let t=0;t<e.length;t++)this.removeChild(e[t]);t.didChange&&t.renderGroup._removeChildFromUpdate(t),t.renderGroup=null}else this._removeRenderGroupChild(t.renderGroup);t=this._children.indexOf(t);-1<t&&this._children.splice(t,1)}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];(e=e||(this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]})).list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(t.didViewUpdate=!1,this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t))}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}_removeChildFromUpdate(t){var e=this.childrenToUpdate[t.relativeRenderGroupDepth];e&&(-1<(t=e.list.indexOf(t))&&e.list.splice(t,1),e.index--)}get isRenderable(){return 7===this.root.localDisplayStatus&&0<this.worldAlpha}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender()}}const C=new a.o(null),k=new a.o(null),T=new a.o(null,1,1),E=1,I=2,B=4;class R extends e.A{constructor(t={}){super(),this.uid=(0,o.L)("renderable"),this._updateFlags=15,this.isRenderGroupRoot=!1,this.renderGroup=null,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new n.u,this.relativeGroupTransform=new n.u,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new a.o(this,0,0),this._scale=T,this._pivot=k,this._skew=C,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didChangeId=0,this._didLocalTransformChangeId=-1;var e=this,i=t,s={children:!0,parent:!0,effects:!0};for(const r in i)s[r]||void 0===i[r]||(e[r]=i[r]);t.children?.forEach(t=>this.addChild(t)),this.effects=[],t.parent?.addChild(this)}static mixin(t){Object.defineProperties(R.prototype,Object.getOwnPropertyDescriptors(t))}addChild(...e){if(this.allowChildren||(0,h.t)(h.l,"addChild: Only Containers will be allowed to add children in v8.0.0"),1<e.length){for(let t=0;t<e.length;t++)this.addChild(e[t]);return e[0]}var t=e[0];return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0)):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t.didViewUpdate=!1,t._updateFlags=15,this.renderGroup&&this.renderGroup.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didChangeId+=4096,0!==t._zIndex&&t.depthOfChildModified()),t}removeChild(...e){if(1<e.length){for(let t=0;t<e.length;t++)this.removeChild(e[t]);return e[0]}var t=e[0],i=this.children.indexOf(t);return-1<i&&(this._didChangeId+=4096,this.children.splice(i,1),this.renderGroup&&this.renderGroup.removeChild(t),t.parent=null,this.emit("childRemoved",t,this,i),t.emit("removed",this)),t}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didChangeId++,this.didChange||(this.didChange=!0,this.isRenderGroupRoot?(t=this.renderGroup.renderGroupParent)&&t.onChildUpdate(this):this.renderGroup&&this.renderGroup.onChildUpdate(this))}set isRenderGroup(t){if(this.isRenderGroupRoot&&!1===t)throw new Error("[Pixi] cannot undo a render group just yet");t&&this.enableRenderGroup()}get isRenderGroup(){return this.isRenderGroupRoot}enableRenderGroup(){if(!this.renderGroup||this.renderGroup.root!==this){this.isRenderGroupRoot=!0;var i=this.renderGroup;if(i&&i.removeChild(this),this.renderGroup=new M(this),i){for(let e=0;e<i.renderGroupChildren.length;e++){var s=i.renderGroupChildren[e];let t=s.root;for(;t;){if(t===this){this.renderGroup.addRenderGroupChild(s);break}t=t.parent}}i.addRenderGroupChild(this.renderGroup)}this._updateIsSimple(),this.groupTransform=n.u.IDENTITY}}_updateIsSimple(){this.isSimple=!this.isRenderGroupRoot&&0===this.effects.length}get worldTransform(){return this._worldTransform||(this._worldTransform=new n.u),this.renderGroup&&(this.isRenderGroupRoot?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this._worldTransform.appendFrom(this.relativeGroupTransform,this.renderGroup.worldTransform)),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*r.bO}set angle(t){this.rotation=t*r.Td}get pivot(){return this._pivot===k&&(this._pivot=new a.o(this,0,0)),this._pivot}set pivot(t){this._pivot===k&&(this._pivot=new a.o(this,0,0)),"number"==typeof t?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===C&&(this._skew=new a.o(this,0,0)),this._skew}set skew(t){this._skew===C&&(this._skew=new a.o(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===T&&(this._scale=new a.o(this,1,1)),this._scale}set scale(t){this._scale===T&&(this._scale=new a.o(this,0,0)),"number"==typeof t?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){var e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){var e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t=t||{};var e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){var i=this.getLocalBounds();let s,r;r="object"!=typeof t?(s=t,e??t):(s=t.width,t.height??t.width),void 0!==s&&this._setWidth(s,i.width),void 0!==r&&this._setHeight(r,i.height)}_updateSkew(){var t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(("number"==typeof t.x?t:this.position).x,("number"==typeof t.y?t:this.position).y),this.scale.set("number"==typeof t.scaleX?t.scaleX||1:this.scale.x,"number"==typeof t.scaleY?t.scaleY||1:this.scale.y),this.rotation=("number"==typeof t.rotation?t:this).rotation,this.skew.set("number"==typeof t.skewX?t.skewX:this.skew.x,"number"==typeof t.skewY?t.skewY:this.skew.y),this.pivot.set("number"==typeof t.pivotX?t.pivotX:this.pivot.x,"number"==typeof t.pivotY?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){var t,e,i,s,r,n;(15&this._didLocalTransformChangeId)!==this._didChangeId&&(this._didLocalTransformChangeId=this._didChangeId,t=this.localTransform,s=this._scale,n=this._pivot,e=this._position,i=s._x,s=s._y,r=n._x,n=n._y,t.a=this._cx*i,t.b=this._sx*i,t.c=this._cy*s,t.d=this._sy*s,t.tx=e._x-(r*t.a+n*t.c),t.ty=e._y-(r*t.b+n*t.d))}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=E,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){t=s.Q.shared.setValue(t??16777215).toBgrNumber();t!==this.localColor&&(this.localColor=t,this._updateFlags|=E,this._onUpdate())}get tint(){var t=this.localColor;return((255&t)<<16)+(65280&t)+(t>>16&255)}set blendMode(t){this.localBlendMode!==t&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=I,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(2&this.localDisplayStatus)}set visible(t){(2&this.localDisplayStatus)>>1!=(t?1:0)&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=B,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(4&this.localDisplayStatus)}set culled(t){(4&this.localDisplayStatus)>>2!=(t?1:0)&&(this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._updateFlags|=B,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(1&this.localDisplayStatus)}set renderable(t){(1&this.localDisplayStatus)!=(t?1:0)&&(this._updateFlags|=B,this.localDisplayStatus^=1,this.renderGroup&&!this.isRenderGroupRoot&&(this.renderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return 7===this.localDisplayStatus&&0<this.groupAlpha}destroy(e=!1){if(!this.destroyed){this.destroyed=!0,this.removeFromParent(),this.parent=null,this._mask=null,this._filters=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners();var t="boolean"==typeof e?e:e?.children,i=this.removeChildren(0,this.children.length);if(t)for(let t=0;t<i.length;++t)i[t].destroy(e)}}}R.mixin(u),R.mixin(S),R.mixin({_onRender:null,set onRender(t){var e=this.renderGroup;t?(this._onRender||e?.addOnRender(this),this._onRender=t):(this._onRender&&e?.removeOnRender(this),this._onRender=null)},get onRender(){return this._onRender}}),R.mixin(x),R.mixin(c),R.mixin(g),R.mixin(w),R.mixin({cullArea:null,cullable:!1,cullableChildren:!0})},9636:(t,e,i)=>{"use strict";i.d(e,{c:()=>n});var e=i(9313),s=i(9252);const r=new e.u;class n{constructor(t=1/0,e=1/0,i=-1/0,s=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=r,this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new s.M);var t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=r,this}set(t,e,i,s){this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}addFrame(t,e,i,s,r){var n=(r=r||this.matrix).a,a=r.b,o=r.c,h=r.d,l=r.tx,r=r.ty;let u=this.minX,d=this.minY,c=this.maxX,p=this.maxY;var f=n*t+o*e+l,g=a*t+h*e+r;f<u&&(u=f),g<d&&(d=g),f>c&&(c=f),g>p&&(p=g),g=a*i+h*e+r,(f=n*i+o*e+l)<u&&(u=f),g<d&&(d=g),f>c&&(c=f),g>p&&(p=g),g=a*t+h*s+r,(f=n*t+o*s+l)<u&&(u=f),g<d&&(d=g),f>c&&(c=f),g>p&&(p=g),g=a*i+h*s+r,(f=n*i+o*s+l)<u&&(u=f),g<d&&(d=g),f>c&&(c=f),g>p&&(p=g),this.minX=u,this.minY=d,this.maxX=c,this.maxY=p}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=(this.minX>t.minX?this:t).minX,this.minY=(this.minY>t.minY?this:t).minY,this.maxX=(this.maxX<t.maxX?this:t).maxX,this.maxY=(this.maxY<t.maxY?this:t).maxY}applyMatrix(t){var e=this.minX,i=this.minY,s=this.maxX,r=this.maxY,{a:t,b:n,c:a,d:o,tx:h,ty:l}=t,u=t*e+a*i+h,d=n*e+o*i+l;this.minX=u,this.minY=d,this.maxX=u,this.maxY=d,d=n*s+o*i+l,this.minX=(u=t*s+a*i+h)<this.minX?u:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=u>this.maxX?u:this.maxX,this.maxY=d>this.maxY?d:this.maxY,d=n*e+o*r+l,this.minX=(u=t*e+a*r+h)<this.minX?u:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=u>this.maxX?u:this.maxX,this.maxY=d>this.maxY?d:this.maxY,d=n*s+o*r+l,this.minX=(u=t*s+a*r+h)<this.minX?u:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=u>this.maxX?u:this.maxX,this.maxY=d>this.maxY?d:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,s){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>s&&(this.maxY=s),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new n(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){var e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){var e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return 0<this.maxX-this.minX&&0<this.maxY-this.minY}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,i,s,t){let r=this.minX,n=this.minY,a=this.maxX,o=this.maxY;var h=(t=t||this.matrix).a,l=t.b,u=t.c,d=t.d,c=t.tx,p=t.ty;for(let t=i;t<s;t+=2){var f=e[t],g=e[t+1],m=h*f+u*g+c,f=l*f+d*g+p;r=m<r?m:r,n=f<n?f:n,a=m>a?m:a,o=f>o?f:o}this.minX=r,this.minY=n,this.maxX=a,this.maxY=o}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}}},9443:(t,e,i)=>{"use strict";i.d(e,{Ek:()=>n,fB:()=>function(t,e,i){i.clear();let s,r;s=t.parent?e?t.parent.worldTransform:(r=l.u.get().identity(),n(t,r)):h.u.IDENTITY;(function e(i,s,t,r){if(!i.visible||!i.measurable)return;let n;r?n=i.worldTransform:(i.updateLocalTransform(),(n=l.u.get()).appendFrom(i.localTransform,t));const a=s;const o=!!i.effects.length;o&&(s=l.o.get().clear());if(i.boundsArea)s.addRect(i.boundsArea,n);else{i.addBounds&&(s.matrix=n,i.addBounds(s));for(let t=0;t<i.children.length;t++)e(i.children[t],s,n,r)}if(o){for(let t=0;t<i.effects.length;t++)i.effects[t].addBounds?.(s);a.addBounds(s,h.u.IDENTITY),l.o.return(s)}r||l.u.return(n)})(t,i,s,e),r&&l.u.return(r);i.isValid||i.set(0,0,0,0);return i}});var h=i(9313),l=i(2208);function n(t,e){t=t.parent;return t&&(n(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}},7269:(t,e,i)=>{"use strict";i.d(e,{n:()=>function(t,e,i){e.clear(),i=i||d.u.IDENTITY,function e(i,s,t,r,n){let a;if(n)a=c.u.get(),a=t.copyTo(a);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const l=i.localTransform;(a=c.u.get()).appendFrom(l,t)}const o=s;const h=!!i.effects.length;h&&(s=c.o.get().clear());if(i.boundsArea)s.addRect(i.boundsArea,a);else{i.renderPipeId&&(s.matrix=a,i.addBounds(s));const u=i.children;for(let t=0;t<u.length;t++)e(u[t],s,a,r,!1)}if(h){for(let t=0;t<i.effects.length;t++)i.effects[t].addLocalBounds?.(s,r);o.addBounds(s,d.u.IDENTITY),c.o.return(s)}c.u.return(a)}(t,e,i,t,!0),e.isValid||e.set(0,0,0,0);return e}});var d=i(9313),c=i(2208)},2208:(t,e,i)=>{"use strict";i.d(e,{o:()=>n,u:()=>r});var e=i(9313),s=i(8425),i=i(9636);const r=new s.b(e.u),n=new s.b(i.c)},4389:(t,e,i)=>{"use strict";i.d(e,{G:()=>s});class s{constructor(){this.batcher=null,this.batch=null,this.applyTransform=!0,this.roundPixels=0}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}packIndex(e,i,s){var r=this.geometryData.indices;for(let t=0;t<this.indexSize;t++)e[i++]=r[t+this.indexOffset]+s-this.vertexOffset}packAttributes(e,i,s,r){var t,n=this.geometryData,a=this.renderable,o=n.vertices,h=n.uvs,n=2*this.vertexOffset,l=2*(this.vertexOffset+this.vertexSize),u=this.color,u=u>>16|65280&u|(255&u)<<16;if(this.applyTransform){c=u,t=a.groupColor;var d=(16777215!==c&&t?16777215!==t&&c?((c>>16&255)*(t>>16&255)/255<<16)+((c>>8&255)*(t>>8&255)/255<<8)+(255&c)*(255&t)/255:c:t)+(this.alpha*a.groupAlpha*255<<24),c=a.groupTransform,p=r<<16|65535&this.roundPixels,f=c.a,g=c.b,m=c.c,y=c.d,_=c.tx,v=c.ty;for(let t=n;t<l;t+=2){var x=o[t],w=o[t+1];e[s]=f*x+m*w+_,e[s+1]=g*x+y*w+v,e[s+2]=h[t],e[s+3]=h[t+1],i[s+4]=d,i[s+5]=p,s+=6}}else{var b=u+(255*this.alpha<<24);for(let t=n;t<l;t+=2)e[s]=o[t],e[s+1]=o[t+1],e[s+2]=h[t],e[s+3]=h[t+1],i[s+4]=b,i[s+5]=r<<16,s+=6}}get vertSize(){return this.vertexSize}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.vertexOffset=this.vertexOffset,t.vertexSize=this.vertexSize,t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData}reset(){this.applyTransform=!0}}},9408:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var r=i(4670),e=i(4263),n=i(2694);class s extends e.mc{constructor(t){const{context:e,roundPixels:i,...s}=(t=t instanceof n.T?{context:t}:t)||{};super({label:"Graphics",...s}),this.canBundle=!0,this.renderPipeId="graphics",this._roundPixels=0,this._context=e||(this._ownedContext=new n.T),this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(t){t.addBounds(this._context.bounds)}containsPoint(t){return this._context.containsPoint(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}onViewUpdate(){this._didChangeId+=4096,this._didGraphicsUpdate=!0,this.didViewUpdate||(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):!0!==t&&!0!==t?.context||this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new s(this._context.clone()):(this._ownedContext=null,new s(this._context))}lineStyle(t,e,i){(0,r.t)(r.l,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");var s={};return t&&(s.width=t),e&&(s.color=e),i&&(s.alpha=i),this.context.strokeStyle=s,this}beginFill(t,e){(0,r.t)(r.l,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");var i={};return t&&(i.color=t),e&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){(0,r.t)(r.l,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();var t=this.context.strokeStyle;return t.width===n.T.defaultStrokeStyle.width&&t.color===n.T.defaultStrokeStyle.color&&t.alpha===n.T.defaultStrokeStyle.alpha||this.context.stroke(),this}drawCircle(...t){return(0,r.t)(r.l,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return(0,r.t)(r.l,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return(0,r.t)(r.l,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return(0,r.t)(r.l,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return(0,r.t)(r.l,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return(0,r.t)(r.l,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}},2694:(S,t,e)=>{"use strict";e.d(t,{T:()=>q});var t=e(4486),l=e(2577),a=e(9313),u=e(5101),i=e(4492),s=e(133),r=e(4670),n=e(9636),m=e(268),d=e(8133);var o=e(9252);class h{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new h(this.x,this.y,this.radius)}contains(t,e){var i;return!(this.radius<=0)&&(i=this.radius*this.radius,t=this.x-t,e=this.y-e,(t*=t)+(e*=e)<=i)}strokeContains(t,e,i){var s;return 0!==this.radius&&(t=this.x-t,e=this.y-e,s=this.radius,i=i/2,(t=Math.sqrt(t*t+e*e))<s+i)&&s-i<t}getBounds(t){return(t=t||new o.M).x=this.x-this.radius,t.y=this.y-this.radius,t.width=2*this.radius,t.height=2*this.radius,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class c{constructor(t=0,e=0,i=0,s=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=s}clone(){return new c(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){return!(this.halfWidth<=0||this.halfHeight<=0)&&(t=(t-this.x)/this.halfWidth,e=(e-this.y)/this.halfHeight,(t*=t)+(e*=e)<=1)}strokeContains(t,e,i){var s,r,{halfWidth:n,halfHeight:a}=this;return!(n<=0||a<=0)&&(s=n+(i=i/2),r=a+i,1<(t=t-this.x)*t/((n=n-i)*n)+(n=e-this.y)*n/((e=a-i)*e))&&t*t/(s*s)+n*n/(r*r)<=1}getBounds(){return new o.M(this.x-this.halfWidth,this.y-this.halfHeight,2*this.halfWidth,2*this.halfHeight)}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}var p=e(5438);const f=(t,e,i,s,r,n)=>{t-=i,i=e-s,e=Math.sqrt(t*t+i*i);return r-n<=e&&e<=r+n};class g{constructor(t=0,e=0,i=0,s=0,r=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=s,this.radius=r}getBounds(t){return(t=t||new o.M).x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new g(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(!(this.width<=0||this.height<=0)&&t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;var s=t-(this.x+i),r=e-(this.y+i),n=i*i;if(s*s+r*r<=n)return!0;if((s=t-(this.x+this.width-i))*s+r*r<=n)return!0;if(s*s+(r=e-(this.y+this.height-i))*r<=n)return!0;if((s=t-(this.x+i))*s+r*r<=n)return!0}return!1}strokeContains(t,e,i){var{x:s,y:r,width:n,height:a,radius:o}=this,i=i/2,h=s+o,l=r+o,u=s+n,d=r+a;return(s-i<=t&&t<=s+i||u-i<=t&&t<=u+i)&&l<=e&&e<=l+(a-2*o)||(r-i<=e&&e<=r+i||d-i<=e&&e<=d+i)&&h<=t&&t<=h+(n-2*o)||t<h&&e<l&&f(t,e,h,l,o,i)||u-o<t&&e<l&&f(t,e,u-o,l,o,i)||u-o<t&&d-o<e&&f(t,e,u-o,d-o,o,i)||t<h&&d-o<e&&f(t,e,h,d-o,o,i)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}var y=e(3428);const k=8,T=1.1920929e-7,C=1,E=.01,I=0,B=0;function F(t,e,i,s,r,n,a,o,h,l){l=Math.min(.99,Math.max(0,l??y.GH.defaultOptions.bezierSmoothness)),l=C-l;(function t(r,n,a,o,h,l,u,d,c,p,e){if(e>k)return;const f=Math.PI;const i=(r+a)/2;const s=(n+o)/2;const g=(a+h)/2;const m=(o+l)/2;const y=(h+u)/2;const _=(l+d)/2;const v=(i+g)/2;const x=(s+m)/2;const w=(g+y)/2;const b=(m+_)/2;const A=(v+w)/2;const S=(x+b)/2;if(0<e){let t=u-r,e=d-n;const P=Math.abs((a-u)*e-(o-d)*t),M=Math.abs((h-u)*e-(l-d)*t);let i,s;if(P>T&&M>T){if((P+M)*(P+M)<=p*(t*t+e*e)){if(I<E)return void c.push(A,S);const C=Math.atan2(l-o,h-a);if(i=Math.abs(C-Math.atan2(o-n,a-r)),s=Math.abs(Math.atan2(d-l,u-h)-C),i>=f&&(i=2*f-i),s>=f&&(s=2*f-s),i+s<I)return void c.push(A,S);if(0!==B){if(i>B)return void c.push(a,o);if(s>B)return void c.push(h,l)}}}else if(P>T){if(P*P<=p*(t*t+e*e)){if(I<E)return void c.push(A,S);if((i=(i=Math.abs(Math.atan2(l-o,h-a)-Math.atan2(o-n,a-r)))>=f?2*f-i:i)<I)return c.push(a,o),void c.push(h,l);if(0!==B&&i>B)return void c.push(a,o)}}else if(M>T){if(M*M<=p*(t*t+e*e)){if(I<E)return void c.push(A,S);if((i=(i=Math.abs(Math.atan2(d-l,u-h)-Math.atan2(l-o,h-a)))>=f?2*f-i:i)<I)return c.push(a,o),void c.push(h,l);if(0!==B&&i>B)return void c.push(h,l)}}else if(t=A-(r+u)/2,e=S-(n+d)/2,t*t+e*e<=p)return void c.push(A,S)}t(r,n,i,s,v,x,A,S,c,p,e+1);t(A,S,w,b,y,_,u,d,c,p,e+1)})(e,i,s,r,n,a,e=o,i=h,s=t,l*=l,0),s.push(e,i)}const R=8,L=1.1920929e-7,O=.01,x=0;function H(t,e,i,s,r,n,a,o){o=1-Math.min(.99,Math.max(0,o??y.GH.defaultOptions.bezierSmoothness));(function t(e,i,s,r,n,a,o,h,l){if(l>R)return;const u=Math.PI;const d=(i+r)/2;const c=(s+n)/2;const p=(r+a)/2;const f=(n+o)/2;const g=(d+p)/2;const m=(c+f)/2;let y=a-i;let _=o-s;const v=Math.abs((r-a)*_-(n-o)*y);if(v>L){if(v*v<=h*(y*y+_*_)){if(x<O)return void e.push(g,m);let t=Math.abs(Math.atan2(o-n,a-r)-Math.atan2(n-s,r-i));if((t=t>=u?2*u-t:t)<x)return void e.push(g,m)}}else if(y=g-(i+a)/2,_=m-(s+o)/2,y*y+_*_<=h)return void e.push(g,m);t(e,i,s,d,c,g,m,h,l+1);t(e,g,m,p,f,a,o,h,l+1)})(t=t,e,i,s,r,e=n,i=a,o*=o,0),t.push(e,i)}function _(e,i,s,r,t,n,a,o){let h=Math.abs(t-n);(!a&&n<t||a&&t<n)&&(h=2*Math.PI-h),o=o||Math.max(6,Math.floor(6*Math.pow(r,1/3)*(h/Math.PI))),o=Math.max(o,3);var l=h/o;let u=t;l*=a?-1:1;for(let t=0;t<o+1;t++){var d=Math.cos(u),c=Math.sin(u);e.push(i+d*r,s+c*r),u+=l}}const W=2*Math.PI,z={centerX:0,centerY:0,ang1:0,ang2:0},D=({x:t,y:e},i,s,r,n,a,o,h)=>{i=n*(t*=i)+r*(e*=s);return h.x=r*t-n*e+a,h.y=i+o,h};const U=(t,e,i,s)=>{let r=t*i+e*s;return(r=1<r?1:r)<-1&&(r=-1),(t*s-e*i<0?-1:1)*Math.acos(r)};function G(n,a,o,h,l,u,d,c=0,p=0,f=0){if(0!==u&&0!==d){var g=Math.sin(c*W/360),m=Math.cos(c*W/360),c=m*(a-h)/2+g*(o-l)/2,y=-g*(a-h)/2+m*(o-l)/2;if(0!=c||0!=y){u=Math.abs(u),d=Math.abs(d);var _=Math.pow(c,2)/Math.pow(u,2)+Math.pow(y,2)/Math.pow(d,2);1<_&&(u*=Math.sqrt(_),d*=Math.sqrt(_));{_=a;a=o;o=h;h=l;l=u;var v=d;var x=g;var w=m;var b=z;var A=Math.pow(l,2),S=Math.pow(v,2),P=Math.pow(c,2),M=Math.pow(y,2);let t=A*S-A*M-S*P;t<0&&(t=0),t/=A*M+S*P;A=(t=Math.sqrt(t)*(p===f?-1:1))*l/v*y,M=t*-v/l*c,S=w*A-x*M+(_+o)/2,P=x*A+w*M+(a+h)/2,p=(c-A)/l,_=(y-M)/v,o=(-c-A)/l,x=(-y-M)/v,w=U(1,0,p,_);let e=U(p,_,o,x);0===f&&0<e&&(e-=W),1===f&&e<0&&(e+=W),b.centerX=S,b.centerY=P,b.ang1=w,b.ang2=e}let{ang1:e,ang2:i}=z;var{centerX:C,centerY:k}=z;let t=Math.abs(i)/(W/4);Math.abs(1-t)<1e-7&&(t=1);var T=Math.max(Math.ceil(t),1);i/=T;let s=n[n.length-2],r=n[n.length-1];var E={x:0,y:0};for(let t=0;t<T;t++){H=e,void 0,O=B=R=L=void 0,L=-1.5707963267948966===(I=i)?-.551915024494:4/3*Math.tan(I/4),L=1.5707963267948966===I?.551915024494:L,R=Math.cos(H),B=Math.sin(H),O=Math.cos(H+I),H=Math.sin(H+I);var I=[{x:R-B*L,y:B+R*L},{x:O+H*L,y:H-O*L},{x:O,y:H}],{x:B,y:R}=D(I[0],u,d,m,g,C,k,E),{x:L,y:O}=D(I[1],u,d,m,g,C,k,E),{x:H,y:I}=D(I[2],u,d,m,g,C,k,E);F(n,s,r,B,R,L,O,H,I),s=H,r=I,e+=i}}}}const X=new o.M;class Y{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new n.c,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();var i=this._currentPoly.points,s=i[i.length-2],r=i[i.length-1];return s===t&&r===e||i.push(t,e),this}arc(t,e,i,s,r,n){return this._ensurePoly(!1),_(this._currentPoly.points,t,e,i,s,r,n),this}arcTo(t,e,i,s,r){this._ensurePoly();var n,a,o,h,l,u,d,c=this._currentPoly.points;return t=t,e=e,i=i,s=s,r=r,l=(c=c)[c.length-2],u=c[c.length-1]-e,l-=t,s-=e,i-=t,(d=Math.abs(u*i-l*s))<1e-8||0===r?c[c.length-2]===t&&c[c.length-1]===e||c.push(t,e):(a=u*u+l*l,o=s*s+i*i,h=u*s+l*i,a=(n=r*Math.sqrt(a)/d)*h/a,o=i*(n+(h=(d=r*Math.sqrt(o)/d)*h/o)),h=s*(n+h),_(c,(c=n*i+d*l)+t,(t=n*s+d*u)+e,r,Math.atan2(u*(d+a)-t,l*(d+a)-c),Math.atan2(h-t,o-c),i*u<l*s)),this}arcToSvg(t,e,i,s,r,n,a){return G(this._currentPoly.points,this._currentPoly.lastX,this._currentPoly.lastY,n,a,t,e,i,s,r),this}bezierCurveTo(t,e,i,s,r,n,a){this._ensurePoly();var o=this._currentPoly;return F(this._currentPoly.points,o.lastX,o.lastY,t,e,i,s,r,n,a),this}quadraticCurveTo(t,e,i,s,r){this._ensurePoly();var n=this._currentPoly;return H(this._currentPoly.points,n.lastX,n.lastY,t,e,i,s,r),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0)).transform(t);for(let t=0;t<e.instructions.length;t++){var i=e.instructions[t];this[i.action](...i.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,s,r){return this.drawShape(new o.M(t,e,i,s),r),this}circle(t,e,i,s){return this.drawShape(new h(t,e,i),s),this}poly(t,e,i){t=new p.t(t);return t.closePath=e,this.drawShape(t,i),this}regularPoly(e,i,s,r,t=0,n){r=Math.max(0|r,3);var a=-1*Math.PI/2+t,o=2*Math.PI/r,h=[];for(let t=0;t<r;t++){var l=t*o+a;h.push(e+s*Math.cos(l),i+s*Math.sin(l))}return this.poly(h,!0,n),this}roundPoly(e,i,s,r,n,t=0,a){if(r=Math.max(0|r,3),n<=0)return this.regularPoly(e,i,s,r,t);var o=s*Math.sin(Math.PI/r)-.001,h=(n=Math.min(n,o),-1*Math.PI/2+t),l=2*Math.PI/r,u=(r-2)*Math.PI/r/2;for(let t=0;t<r;t++){var d=t*l+h,c=e+s*Math.cos(d),p=i+s*Math.sin(d),f=d+Math.PI+u,d=d-Math.PI-u,g=c+n*Math.cos(f),f=p+n*Math.sin(f),m=c+n*Math.cos(d),d=p+n*Math.sin(d);0===t?this.moveTo(g,f):this.lineTo(g,f),this.quadraticCurveTo(c,p,m,d,a)}return this.closePath()}roundShape(e,i,t=!1,s){if(e.length<3)return this;if(t){var r=this,n=e,a=i,o=s,h=(t,e)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),l=(t,e,i)=>({x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}),u=n.length;for(let i=0;i<u;i++){var d=n[(i+1)%u],c=d.radius??a;if(c<=0)0===i?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y);else{var p=n[i],f=n[(i+2)%u],g=h(p,d);let t;t=g<1e-4?d:l(d,p,Math.min(g/2,c)/g);p=h(f,d);let e;e=p<1e-4?d:l(d,f,Math.min(p/2,c)/p),0===i?r.moveTo(t.x,t.y):r.lineTo(t.x,t.y),r.quadraticCurveTo(d.x,d.y,e.x,e.y,o)}}}else{var m=this;var y=e;var _=i;var v=(t,e)=>{var i=e.x-t.x,e=e.y-t.y,t=Math.sqrt(i*i+e*e);return{len:t,nx:i/t,ny:e/t}},x=(t,e)=>{0===t?m.moveTo(e.x,e.y):m.lineTo(e.x,e.y)};let t=y[y.length-1];for(let n=0;n<y.length;n++){var w=y[n%y.length],b=w.radius??_;if(b<=0)x(n,w);else{var A=y[(n+1)%y.length],S=v(w,t),A=v(w,A);if(S.len<1e-4||A.len<1e-4)x(n,w);else{let t=Math.asin(S.nx*A.ny-S.ny*A.nx),e=1,i=!1;S.nx*A.nx-S.ny*-A.ny<0?t<0?t=Math.PI+t:(t=Math.PI-t,e=-1,i=!0):0<t&&(e=-1,i=!0);var P=t/2;let s,r=Math.abs(Math.cos(P)*b/Math.sin(P));s=r>Math.min(S.len/2,A.len/2)?(r=Math.min(S.len/2,A.len/2),Math.abs(r*Math.sin(P)/Math.cos(P))):b;P=w.x+A.nx*r+-A.ny*s*e,b=w.y+A.ny*r+A.nx*s*e,S=Math.atan2(S.ny,S.nx)+Math.PI/2*e,A=Math.atan2(A.ny,A.nx)-Math.PI/2*e;0===n&&m.moveTo(P+Math.cos(S)*s,b+Math.sin(S)*s),m.arc(P,b,s,S,A,i)}}t=w}}return this.closePath()}filletRect(t,e,i,s,r){var n,a;return 0===r?this.rect(t,e,i,s):(a=Math.min(i,s)/2,n=t+i,s=e+s,r=(a=Math.min(a,Math.max(-a,r)))<0?-a:0,a=Math.abs(a),this.moveTo(t,e+a).arcTo(t+r,e+r,t+a,e,a).lineTo(n-a,e).arcTo(n-r,e+r,n,e+a,a).lineTo(n,s-a).arcTo(n-r,s-r,t+i-a,s,a).lineTo(t+a,s).arcTo(t+r,s-r,t,s-a,a).closePath())}chamferRect(t,e,i,s,r,n){if(r<=0)return this.rect(t,e,i,s);var r=Math.min(r,Math.min(i,s)/2),i=t+i,s=e+s,a=[t+r,e,i-r,e,i,e+r,i,s-r,i-r,s,t+r,s,t,s-r,t,e+r];for(let t=a.length-1;2<=t;t-=2)a[t]===a[t-2]&&a[t-1]===a[t-3]&&a.splice(t-1,2);return this.poly(a,!0,n)}ellipse(t,e,i,s,r){return this.drawShape(new c(t,e,i,s),r),this}roundRect(t,e,i,s,r,n){return this.drawShape(new g(t,e,i,s,r),n),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){var i=this._currentPoly;return i&&this.endPoly(),(i=new p.t).points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){var e=this._currentPoly;return e&&2<e.points.length&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(i=!0){if(!this._currentPoly&&(this._currentPoly=new p.t,i)){var s,i=this.shapePrimitives[this.shapePrimitives.length-1];if(i){let t=i.shape.x,e=i.shape.y;i.transform.isIdentity()||(i=i.transform,s=t,t=i.a*t+i.c*e+i.tx,e=i.b*s+i.d*e+i.ty),this._currentPoly.points.push(t,e)}else this._currentPoly.points.push(0,0)}}buildPath(){var e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){var i=e.instructions[t];this[i.action](...i.data)}this.finish()}get bounds(){var e=this._bounds,i=(e.clear(),this.shapePrimitives);for(let t=0;t<i.length;t++){var s=i[t],r=s.shape.getBounds(X);s.transform?e.addRect(r,s.transform):e.addRect(r)}return e}}class P{constructor(t){if(this.instructions=[],this.uid=(0,s.L)("graphicsPath"),this._dirty=!0,"string"==typeof t){var r=t;var n=this;var a=d(r),o=[];let e=null,i=0,s=0;for(let t=0;t<a.length;t++){var h=a[t],l=h[0],u=h;switch(l){case"M":i=u[1],s=u[2],n.moveTo(i,s);break;case"m":i+=u[1],s+=u[2],n.moveTo(i,s);break;case"H":i=u[1],n.lineTo(i,s);break;case"h":i+=u[1],n.lineTo(i,s);break;case"V":s=u[1],n.lineTo(i,s);break;case"v":s+=u[1],n.lineTo(i,s);break;case"L":i=u[1],s=u[2],n.lineTo(i,s);break;case"l":i+=u[1],s+=u[2],n.lineTo(i,s);break;case"C":i=u[5],s=u[6],n.bezierCurveTo(u[1],u[2],u[3],u[4],i,s);break;case"c":n.bezierCurveTo(i+u[1],s+u[2],i+u[3],s+u[4],i+u[5],s+u[6]),i+=u[5],s+=u[6];break;case"S":i=u[3],s=u[4],n.bezierCurveToShort(u[1],u[2],i,s);break;case"s":n.bezierCurveToShort(i+u[1],s+u[2],i+u[3],s+u[4]),i+=u[3],s+=u[4];break;case"Q":i=u[3],s=u[4],n.quadraticCurveTo(u[1],u[2],i,s);break;case"q":n.quadraticCurveTo(i+u[1],s+u[2],i+u[3],s+u[4]),i+=u[3],s+=u[4];break;case"T":i=u[1],s=u[2],n.quadraticCurveToShort(i,s);break;case"t":i+=u[1],s+=u[2],n.quadraticCurveToShort(i,s);break;case"A":i=u[6],s=u[7],n.arcToSvg(u[1],u[2],u[3],u[4],u[5],i,s);break;case"a":i+=u[6],s+=u[7],n.arcToSvg(u[1],u[2],u[3],u[4],u[5],i,s);break;case"Z":case"z":n.closePath(),0<o.length&&(e=o.pop(),s=e?(i=e.startX,e.startY):i=0),e=null;break;default:(0,m.R)("Unknown SVG path command: "+l)}"Z"!==l&&"z"!==l&&null===e&&(e={startX:i,startY:s},o.push(e))}}else this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new Y(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,s,r){var n,a=this.instructions[this.instructions.length-1],o=this.getLastPoint(u.b.shared);let h=0,l=0;return l=a&&"bezierCurveTo"===a.action?(h=a.data[2],l=a.data[3],a=o.x,n=o.y,h=a+(a-h),n+(n-l)):(h=o.x,o.y),this.instructions.push({action:"bezierCurveTo",data:[h,l,t,e,i,s,r]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){var s,r=this.instructions[this.instructions.length-1],n=this.getLastPoint(u.b.shared);let a=0,o=0;return o=r&&"quadraticCurveTo"===r.action?(a=r.data[0],o=r.data[1],r=n.x,s=n.y,a=r+(r-a),s+(s-o)):(a=n.x,n.y),this.instructions.push({action:"quadraticCurveTo",data:[a,o,t,e,i]}),this._dirty=!0,this}rect(t,e,i,s,r){return this.instructions.push({action:"rect",data:[t,e,i,s,r]}),this._dirty=!0,this}circle(t,e,i,s){return this.instructions.push({action:"circle",data:[t,e,i,s]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(e,i,t,s,r,n,a){r=r||s/2;var o=-1*Math.PI/2+n,h=2*t,l=2*Math.PI/h,u=[];for(let t=0;t<h;t++){var d=t%2?r:s,c=t*l+o;u.push(e+d*Math.cos(c),i+d*Math.sin(c))}return this.poly(u,!0,a),this}clone(t=!1){var e=new P;if(t)for(let t=0;t<this.instructions.length;t++){var i=this.instructions[t];e.instructions.push({action:i.action,data:i.data.slice()})}else e.instructions=this.instructions.slice();return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(n){if(!n.isIdentity()){var a=n.a,o=n.b,h=n.c,l=n.d,u=n.tx,d=n.ty;let e=0,i=0,s=0,r=0;var c,p;for(let t=0;t<this.instructions.length;t++){var f=this.instructions[t],g=f.data;switch(f.action){case"moveTo":case"lineTo":e=g[0],i=g[1],g[0]=a*e+h*i+u,g[1]=o*e+l*i+d;break;case"bezierCurveTo":s=g[0],r=g[1],c=g[2],p=g[3],e=g[4],i=g[5],g[0]=a*s+h*r+u,g[1]=o*s+l*r+d,g[2]=a*c+h*p+u,g[3]=o*c+l*p+d,g[4]=a*e+h*i+u,g[5]=o*e+l*i+d;break;case"quadraticCurveTo":s=g[0],r=g[1],e=g[2],i=g[3],g[0]=a*s+h*r+u,g[1]=o*s+l*r+d,g[2]=a*e+h*i+u,g[3]=o*e+l*i+d;break;case"arcToSvg":e=g[5],i=g[6],c=g[0],p=g[1],g[0]=a*c+h*p,g[1]=o*c+l*p,g[5]=a*e+h*i+u,g[6]=o*e+l*i+d;break;case"circle":g[4]=v(g[3],n);break;case"rect":g[4]=v(g[4],n);break;case"ellipse":g[8]=v(g[8],n);break;case"roundRect":g[5]=v(g[5],n);break;case"addPath":g[0].transform(n);break;case"poly":g[2]=v(g[2],n);break;default:(0,m.R)("unknown transform action",f.action)}}this._dirty=!0}return this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(i){for(;"closePath"===i.action;){if(--e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t)}}else t.x=0,t.y=0;return t}}function v(t,e){return t?t.prepend(e):e.clone()}function V(t,e){"string"==typeof t&&((i=document.createElement("div")).innerHTML=t.trim(),t=i.querySelector("svg"));var i={context:e,path:new P};!function e(t,i,s,r){const n=t.children;const{fillStyle:a,strokeStyle:o}=N(t);a&&s?s={...s,...a}:a&&(s=a);o&&r?r={...r,...o}:o&&(r=o);i.context.fillStyle=s;i.context.strokeStyle=r;let h;let l;let u;let d;let c;let p;let f;let g;let m;let y;let _;let v;let x;let w;let b;let A;let S;switch(t.nodeName.toLowerCase()){case"path":w=t.getAttribute("d"),b=new P(w),i.context.path(b),s&&i.context.fill(),r&&i.context.stroke();break;case"circle":f=M(t,"cx",0),g=M(t,"cy",0),m=M(t,"r",0),i.context.ellipse(f,g,m,m),s&&i.context.fill(),r&&i.context.stroke();break;case"rect":h=M(t,"x",0),l=M(t,"y",0),A=M(t,"width",0),S=M(t,"height",0),y=M(t,"rx",0),_=M(t,"ry",0),y||_?i.context.roundRect(h,l,A,S,y||_):i.context.rect(h,l,A,S),s&&i.context.fill(),r&&i.context.stroke();break;case"ellipse":f=M(t,"cx",0),g=M(t,"cy",0),y=M(t,"rx",0),_=M(t,"ry",0),i.context.beginPath(),i.context.ellipse(f,g,y,_),s&&i.context.fill(),r&&i.context.stroke();break;case"line":u=M(t,"x1",0),d=M(t,"y1",0),c=M(t,"x2",0),p=M(t,"y2",0),i.context.beginPath(),i.context.moveTo(u,d),i.context.lineTo(c,p),r&&i.context.stroke();break;case"polygon":x=t.getAttribute("points"),v=x.match(/\d+/g).map(t=>parseInt(t,10)),i.context.poly(v,!0),s&&i.context.fill(),r&&i.context.stroke();break;case"polyline":x=t.getAttribute("points"),v=x.match(/\d+/g).map(t=>parseInt(t,10)),i.context.poly(v,!1),r&&i.context.stroke();break;case"g":case"svg":break;default:console.info(`[SVG parser] <${t.nodeName}> elements unsupported`)}for(let t=0;t<n.length;t++)e(n[t],i,s,r)}(t,i,null,null)}function M(t,e,i){t=t.getAttribute(e);return t?Number(t):i}function N(t){var e=t.getAttribute("style"),i={},s={};let r=!1,n=!1;if(e){var a=e.split(";");for(let t=0;t<a.length;t++){var[o,h]=a[t].split(":");switch(o){case"stroke":"none"!==h&&(i.color=l.Q.shared.setValue(h).toNumber(),n=!0);break;case"stroke-width":i.width=Number(h);break;case"fill":"none"!==h&&(r=!0,s.color=l.Q.shared.setValue(h).toNumber());break;case"fill-opacity":s.alpha=Number(h);break;case"stroke-opacity":i.alpha=Number(h);break;case"opacity":s.alpha=Number(h),i.alpha=Number(h)}}}else{e=t.getAttribute("stroke"),e=(e&&"none"!==e&&(n=!0,i.color=l.Q.shared.setValue(e).toNumber(),i.width=M(t,"stroke-width",1)),t.getAttribute("fill"));e&&"none"!==e&&(r=!0,s.color=l.Q.shared.setValue(e).toNumber())}return{strokeStyle:n?i:null,fillStyle:r?s:null}}var w=e(990);const j=new u.b,b=new a.u,A=class A extends t.A{constructor(){super(...arguments),this.uid=(0,s.L)("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new P,this._transform=new a.u,this._fillStyle={...A.defaultFillStyle},this._strokeStyle={...A.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new n.c,this._boundsDirty=!0}clone(){var t=new A;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=(0,w.M)(t,A.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=(0,w.M)(t,A.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=(0,w.M)(t,A.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=(0,w.M)(t,A.defaultStrokeStyle),this}texture(t,e,i,s,r,n){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:s||0,dw:r||t.frame.width,dh:n||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?l.Q.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new P,this}fill(t,e){let i;var s=this.instructions[this.instructions.length-1];return(i=0===this._tick&&s&&"stroke"===s.action?s.data.path:this._activePath.clone())&&(null!=t&&(void 0!==e&&"number"==typeof t&&((0,r.t)(r.l,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=(0,w.M)(t,A.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}_initNextPathLocation(){var{x:t,y:e}=this._activePath.getLastPoint(u.b.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;var i=this.instructions[this.instructions.length-1];return(e=0===this._tick&&i&&"fill"===i.action?i.data.path:this._activePath.clone())&&(null!=t&&(this._strokeStyle=(0,w.M)(t,A.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}cut(){for(let t=0;t<2;t++){var e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&("stroke"===e.action||"fill"===e.action)){if(!e.data.hole){e.data.hole=i;break}e.data.hole.addPath(i)}}return this._initNextPathLocation(),this}arc(t,e,i,s,r,n){this._tick++;var a=this._transform;return this._activePath.arc(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,i,s,r,n),this}arcTo(t,e,i,s,r){this._tick++;var n=this._transform;return this._activePath.arcTo(n.a*t+n.c*e+n.tx,n.b*t+n.d*e+n.ty,n.a*i+n.c*s+n.tx,n.b*i+n.d*s+n.ty,r),this}arcToSvg(t,e,i,s,r,n,a){this._tick++;var o=this._transform;return this._activePath.arcToSvg(t,e,i,s,r,o.a*n+o.c*a+o.tx,o.b*n+o.d*a+o.ty),this}bezierCurveTo(t,e,i,s,r,n,a){this._tick++;var o=this._transform;return this._activePath.bezierCurveTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*i+o.c*s+o.tx,o.b*i+o.d*s+o.ty,o.a*r+o.c*n+o.tx,o.b*r+o.d*n+o.ty,a),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,i,s){return this._tick++,this._activePath.ellipse(t,e,i,s,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;var i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;var i=this._transform,s=this._activePath.instructions,r=i.a*t+i.c*e+i.tx,t=i.b*t+i.d*e+i.ty;return 1===s.length&&"moveTo"===s[0].action?(s[0].data[0]=r,s[0].data[1]=t):this._activePath.moveTo(r,t),this}quadraticCurveTo(t,e,i,s,r){this._tick++;var n=this._transform;return this._activePath.quadraticCurveTo(n.a*t+n.c*e+n.tx,n.b*t+n.d*e+n.ty,n.a*i+n.c*s+n.tx,n.b*i+n.d*s+n.ty,r),this}rect(t,e,i,s){return this._tick++,this._activePath.rect(t,e,i,s,this._transform.clone()),this}roundRect(t,e,i,s,r){return this._tick++,this._activePath.roundRect(t,e,i,s,r,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,s,r=0,n){return this._tick++,this._activePath.regularPoly(t,e,i,s,r,n),this}roundPoly(t,e,i,s,r,n){return this._tick++,this._activePath.roundPoly(t,e,i,s,r,n),this}roundShape(t,e,i,s){return this._tick++,this._activePath.roundShape(t,e,i,s),this}filletRect(t,e,i,s,r){return this._tick++,this._activePath.filletRect(t,e,i,s,r),this}chamferRect(t,e,i,s,r,n){return this._tick++,this._activePath.chamferRect(t,e,i,s,r,n),this}star(t,e,i,s,r=0,n=0){return this._tick++,this._activePath.star(t,e,i,s,r,n,this._transform.clone()),this}svg(t){return this._tick++,V(t,this),this}restore(){var t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,s,r,n){return t instanceof a.u?this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty):this._transform.set(t,e,i,s,r,n),this}transform(t,e,i,s,r,n){return t instanceof a.u?this._transform.append(t):(b.set(t,e,i,s,r,n),this._transform.append(b)),this}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;var e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){var i,s=this.instructions[t],r=s.action;"fill"===r?(i=s.data,e.addBounds(i.path.bounds)):"texture"===r&&(i=s.data,e.addFrame(i.dx,i.dy,i.dx+i.dw,i.dy+i.dh,i.transform)),"stroke"===r&&(s=(r=s.data).style.width/2,r=r.path.bounds,e.addFrame(r.minX-s,r.minY-s,r.maxX+s,r.maxY+s))}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;var i=this.instructions;let s=!1;for(let t=0;t<i.length;t++){var r=i[t],n=r.data,a=n.path;if(r.action&&a){var o=n.style,h=a.shapePath.shapePrimitives;for(let t=0;t<h.length;t++){var l=h[t].shape;if(o&&l){var u=h[t].transform,d=u?u.applyInverse(e,j):e,u=(s="fill"===r.action?l.contains(d.x,d.y):l.strokeContains(d.x,d.y,o.width),n.hole);if(u){var c=u.shapePath?.shapePrimitives;if(c)for(let t=0;t<c.length;t++)c[t].shape.contains(d.x,d.y)&&(s=!1)}if(s)return!0}}}}return s}destroy(t=!1){this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),("boolean"==typeof t?t:t?.texture)&&(t="boolean"==typeof t?t:t?.textureSource,this._fillStyle.texture&&this._fillStyle.texture.destroy(t),this._strokeStyle.texture)&&this._strokeStyle.texture.destroy(t),this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};A.defaultFillStyle={color:16777215,alpha:1,texture:i.g.WHITE,matrix:null,fill:null},A.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:i.g.WHITE,matrix:null,fill:null};let q=A},3428:(t,e,i)=>{"use strict";i.d(e,{GH:()=>m});var e=i(8507),s=i(8634),l=i(341),u=i(1478),r=i(848),F=i(8218),n=i(9252);function W(e,t,i,s,r){var n=t.a,a=t.b,o=t.c,h=t.d,l=t.tx,u=t.ty;i=i||0,s=s||2,r=r||e.length/s-i;let d=i*s;for(let t=0;t<r;t++){var c=e[d],p=e[d+1];e[d]=n*c+o*p+l,e[d+1]=a*c+h*p+u,d+=s}}var z=i(4492),D=i(4389),a={build(t,n){let a,o,h,l,u,d;if("circle"===t.type?(a=t.x,o=t.y,u=d=t.radius,h=l=0):"ellipse"===t.type?(a=t.x,o=t.y,u=t.halfWidth,d=t.halfHeight,h=l=0):(p=t.width/2,f=t.height/2,a=t.x+p,o=t.y+f,u=d=Math.max(0,Math.min(t.radius,Math.min(p,f))),h=p-u,l=f-d),0<=u&&0<=d&&0<=h&&0<=l){var c=Math.ceil(2.3*Math.sqrt(u+d)),t=8*c+(h?4:0)+(l?4:0);if(0!=t)if(0===c)n[0]=n[6]=a+h,n[1]=n[3]=o+l,n[2]=n[4]=a-h,n[5]=n[7]=o-l;else{let e=0,i=4*c+(h?2:0)+2,s=i,r=t;var p=h+u,f=l,t=a+p,g=a-p,m=o+f;n[e++]=t,n[e++]=m,n[--i]=m,n[--i]=g,l&&(w=o-f,n[s++]=g,n[s++]=w,n[--r]=w,n[--r]=t);for(let t=1;t<c;t++){var y=Math.PI/2*(t/c),_=h+Math.cos(y)*u,y=l+Math.sin(y)*d,v=a+_,_=a-_,x=o+y,y=o-y;n[e++]=v,n[e++]=x,n[--i]=x,n[--i]=_,n[s++]=_,n[s++]=y,n[--r]=y,n[--r]=v}var p=h,f=l+d,t=a+p,g=a-p,m=o+f,w=o-f;n[e++]=t,n[e++]=m,n[--r]=w,n[--r]=t,h&&(n[e++]=g,n[e++]=m,n[--r]=w,n[--r]=g)}}return n},triangulate(r,n,a,t,o,h){if(0!==r.length){let e=0,i=0;for(let t=0;t<r.length;t+=2)e+=r[t],i+=r[t+1];e/=r.length/2,i/=r.length/2;let s=t;n[s*a]=e,n[s*a+1]=i;var l=s++;for(let t=0;t<r.length;t+=2)n[s*a]=r[t],n[s*a+1]=r[t+1],0<t&&(o[h++]=s,o[h++]=l,o[h++]=s-1),s++;o[h++]=1+l,o[h++]=l,o[h++]=s-1}}},U=i(5101);const o=1e-4,G=1e-4;function X(t,e,i,s,r,n,a,o){let h,l;l=a?(h=s,-i):(h=-s,i);a=t-i*r+h,r=e-s*r+l,t=t+i*n+h,i=e+s*n+l;return o.push(a,r),o.push(t,i),2}function Y(i,s,t,e,r,n,a,o){var h=t-i,l=e-s;let u=Math.atan2(h,l),d=Math.atan2(r-i,n-s);o&&u<d?u+=2*Math.PI:!o&&u>d&&(d+=2*Math.PI);var c=u,p=d-u,f=Math.abs(p),g=Math.sqrt(h*h+l*l),m=1+(15*f*Math.sqrt(g)/Math.PI>>0),y=p/m;if(c+=y,o){a.push(i,s),a.push(t,e);for(let t=1,e=c;t<m;t++,e+=y)a.push(i,s),a.push(i+Math.sin(e)*g,s+Math.cos(e)*g);a.push(i,s),a.push(r,n)}else{a.push(t,e),a.push(i,s);for(let t=1,e=c;t<m;t++,e+=y)a.push(i+Math.sin(e)*g,s+Math.cos(e)*g),a.push(i,s);a.push(r,n),a.push(i,s)}return 2*m}function V(c,t,p,f,g,e,i,m){var y=o;if(0!==c.length){var _=t;let e=_.alignment;if(.5!==t.alignment){let t=function(s){var r=s.length;if(r<6)return 1;let n=0;for(let t=0,e=s[r-2],i=s[r-1];t<r;t+=2){var a=s[t],o=s[t+1];n+=(a-e)*(o+i),e=a,i=o}return n<0?-1:1}(c);p&&(t*=-1),e=(e-.5)*t+.5}var t=new U.b(c[0],c[1]),p=new U.b(c[c.length-2],c[c.length-1]),y=Math.abs(t.x-p.x)<y&&Math.abs(t.y-p.y)<y,v=(f&&(c=c.slice(),y&&(c.pop(),c.pop(),p.set(c[c.length-2],c[c.length-1])),y=.5*(t.x+p.x),p=.5*(p.y+t.y),c.unshift(y,p),c.push(y,p)),g),x=c.length/2;let i=c.length;var w=v.length/2,b=_.width/2,A=b*b,S=_.miterLimit*_.miterLimit;let s=c[0],r=c[1],n=c[2],a=c[3],o=0,h=0,l=-(r-a),u=s-n;var P=0,M=0;let d=Math.sqrt(l*l+u*u);l/=d,u/=d,l*=b,u*=b;var C=2*(1-e),k=2*e;f||("round"===_.cap?i+=Y(s-l*(C-k)*.5,r-u*(C-k)*.5,s-l*C,r-u*C,s+l*k,r+u*k,v,!0)+2:"square"===_.cap&&(i+=X(s,r,l,u,C,k,!0,v))),v.push(s-l*C,r-u*C),v.push(s+l*k,r+u*k);for(let t=1;t<x-1;++t){s=c[2*(t-1)],r=c[2*(t-1)+1],n=c[2*t],a=c[2*t+1],o=c[2*(t+1)],h=c[2*(t+1)+1],l=-(r-a),u=s-n,d=Math.sqrt(l*l+u*u),l/=d,u/=d,l*=b,u*=b,P=-(a-h),M=n-o;var T,E,I,B,P=P/(d=Math.sqrt(P*P+M*M))*b,M=M/d*b,R=n-s,L=r-a,O=n-o,H=h-a,F=R*O+L*H,W=L*O-H*R,z=W<0;Math.abs(W)<.001*Math.abs(F)?(v.push(n-l*C,a-u*C),v.push(n+l*k,a+u*k),0<=F&&("round"===_.join?i+=Y(n,a,n-l*C,a-u*C,n-P*C,a-M*C,v,!1)+4:i+=2,v.push(n-P*k,a-M*k),v.push(n+P*C,a+M*C))):(I=(H*(F=(-l+s)*(-u+a)-(-l+n)*(-u+r))-L*(E=(-P+o)*(-M+a)-(-P+n)*(-M+h)))/W,F=((E=(R*E-O*F)/W)-n)*(E-n)+(I-a)*(I-a),W=n+(E-n)*C,T=a+(I-a)*C,E=n-(E-n)*k,I=a-(I-a)*k,B=z?C:k,F<=Math.min(R*R+L*L,O*O+H*H)+B*B*A?"bevel"===_.join||S<F/A?(z?(v.push(W,T),v.push(n+l*k,a+u*k),v.push(W,T),v.push(n+P*k,a+M*k)):(v.push(n-l*C,a-u*C),v.push(E,I),v.push(n-P*C,a-M*C),v.push(E,I)),i+=2):"round"===_.join?z?(v.push(W,T),v.push(n+l*k,a+u*k),i+=Y(n,a,n+l*k,a+u*k,n+P*k,a+M*k,v,!0)+4,v.push(W,T),v.push(n+P*k,a+M*k)):(v.push(n-l*C,a-u*C),v.push(E,I),i+=Y(n,a,n-l*C,a-u*C,n-P*C,a-M*C,v,!1)+4,v.push(n-P*C,a-M*C),v.push(E,I)):(v.push(W,T),v.push(E,I)):(v.push(n-l*C,a-u*C),v.push(n+l*k,a+u*k),"round"===_.join?i+=z?Y(n,a,n+l*k,a+u*k,n+P*k,a+M*k,v,!0)+2:Y(n,a,n-l*C,a-u*C,n-P*C,a-M*C,v,!1)+2:"miter"===_.join&&F/A<=S&&(z?(v.push(E,I),v.push(E,I)):(v.push(W,T),v.push(W,T)),i+=2),v.push(n-P*C,a-M*C),v.push(n+P*k,a+M*k),i+=2))}s=c[2*(x-2)],r=c[2*(x-2)+1],n=c[2*(x-1)],a=c[2*(x-1)+1],l=-(r-a),u=s-n,d=Math.sqrt(l*l+u*u),l/=d,u/=d,l*=b,u*=b,v.push(n-l*C,a-u*C),v.push(n+l*k,a+u*k),f||("round"===_.cap?i+=Y(n-l*(C-k)*.5,a-u*(C-k)*.5,n-l*C,a-u*C,n+l*k,a+u*k,v,!1)+2:"square"===_.cap&&(i+=X(n,a,l,u,C,k,!1,v)));var D=G*G;for(let t=w;t<i+w-2;++t)s=v[2*t],r=v[2*t+1],n=v[2*(t+1)],a=v[2*(t+1)+1],o=v[2*(t+2)],h=v[2*(t+2)+1],Math.abs(s*(a-h)+n*(h-r)+o*(r-a))<D||m.push(t,t+1,t+2)}}var d=i(6570);function N(i,t,s,r,n,a,o){var h=d(i,t,2);if(h){for(let t=0;t<h.length;t+=3)a[o++]=h[t]+n,a[o++]=h[t+1]+n,a[o++]=h[t+2]+n;let e=n*r;for(let t=0;t<i.length;t+=2)s[e]=i[t],s[e+1]=i[t+1],e+=r}}const h=[];const j={rectangle:{build(t,e){var i=t.x,s=t.y,r=t.width,t=t.height;return 0<=r&&0<=t&&(e[0]=i,e[1]=s,e[2]=i+r,e[3]=s,e[4]=i+r,e[5]=s+t,e[6]=i,e[7]=s+t),e},triangulate(t,e,i,s,r,n){var a=0,e=(e[(s*=i)+0]=t[0],e[s+0+1]=t[1],e[s+(a+=i)]=t[2],e[s+a+1]=t[3],e[s+(a+=i)]=t[6],e[s+a+1]=t[7],e[s+(a+=i)]=t[4],e[s+a+1]=t[5],s/i);r[n++]=e,r[n++]=1+e,r[n++]=2+e,r[n++]=1+e,r[n++]=3+e,r[n++]=2+e}},polygon:{build(e,i){for(let t=0;t<e.points.length;t++)i[t]=e.points[t];return i},triangulate(t,e,i,s,r,n){N(t,h,e,i,s,r,n)}},triangle:{build(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,e},triangulate(t,e,i,s,r,n){var a=0,e=(e[(s*=i)+0]=t[0],e[s+0+1]=t[1],e[s+(a+=i)]=t[2],e[s+a+1]=t[3],e[s+(a+=i)]=t[4],e[s+a+1]=t[5],s/i);r[n++]=e,r[n++]=1+e,r[n++]=2+e}},circle:a,ellipse:a,roundedRectangle:a},_=new n.M;function c(e,t){var{geometryData:i,batches:s}=t;s.length=0,i.indices.length=0,i.vertices.length=0;for(let t=i.uvs.length=0;t<e.instructions.length;t++){var r,n,a,o,h,l,u,d,c,p,f,g,m,y=e.instructions[t];"texture"===y.action?(c=d=m=p=f=u=l=h=g=o=a=n=r=void 0,r=y.data,n=s,{vertices:o,uvs:g,indices:h}=a=i,l=h.length,u=o.length/2,f=[],p=j.rectangle,m=_,d=r.image,m.x=r.dx,m.y=r.dy,m.width=r.dw,m.height=r.dh,c=r.transform,p.build(m,f),c&&W(f,c),p.triangulate(f,o,2,u,h,l),m=d.uvs,g.push(m.x0,m.y0,m.x1,m.y1,m.x3,m.y3,m.x2,m.y2),(c=F.Z.get(D.G)).indexOffset=l,c.indexSize=h.length-l,c.vertexOffset=u,c.vertexSize=o.length/2-u,c.color=r.style,c.alpha=r.alpha,c.texture=d,c.geometryData=a,n.push(c)):"fill"!==y.action&&"stroke"!==y.action||(p="stroke"===y.action,f=y.data.path.shapePath,g=y.data.style,m=y.data.hole,p&&m&&v(m.shapePath,g,null,!0,s,i),v(f,g,m,p,s,i))}}function v(t,k,T,E,I,B){const{vertices:R,uvs:L,indices:O}=B,H=t.shapePrimitives.length-1;t.shapePrimitives.forEach(({shape:e,transform:t},i)=>{var s=O.length,r=R.length/2,n=[],a=j[e.type];if(a.build(e,n),t&&W(n,t),E){e=e.closePath??!0;V(n,k,!1,e,R,0,0,O)}else if(T&&H===i){0!=H&&console.warn("[Pixi Graphics] only the last shape have be cut out");const M=[],C=n.slice();(function(t){if(!t)return[];var e=t.shapePrimitives,i=[];for(let t=0;t<e.length;t++){var s=e[t].shape,r=[];j[s.type].build(s,r),i.push(r)}return i})(T.shapePath).forEach(t=>{M.push(C.length/2),C.push(...t)}),N(C,M,R,2,r,O,s)}else a.triangulate(n,R,2,r,O,s);e=L.length/2,i=k.texture;if(i!==z.g.WHITE){a=k.matrix;t&&a.append(t.clone().invert());{var[o,h,l,u,d,c,p,n=null]=[R,2,r,L,e,2,R.length/2-r,a];let t=0;l*=h,d*=c;for(var f=n.a,g=n.b,m=n.c,y=n.d,_=n.tx,v=n.ty;t<p;){var x=o[l],w=o[l+1];u[d]=f*x+m*w+_,u[d+1]=g*x+y*w+v,d+=c,l+=h,t++}}}else{var b=L;var A=e;var S=2;var P=R.length/2-r;let t=0;for(A*=S;t<P;)b[A]=0,b[A+1]=0,A+=S,t++}t=F.Z.get(D.G);t.indexOffset=s,t.indexSize=O.length-s,t.vertexOffset=r,t.vertexSize=R.length/2-r,t.color=k.color,t.alpha=k.alpha,t.texture=i,t.geometryData=B,I.push(t)})}class p{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class f{constructor(){this.geometry=new s.J,this.instructions=new r.L}init(){this.instructions.reset()}}const g=class g{constructor(){this._activeBatchers=[],this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._needsContextNeedsRebuild=[]}init(t){g.defaultOptions.bezierSmoothness=t?.bezierSmoothness??g.defaultOptions.bezierSmoothness}prerender(){this._returnActiveBatchers()}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);var i;return t.dirty&&(e?this._cleanGraphicsContextData(t):e=this._initContext(t),c(t,e),i=t.batchMode,t.customShader||"no-batch"===i?e.isBatchable=!1:"auto"===i&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1),e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_returnActiveBatchers(){for(let t=0;t<this._activeBatchers.length;t++)F.Z.return(this._activeBatchers[t]);this._activeBatchers.length=0}_initContextRenderData(t){var e=F.Z.get(f),{batches:i,geometryData:s}=this._gpuContextHash[t.uid],r=s.vertices.length,s=s.indices.length;for(let t=0;t<i.length;t++)i[t].applyTransform=!1;var n=F.Z.get(u.i);this._activeBatchers.push(n),n.ensureAttributeBuffer(r),n.ensureIndexBuffer(s),n.begin();for(let t=0;t<i.length;t++){var a=i[t];n.add(a)}n.finish(e.instructions);var r=e.geometry,o=(r.indexBuffer.setDataWithSize(n.indexBuffer,n.indexSize,!0),r.buffers[0].setDataWithSize(n.attributeBuffer.float32View,n.attributeSize,!0),n.batches);for(let t=0;t<o.length;t++){var h=o[t];h.bindGroup=(0,l.w)(h.textures.textures,h.textures.count)}return this._graphicsDataContextHash[t.uid]=e}_initContext(t){var e=new p;return this._gpuContextHash[t.uid]=e,t.on("update",this.onGraphicsContextUpdate,this),t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextUpdate(t){this._needsContextNeedsRebuild.push(t)}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("update",this.onGraphicsContextUpdate,this),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){var e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(F.Z.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(t=>{F.Z.return(t)})}destroy(){for(const t of this._needsContextNeedsRebuild)this._gpuContextHash[t.uid]&&this.onGraphicsContextDestroy(t);this._needsContextNeedsRebuild.length=0}};g.extension={type:[e.Ag.WebGLSystem,e.Ag.WebGPUSystem,e.Ag.CanvasSystem],name:"graphicsContext"},g.defaultOptions={bezierSmoothness:.5};let m=g},7276:(t,e,i)=>{"use strict";i.d(e,{_:()=>n});var s=i(2577),u=i(1761),d=i(9313),c=i(8293),p=i(4492),r=i(133);const f=class f{constructor(t,e,i,s){this.uid=(0,r.L)("fillGradient"),this.type="linear",this.gradientStops=[],this.x0=t,this.y0=e,this.x1=i,this.y1=s}addColorStop(t,e){return this.gradientStops.push({offset:t,color:s.Q.shared.setValue(e).toHex()}),this}buildLinearGradient(){var t=f.defaultTextureSize,e=this["gradientStops"],i=u.e.get().createCanvas(),s=(i.width=t,i.height=t,i.getContext("2d")),r=s.createLinearGradient(0,0,f.defaultTextureSize,1);for(let t=0;t<e.length;t++){var n=e[t];r.addColorStop(n.offset,n.color)}s.fillStyle=r,s.fillRect(0,0,t,t),this.texture=new p.g({source:new c.b({resource:i,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});var{x0:s,y0:i,x1:a,y1:o}=this,h=new d.u,a=a-s,o=o-i,l=Math.sqrt(a*a+o*o),o=Math.atan2(o,a);h.translate(-s,-i),h.scale(1/t,1/t),h.rotate(-o),h.scale(256/l,1),this.transform=h}};f.defaultTextureSize=256;let n=f},2806:(t,e,i)=>{"use strict";i.d(e,{m:()=>a});var s=i(9313),r=i(133);const n={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class a{constructor(t,e){this.uid=(0,r.L)("fillPattern"),this.transform=new s.u,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=n[e].addressModeU,t.source.style.addressModeV=n[e].addressModeV)}setTransform(t){var e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height)}}},990:(t,e,i)=>{"use strict";i.d(e,{M:()=>function(t,e){if(null==t)return null;let i,s;i=t?.fill?(s=t.fill,{...e,...t}):(s=t,e);{var r;if(a.Q.isColorLike(s))return r=a.Q.shared.setValue(s??0),{...i,color:r.toNumber(),alpha:(1===r.alpha?i:r).alpha,texture:h.g.WHITE};if(s instanceof u.m)return r=s,{...i,color:16777215,texture:r.texture,matrix:r.transform,fill:i.fill??null};if(s instanceof l._)return(n=s).buildLinearGradient(),{...i,color:16777215,texture:n.texture,matrix:n.transform}}var n={...e,...t};n.texture&&(n.texture!==h.g.WHITE&&((e=n.matrix?.invert()||new o.u).scale(1/n.texture.frame.width,1/n.texture.frame.height),n.matrix=e),"clamp-to-edge"===(t=n.texture.source.style).addressMode)&&(t.addressMode="repeat");e=a.Q.shared.setValue(n.color);return n.alpha*=e.alpha,n.color=e.toNumber(),n.matrix=n.matrix?n.matrix.clone():null,n}});var a=i(2577),o=i(9313),h=i(4492),l=i(7276),u=i(2806)},6844:(t,e,i)=>{"use strict";i.d(e,{k:()=>r});var o=i(2812),h=i(4492),s=i(2048);class r extends i(4263).mc{constructor(t=h.g.EMPTY){const{texture:e,anchor:i,roundPixels:s,width:r,height:n,...a}=t=t instanceof h.g?{texture:t}:t;super({label:"Sprite",...a}),this.renderPipeId="sprite",this.batched=!0,this._didSpriteUpdate=!1,this._bounds={minX:0,maxX:1,minY:0,maxY:0},this._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},this._boundsDirty=!0,this._sourceBoundsDirty=!0,this._roundPixels=0,this._anchor=new o.o({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=s??!1,r&&(this.width=r),n&&(this.height=n)}static from(t,e=!1){return t instanceof h.g?new r(t):new r(h.g.from(t,e))}set texture(t){t=t||h.g.EMPTY;var e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(t){var e=this.sourceBounds;return t.x>=e.maxX&&t.x<=e.minX&&t.y>=e.maxY&&t.y<=e.minY}addBounds(t){var e=this._texture.trim?this.sourceBounds:this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}onViewUpdate(){this._didChangeId+=4096,this._didSpriteUpdate=!0,this._sourceBoundsDirty=this._boundsDirty=!0,this.didViewUpdate||(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}_updateBounds(){(0,s.y)(this._bounds,this._anchor,this._texture,0)}_updateSourceBounds(){var t=this._anchor,e=this._texture,i=this._sourceBounds,{width:e,height:s}=e.orig;i.maxX=-t._x*e,i.minX=i.maxX+e,i.maxY=-t._y*s,i.minY=i.maxY+s}destroy(t=!1){super.destroy(t),("boolean"==typeof t?t:t?.texture)&&(t="boolean"==typeof t?t:t?.textureSource,this._texture.destroy(t)),this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width)}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height)}getSize(t){return(t=t||{}).width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){let i,s;s="object"!=typeof t?(i=t,e??t):(i=t.width,t.height??t.width),void 0!==i&&this._setWidth(i,this._texture.orig.width),void 0!==s&&this._setHeight(s,this._texture.orig.height)}}},5337:(t,e,i)=>{"use strict";i.d(e,{pF:()=>s});const r="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xhtml";class s{constructor(){this.svgRoot=document.createElementNS(r,"svg"),this.foreignObject=document.createElementNS(r,"foreignObject"),this.domElement=document.createElementNS(n,"div"),this.styleElement=document.createElementNS(n,"style"),this.image=new Image;var{foreignObject:t,svgRoot:e,styleElement:i,domElement:s}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(i),t.appendChild(s)}}},7577:(t,e,i)=>{"use strict";i.d(e,{I:()=>a});var s=i(268),e=i(8291),r=i(8011),l=i(2577);function n(t){var e=t._stroke,i=t._fill,i=[`div { ${["color: "+l.Q.shared.setValue(i.color).toHex(),`font-size: ${t.fontSize}px`,"font-family: "+t.fontFamily,"font-weight: "+t.fontWeight,"font-style: "+t.fontStyle,"font-variant: "+t.fontVariant,`letter-spacing: ${t.letterSpacing}px`,"text-align: "+t.align,`padding: ${t.padding}px`,"white-space: "+("pre"===t.whiteSpace&&t.wordWrap?"pre-wrap":t.whiteSpace),...t.lineHeight?[`line-height: ${t.lineHeight}px`]:[],...t.wordWrap?["word-wrap: "+(t.breakWords?"break-all":"break-word"),`max-width: ${t.wordWrapWidth}px`]:[],...e?[d(e)]:[],...t.dropShadow?[u(t.dropShadow)]:[],...t.cssOverrides].join(";")} }`],s=t.tagStyles,r=i;for(const o in s){var n=s[o],a=[];for(const h in n)p[h]?a.push(p[h](n[h])):c[h]&&a.push(c[h].replace("{{VALUE}}",n[h]));r.push(`${o} { ${a.join(";")} }`)}return i.join(" ")}function u(t){var e=l.Q.shared.setValue(t.color).setAlpha(t.alpha).toHexa(),i=Math.round(Math.cos(t.angle)*t.distance)+`px ${Math.round(Math.sin(t.angle)*t.distance)}px`;return 0<t.blur?`text-shadow: ${i} ${t.blur}px `+e:`text-shadow: ${i} `+e}function d(t){return[`-webkit-text-stroke-width: ${t.width}px`,"-webkit-text-stroke-color: "+l.Q.shared.setValue(t.color).toHex(),`text-stroke-width: ${t.width}px`,"text-stroke-color: "+l.Q.shared.setValue(t.color).toHex(),"paint-order: stroke"].join(";")}const c={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},p={fill:t=>"color: "+l.Q.shared.setValue(t).toHex(),breakWords:t=>"word-wrap: "+(t?"break-all":"break-word"),stroke:d,dropShadow:u};class a extends e.x{constructor(t={}){super(t),this._cssOverrides=[],this.cssOverrides??(this.cssOverrides=t.cssOverrides),this.tagStyles=t.tagStyles??{}}set cssOverrides(t){this._cssOverrides=t instanceof Array?t:[t],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=(0,r.V)(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new a({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=n(this)),this._cssStyle}addOverride(...t){t=t.filter(t=>!this.cssOverrides.includes(t));0<t.length&&(this.cssOverrides.push(...t),this.update())}removeOverride(...t){const e=t.filter(t=>this.cssOverrides.includes(t));0<e.length&&(this.cssOverrides=this.cssOverrides.filter(t=>!e.includes(t)),this.update())}set fill(t){"string"!=typeof t&&"number"!=typeof t&&(0,s.R)("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=t}set stroke(t){t&&"string"!=typeof t&&"number"!=typeof t&&(0,s.R)("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=t}}},2073:(t,e,i)=>{"use strict";i.d(e,{r:()=>function(t,e,i,s){var{domElement:s,styleElement:r,svgRoot:n}=s=s||(h=h||new o.pF);s.innerHTML=`<style>${e.cssStyle}</style><div>${t}</div>`,s.setAttribute("style","transform-origin: top left; display: inline-block"),i&&(r.textContent=i);document.body.appendChild(n);t=s.getBoundingClientRect(),n.remove(),r=a.P.measureFont(e.fontStyle).descent;return{width:t.width,height:t.height+r}}});var a=i(4016),o=i(5337);let h},8291:(t,e,i)=>{"use strict";i.d(e,{x:()=>c});var e=i(4486),h=i(2577),l=i(4670),u=i(7276),s=i(2694),r=i(990),n=i(8011);const d=class d extends e.A{constructor(t={}){super();{var e=t,i;const r=e;if("boolean"==typeof r.dropShadow&&r.dropShadow&&(i=c.defaultDropShadow,e.dropShadow={alpha:r.dropShadowAlpha??i.alpha,angle:r.dropShadowAngle??i.angle,blur:r.dropShadowBlur??i.blur,color:r.dropShadowColor??i.color,distance:r.dropShadowDistance??i.distance}),void 0!==r.strokeThickness&&((0,l.t)(l.l,"strokeThickness is now a part of stroke"),i=r.stroke,e.stroke={color:i,width:r.strokeThickness}),Array.isArray(r.fill)){(0,l.t)(l.l,"gradient fill is now a fill pattern: `new FillGradient(...)`");const n=new u._(0,0,0,1.7*e.fontSize),a=r.fill.map(t=>h.Q.shared.setValue(t).toNumber());a.forEach((t,e)=>{e=r.fillGradientStops[e]??e/a.length;n.addColorStop(e,t)}),e.fill={fill:n}}}var s={...d.defaultTextStyle,...t};for(const o in s)this[o]=s[o];this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow=null!==t&&"object"==typeof t?{...d.defaultDropShadow,...t}:t?{...d.defaultDropShadow}:null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize="string"==typeof t?parseInt(t,10):t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t,this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._fill=(0,r.M)(0===t?"black":t,s.T.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._stroke=(0,r.M)(t,s.T.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=(0,n.V)(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){var t=d.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new d({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){this.removeAllListeners(),("boolean"==typeof t?t:t?.texture)&&(t="boolean"==typeof t?t:t?.textureSource,this._fill?.texture&&this._fill.texture.destroy(t),this._originalFill?.texture&&this._originalFill.texture.destroy(t),this._stroke?.texture&&this._stroke.texture.destroy(t),this._originalStroke?.texture)&&this._originalStroke.texture.destroy(t),this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}};d.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},d.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let c=d},4016:(t,e,i)=>{"use strict";i.d(e,{P:()=>n});var s=i(1761),p=i(1242);const r={willReadFrequently:!0},x=class x{static get experimentalLetterSpacingSupported(){let t=x._experimentalLetterSpacingSupported;var e;return void 0!==t&&(e=s.e.get().getCanvasRenderingContext2D().prototype,t=x._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e),t}constructor(t,e,i,s,r,n,a,o,h){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=r,this.lineWidths=n,this.lineHeight=a,this.maxLineWidth=o,this.fontProperties=h}static measureText(t=" ",e,i=x._canvas,s=e.wordWrap){var r=t+":"+e.styleKey;if(x._measurementCache[r])return x._measurementCache[r];var r=(0,p.Z)(e),n=x.measureFont(r),a=(0===n.fontSize&&(n.fontSize=e.fontSize,n.ascent=e.fontSize),x.__context);a.font=r;var o=(s?x._wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),h=new Array(o.length);let l=0;for(let t=0;t<o.length;t++){var u=x._measureText(o[t],e.letterSpacing,a);h[t]=u,l=Math.max(l,u)}r=e._stroke?.width||0;let d=l+r;e.dropShadow&&(d+=e.dropShadow.distance);s=e.lineHeight||n.fontSize+r;let c=Math.max(s,n.fontSize+2*r)+(o.length-1)*(s+e.leading);return e.dropShadow&&(c+=e.dropShadow.distance),new x(t,e,d,c,o,h,s+e.leading,l,n)}static _measureText(t,e,i){let s=!1,r=(x.experimentalLetterSpacingSupported&&(x.experimentalLetterSpacing?(i.letterSpacing=e+"px",i.textLetterSpacing=e+"px",s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px")),i.measureText(t).width);return 0<r&&(s?r-=e:r+=(x.graphemeSegmenter(t).length-1)*e),r}static _wordWrap(t,n,e=x._canvas){var a=e.getContext("2d",r);let o=0,h="",l="";var u=Object.create(null),{letterSpacing:d,whiteSpace:e}=n,i=x._collapseSpaces(e),s=x._collapseNewlines(e);let c=!i;var p=n.wordWrapWidth+d,f=x._tokenize(t);for(let t=0;t<f.length;t++){let r=f[t];if(x._isNewline(r)){if(!s){l+=x._addLine(h),c=!i,h="",o=0;continue}r=" "}if(i){var g=x.isBreakingSpace(r),m=x.isBreakingSpace(h[h.length-1]);if(g&&m)continue}g=x._getFromCache(r,d,u,a);if(p<g)if(""!==h&&(l+=x._addLine(h),h="",o=0),x.canBreakWords(r,n.breakWords)){var y=x.wordWrapSplit(r);for(let s=0;s<y.length;s++){let t=y[s],e=t,i=1;for(;y[s+i];){var _=y[s+i];if(x.canBreakChars(e,_,r,s,n.breakWords))break;t+=_,e=_,i++}s+=i-1;var v=x._getFromCache(t,d,u,a);v+o>p&&(l+=x._addLine(h),c=!1,h="",o=0),h+=t,o+=v}}else{0<h.length&&(l+=x._addLine(h),h="",o=0);m=t===f.length-1;l+=x._addLine(r,!m),c=!1,h="",o=0}else g+o>p&&(c=!1,l+=x._addLine(h),h="",o=0),(0<h.length||!x.isBreakingSpace(r)||c)&&(h+=r,o+=g)}return l+=x._addLine(h,!1)}static _addLine(t,e=!0){return t=x._trimRight(t),t=e?t+`
`:t}static _getFromCache(t,e,i,s){let r=i[t];return"number"!=typeof r&&(r=x._measureText(t,e,s)+e,i[t]=r),r}static _collapseSpaces(t){return"normal"===t||"pre-line"===t}static _collapseNewlines(t){return"normal"===t}static _trimRight(e){if("string"!=typeof e)return"";for(let t=e.length-1;0<=t;t--){var i=e[t];if(!x.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static _isNewline(t){return"string"==typeof t&&x._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return"string"==typeof t&&x._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(e){var i=[];let s="";if("string"==typeof e){for(let t=0;t<e.length;t++){var r=e[t],n=e[t+1];x.isBreakingSpace(r,n)||x._isNewline(r)?(""!==s&&(i.push(s),s=""),i.push(r)):s+=r}""!==s&&i.push(s)}return i}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,s,r){return!0}static wordWrapSplit(t){return x.graphemeSegmenter(t)}static measureFont(t){var e;return x._fonts[t]||((e=x._context).font=t,e={ascent:(e=e.measureText(x.METRICS_STRING+x.BASELINE_SYMBOL)).actualBoundingBoxAscent,descent:e.actualBoundingBoxDescent,fontSize:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent},x._fonts[t]=e)}static clearMetrics(t=""){t?delete x._fonts[t]:x._fonts={}}static get _canvas(){if(!x.__canvas){let e;try{var t=new OffscreenCanvas(0,0);if(t.getContext("2d",r)?.measureText)return x.__canvas=t;e=s.e.get().createCanvas()}catch(t){e=s.e.get().createCanvas()}e.width=e.height=10,x.__canvas=e}return x.__canvas}static get _context(){return x.__context||(x.__context=x._canvas.getContext("2d",r)),x.__context}};x.METRICS_STRING="|ÉqÅ",x.BASELINE_SYMBOL="M",x.BASELINE_MULTIPLIER=1.4,x.HEIGHT_MULTIPLIER=2,x.graphemeSegmenter=(()=>{if("function"!=typeof Intl?.Segmenter)return t=>[...t];{const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(t=>t.segment)}})(),x.experimentalLetterSpacing=!1,x._fonts={},x._newlines=[10,13],x._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],x._measurementCache={};let n=x},1242:(t,e,i)=>{"use strict";i.d(e,{Z:()=>function(t){var e="number"==typeof t.fontSize?t.fontSize+"px":t.fontSize;let i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(let e=i.length-1;0<=e;e--){let t=i[e].trim();/([\"\'])[^\'\"]+\1/.test(t)||s.includes(t)||(t=`"${t}"`),i[e]=t}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} `+i.join(",")}});const s=["serif","sans-serif","monospace","cursive","fantasy","system-ui"]},8011:(t,e,i)=>{"use strict";i.d(e,{V:()=>function(e){var i=[];let s=0;for(let t=0;t<n.length;t++){var r=n[t];i[s++]=e[r]}return s=a(e._fill,i,s),s=function(t,e,i){return t&&(i=a(t,e,i),e[i++]=t.width,e[i++]=t.alignment,e[i++]=t.cap,e[i++]=t.join,e[i++]=t.miterLimit),i}(e._stroke,i,s),i.join("-")}});const n=["_fontFamily","_fontStyle","_fontSize","_fontVariant","_fontWeight","_breakWords","_align","_leading","_letterSpacing","_lineHeight","_textBaseline","_whiteSpace","_wordWrap","_wordWrapWidth","_padding","_cssOverrides","_trim"];function a(t,e,i){return t&&(e[i++]=t.color,e[i++]=t.alpha,e[i++]=t.fill?.uid),i}},9010:(t,e,i)=>{"use strict";var s=i(8507),r=i(4589),n=i(1173),d=i(2233),c=i(4492),p=i(2927),o=i(9252);const h=class h{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof c.g?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;e=parseFloat(e.meta.scale);e?(this.resolution=e,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=h.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;for(var i=h.BATCH_SIZE;e-t<i&&e<this._frameKeys.length;){var s=this._frameKeys[e],r=this._frames[s],n=r.frame;if(n){let t=null,e=null;var a=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,a=new o.M(0,0,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution);t=r.rotated?new o.M(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):new o.M(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(e=new o.M(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[s]=new c.g({source:this.textureSource,frame:t,orig:a,trim:e,rotate:r.rotated?2:0,defaultAnchor:r.anchor,defaultBorders:r.borders,label:s.toString()})}e++}}_processAnimations(){var e=this.data.animations||{};for(const s in e){this.animations[s]=[];for(let t=0;t<e[s].length;t++){var i=e[s][t];this.animations[s].push(this.textures[i])}}}_parseComplete(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*h.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*h.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};h.BATCH_SIZE=1e3;let f=h;const a=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];i={extension:s.Ag.Asset,cache:{test:t=>t instanceof f,getCacheableAssets:(t,e)=>function i(t,s,e){const r={};if(t.forEach(t=>{r[t]=s}),Object.keys(s.textures).forEach(t=>{r[t]=s.textures[t]}),!e){const n=p.A.dirname(t[0]);s.linkedSheets.forEach((t,e)=>{e=i([n+"/"+s.data.meta.related_multi_packs[e]],t,!0),Object.assign(r,e)})}return r}(t,e,!1)},resolver:{test:t=>{var t=t.split("?")[0].split("."),e=t.pop(),t=t.pop();return"json"===e&&a.includes(t)},parse:t=>{var e=t.split(".");return{resolution:parseFloat(n.x.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:s.Ag.LoadParser,priority:r.T.Normal},async testParse(t,e){return".json"===p.A.extname(e.src).toLowerCase()&&!!t.frames},async parse(t,e,i){var{texture:s,imageFilename:r}=e?.data??{};let n=p.A.dirname(e.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let a;a=s instanceof c.g?s:(s=(0,d.Y)(n+(r??t.meta.image),e.src),(await i.load([s]))[s]);const o=new f(a.source,t);await o.parse();r=t?.meta?.related_multi_packs;if(Array.isArray(r)){var h,l=[];for(const u of r)"string"!=typeof u||(h=n+u,e.data?.ignoreMultiPack)||(h=(0,d.Y)(h,e.src),l.push(i.load({src:h,data:{ignoreMultiPack:!0}})));s=await Promise.all(l);(o.linkedSheets=s).forEach(e=>{e.linkedSheets=[o].concat(o.linkedSheets.filter(t=>t!==e))})}return o},async unload(t,e,i){await i.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};s.XO.add(i)},7309:(t,e,i)=>{"use strict";i.d(e,{R:()=>a});var s=i(4458);class r{constructor(t,e=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=s}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e}}const n=class n{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new r(null,null,1/0),this.deltaMS=1/n.targetFPMS,this.elapsedMS=1/n.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started)&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=s.d.NORMAL){return this._addListener(new r(t,e,i))}addOnce(t,e,i=s.d.NORMAL){return this._addListener(new r(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}e=(i=e).next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let i;if(e>this.lastTime){if((i=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){var s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*n.targetFPMS;s=this._head;let t=s.next;for(;t;)t=t.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,n.targetFPMS);this._maxElapsedMS=1/t}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))}static get shared(){var t;return n._shared||((t=n._shared=new n).autoStart=!0,t._protected=!0),n._shared}static get system(){var t;return n._system||((t=n._system=new n).autoStart=!0,t._protected=!0),n._system}};n.targetFPMS=.06;let a=n},4458:(t,e,i)=>{"use strict";i.d(e,{d:()=>s});var s=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(s||{})},6858:(t,e,i)=>{"use strict";i.d(e,{C:()=>async function(){return s=s??(async()=>{var t,e,i,s=document.createElement("canvas").getContext("webgl");return s&&(i=await new Promise(t=>{const e=document.createElement("video");e.onloadeddata=()=>t(e),e.onerror=()=>t(null),e.autoplay=!1,e.crossOrigin="anonymous",e.preload="auto",e.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",e.load()}))&&(t=s.createTexture(),s.bindTexture(s.TEXTURE_2D,t),e=s.createFramebuffer(),s.bindFramebuffer(s.FRAMEBUFFER,e),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t,0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,i),i=new Uint8Array(4),s.readPixels(0,0,1,1,s.RGBA,s.UNSIGNED_BYTE,i),s.deleteFramebuffer(e),s.deleteTexture(t),s.getExtension("WEBGL_lose_context")?.loseContext(),i[0]<=i[3])?"premultiplied-alpha":"premultiply-alpha-on-upload"})(),s}});let s},4577:(t,e,i)=>{"use strict";i.d(e,{f:()=>function(){if("boolean"!=typeof s)try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");s=!0===t({a:"b"},"a","b")}catch(t){s=!1}return s}});let s},9903:(t,e,i)=>{"use strict";i.d(e,{d:()=>function(t,e,i){var s=t.length;let r;if(!(s<=e||0===i)){i=s<e+i?s-e:i;var n=s-i;for(r=e;r<n;++r)t[r]=t[r+i];t.length=n}}})},133:(t,e,i)=>{"use strict";i.d(e,{L:()=>function(t="default"){void 0===s[t]&&(s[t]=-1);return++s[t]}});const s={default:-1}},2048:(t,e,i)=>{"use strict";i.d(e,{y:()=>function(t,e,i,s){var{width:r,height:n}=i.orig,i=i.trim;{var a,o;i?(a=i.width,o=i.height,t.minX=i.x-e._x*r-s,t.maxX=t.minX+a,t.minY=i.y-e._y*n-s,t.maxY=t.minY+o):(t.minX=-e._x*r-s,t.maxX=t.minX+r,t.minY=-e._y*n-s,t.maxY=t.minY+n)}}})},4670:(t,e,i)=>{"use strict";i.d(e,{l:()=>s,t:()=>function(e,i,s=3){if(!r[i]){let t=(new Error).stack;void 0===t?console.warn("PixiJS Deprecation Warning: ",i+`
Deprecated since v`+e):(t=t.split("\n").splice(s).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",i+`
Deprecated since v`+e),console.warn(t),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",i+`
Deprecated since v`+e),console.warn(t))),r[i]=!0}}});const r={},s="8.0.0"},268:(t,e,i)=>{"use strict";i.d(e,{R:()=>function(...t){s!==r&&(++s===r?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...t))}});let s=0;const r=500},2927:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var s=i(1761);function d(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function c(t){return t.split("?")[0].split("#")[0]}const r={toPosix(t){return e="\\",i="/",t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i);var e,i},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){d(t),t=this.toPosix(t);var e=/^file:\/\/\//.exec(t);return(e=e||/^[^/:]+:\/{0,2}/.exec(t))?e[0]:""},toAbsolute(t,e,i){return d(t),this.isDataUrl(t)||this.isBlobUrl(t)?t:(e=c(this.toPosix(e??s.e.get().getBaseUrl())),i=c(this.toPosix(i??this.rootname(e))),(t=this.toPosix(t)).startsWith("/")?r.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(e,t))},normalize(t){if(d(t),0===t.length)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;let e="";var i=(t=this.toPosix(t)).startsWith("/"),s=(this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length)),t.endsWith("/"));return 0<(t=function(e,i){let s="",r=0,n=-1,a=0,o=-1;for(let t=0;t<=e.length;++t){if(t<e.length)o=e.charCodeAt(t);else{if(47===o)break;o=47}if(47===o){if(n!==t-1&&1!==a)if(n!==t-1&&2===a){if(s.length<2||2!==r||46!==s.charCodeAt(s.length-1)||46!==s.charCodeAt(s.length-2))if(2<s.length){var h=s.lastIndexOf("/");if(h!==s.length-1){r=-1===h?(s="",0):(s=s.slice(0,h)).length-1-s.lastIndexOf("/"),n=t,a=0;continue}}else if(2===s.length||1===s.length){s="",r=0,n=t,a=0;continue}i&&(0<s.length?s+="/..":s="..",r=2)}else 0<s.length?s+="/"+e.slice(n+1,t):s=e.slice(n+1,t),r=t-n-1;n=t,a=0}else 46===o&&-1!==a?++a:a=-1}return s}(t,!1)).length&&s&&(t+="/"),i?"/"+t:e+t},isAbsolute(t){return d(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...e){if(0===e.length)return".";let i;for(let t=0;t<e.length;++t){var s,r=e[t];d(r),0<r.length&&(void 0===i?i=r:(s=e[t-1]??"",this.joinExtensions.includes(this.extname(s).toLowerCase())?i+="/../"+r:i+="/"+r))}return void 0===i?".":this.normalize(i)},dirname(e){if(d(e),0===e.length)return".";var t=47===(e=this.toPosix(e)).charCodeAt(0);let i=-1,s=!0;var r=this.getProtocol(e),n=e;for(let t=(e=e.slice(r.length)).length-1;1<=t;--t)if(47===e.charCodeAt(t)){if(!s){i=t;break}}else s=!1;return-1===i?t?"/":this.isUrl(n)?r+e:r:t&&1===i?"//":r+e.slice(0,i)},rootname(t){d(t),t=this.toPosix(t);let e="";var i;return e=t.startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)&&(i=t.indexOf("/",e.length),(e=-1!==i?t.slice(0,i):t).endsWith("/")||(e+="/")),e},basename(i,s){d(i),s&&d(s),i=c(this.toPosix(i));let r=0,n=-1,a=!0,o;if(void 0!==s&&0<s.length&&s.length<=i.length){if(s.length===i.length&&s===i)return"";let t=s.length-1,e=-1;for(o=i.length-1;0<=o;--o){var h=i.charCodeAt(o);if(47===h){if(!a){r=o+1;break}}else-1===e&&(a=!1,e=o+1),0<=t&&(h===s.charCodeAt(t)?-1==--t&&(n=o):(t=-1,n=e))}return r===n?n=e:-1===n&&(n=i.length),i.slice(r,n)}for(o=i.length-1;0<=o;--o)if(47===i.charCodeAt(o)){if(!a){r=o+1;break}}else-1===n&&(a=!1,n=o+1);return-1===n?"":i.slice(r,n)},extname(e){d(e);let i=-1,s=0,r=-1,n=!0,a=0;for(let t=(e=c(this.toPosix(e))).length-1;0<=t;--t){var o=e.charCodeAt(t);if(47===o){if(n)continue;s=t+1;break}-1===r&&(n=!1,r=t+1),46===o?-1===i?i=t:1!==a&&(a=1):-1!==i&&(a=-1)}return-1===i||-1===r||0===a||1===a&&i===r-1&&i===s+1?"":e.slice(i,r)},parse(o){d(o);var h={root:"",dir:"",base:"",ext:"",name:""};if(0!==o.length){(o=c(this.toPosix(o))).charCodeAt(0);var l,u=this.isAbsolute(o);let t;h.root=this.rootname(o),t=u||this.hasProtocol(o)?1:0;let e=-1,i=0,s=-1,r=!0,n=o.length-1,a=0;for(;n>=t;--n){if(47===(l=o.charCodeAt(n))){if(r)continue;i=n+1;break}-1===s&&(r=!1,s=n+1),46===l?-1===e?e=n:1!==a&&(a=1):-1!==e&&(a=-1)}-1===e||-1===s||0===a||1===a&&e===s-1&&e===i+1?-1!==s&&(0===i&&u?h.base=h.name=o.slice(1,s):h.base=h.name=o.slice(i,s)):(0===i&&u?(h.name=o.slice(1,e),h.base=o.slice(1,s)):(h.name=o.slice(i,e),h.base=o.slice(i,s)),h.ext=o.slice(e,s)),h.dir=this.dirname(o)}return h},sep:"/",delimiter:":",joinExtensions:[".html"]}},8425:(t,e,i)=>{"use strict";i.d(e,{b:()=>s});class s{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(t){let e;return(e=0<this._index?this._pool[--this._index]:new this._classType).init?.(t),e}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}}},8218:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var s=i(8425);const r=new class{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new s.b(t)),this._poolsByClass.get(t)}stats(){const i={};return this._poolsByClass.forEach(t=>{var e=i[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;i[e]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),i}}}},s={};function g(t){var e=s[t];return void 0!==e||(e=s[t]={exports:{}},i[t](e,e.exports,g)),e.exports}g.m=i,u="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",d="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",c="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",p=t=>{t&&t.d<1&&(t.d=1,t.forEach(t=>t.r--),t.forEach(t=>t.r--?t.r++:t()))},g.a=(t,e,i)=>{i&&((r=[]).d=-1);var r,n,s,a,o=new Set,h=t.exports,l=new Promise((t,e)=>{a=e,s=t});l[d]=h,l[u]=t=>(r&&t(r),o.forEach(t),l.catch(t=>{})),t.exports=l,e(t=>{n=t.map(t=>{if(null!==t&&"object"==typeof t){if(t[u])return t;var e,i;if(t.then)return(e=[]).d=0,t.then(t=>{i[d]=t,p(e)},t=>{i[c]=t,p(e)}),(i={})[u]=t=>t(e),i}var s={};return s[u]=t=>{},s[d]=t,s});var i,s=()=>n.map(t=>{if(t[c])throw t[c];return t[d]}),t=new Promise(t=>{(i=()=>t(s)).r=0;var e=t=>t!==r&&!o.has(t)&&(o.add(t),t)&&!t.d&&(i.r++,t.push(i));n.map(t=>t[u](e))});return i.r?t:s()},t=>(t?a(l[c]=t):s(h),p(r))),r&&r.d<0&&(r.d=0)},g.d=(t,e)=>{for(var i in e)g.o(e,i)&&!g.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},g.f={},g.e=i=>Promise.all(Object.keys(g.f).reduce((t,e)=>(g.f[e](i,t),t),[])),g.u=t=>t+".js",g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),g.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),f={},g.l=(s,t,e,i)=>{if(f[s])f[s].push(t);else{var r,n;if(void 0!==e)for(var a=document.getElementsByTagName("script"),o=0;o<a.length;o++){var h=a[o];if(h.getAttribute("src")==s||h.getAttribute("data-webpack")=="al:"+e){r=h;break}}r||(n=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,g.nc&&r.setAttribute("nonce",g.nc),r.setAttribute("data-webpack","al:"+e),r.src=s),f[s]=[t];var t=(t,e)=>{r.onerror=r.onload=null,clearTimeout(l);var i=f[s];if(delete f[s],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach(t=>t(e)),t)return t(e)},l=setTimeout(t.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=t.bind(null,r.onerror),r.onload=t.bind(null,r.onload),n&&document.head.appendChild(r)}},g.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},g.g.importScripts&&(e=g.g.location+"");var e,r=g.g.document;if(!e&&r&&!(e=r.currentScript?r.currentScript.src:e)){var n=r.getElementsByTagName("script");if(n.length)for(var a=n.length-1;-1<a&&(!e||!/^http(s?):/.test(e));)e=n[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),g.p=e,h={792:0},g.f.j=(i,t)=>{var e,s,r=g.o(h,i)?h[i]:void 0;0!==r&&(r?t.push(r[2]):(e=new Promise((t,e)=>r=h[i]=[t,e]),t.push(r[2]=e),t=g.p+g.u(i),s=new Error,g.l(t,t=>{var e;g.o(h,i)&&(0!==(r=h[i])&&(h[i]=void 0),r)&&(e=t&&("load"===t.type?"missing":t.type),t=t&&t.target&&t.target.src,s.message="Loading chunk "+i+" failed.\n("+e+": "+t+")",s.name="ChunkLoadError",s.type=e,s.request=t,r[1](s))},"chunk-"+i,i)))},r=(t,e)=>{var i,s,[r,n,a]=e,o=0;if(r.some(t=>0!==h[t])){for(i in n)g.o(n,i)&&(g.m[i]=n[i]);a&&a(g)}for(t&&t(e);o<r.length;o++)s=r[o],g.o(h,s)&&h[s]&&h[s][0](),h[s]=0},(t=self.webpackChunkal=self.webpackChunkal||[]).forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t));g(4497)})();